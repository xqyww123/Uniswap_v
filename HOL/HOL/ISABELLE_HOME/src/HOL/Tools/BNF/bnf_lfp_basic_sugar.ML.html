<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>File ‹Tools/BNF/bnf_lfp_basic_sugar.ML›</title>
</head>


<body>
<div class="head">
<h1>File ‹Tools/BNF/bnf_lfp_basic_sugar.ML›</h1>
</div>

<pre class="source"><span class="comment1"><span>(*  Title:      HOL/Tools/BNF/bnf_lfp_basic_sugar.ML
    Author:     Jasmin Blanchette, TU Muenchen
    Copyright   2014

Registration of basic types as BNF least fixpoints (datatypes).
*)</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> </span><span class="entity"><span>BNF_LFP_Basic_Sugar</span></span><span> </span><span class="main"><span>:</span></span><span> </span><span class="keyword2"><span class="keyword"><span>sig</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span> </span><span class="main"><span>=</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>struct</span></span></span><span>

</span><span class="keyword3"><span class="keyword"><span>open</span></span></span><span> </span><span>Ctr_Sugar</span><span>
</span><span class="keyword3"><span class="keyword"><span>open</span></span></span><span> </span><span>BNF_Util</span><span>
</span><span class="keyword3"><span class="keyword"><span>open</span></span></span><span> </span><span>BNF_Def</span><span>
</span><span class="keyword3"><span class="keyword"><span>open</span></span></span><span> </span><span>BNF_Comp</span><span>
</span><span class="keyword3"><span class="keyword"><span>open</span></span></span><span> </span><span>BNF_FP_Rec_Sugar_Util</span><span>
</span><span class="keyword3"><span class="keyword"><span>open</span></span></span><span> </span><span>BNF_FP_Util</span><span>
</span><span class="keyword3"><span class="keyword"><span>open</span></span></span><span> </span><span>BNF_FP_Def_Sugar</span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>trivial_absT_info_of</span></span><span> </span><span class="entity"><span>fpT</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="main"><span>{</span></span><span>absT</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>fpT</span></span><span class="main"><span>,</span></span><span> </span><span>repT</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>fpT</span></span><span class="main"><span>,</span></span><span> </span><span>abs</span><span> </span><span class="main"><span>=</span></span><span> </span><span>Const</span><span> </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="../../../../../BNF_Composition.html#BNF_Composition.id_bnf|const"><span>id_bnf</span></a><span>›</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>fpT</span></span><span> </span><span>--&gt;</span><span> </span><span class="entity"><span>fpT</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span>rep</span><span> </span><span class="main"><span>=</span></span><span> </span><span>Const</span><span> </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="../../../../../BNF_Composition.html#BNF_Composition.id_bnf|const"><span>id_bnf</span></a><span>›</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>fpT</span></span><span> </span><span>--&gt;</span><span> </span><span class="entity"><span>fpT</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span>abs_inject</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Typedef.html#Typedef.type_definition.Abs_inject|fact"><span>type_definition.Abs_inject</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Composition.html#BNF_Composition.type_definition_id_bnf_UNIV|fact"><span>type_definition_id_bnf_UNIV</span></a><span> </span><a class="entity_ref" href="../../../../../Set.html#Set.UNIV_I|fact"><span>UNIV_I</span></a><span> </span><a class="entity_ref" href="../../../../../Set.html#Set.UNIV_I|fact"><span>UNIV_I</span></a><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
   </span><span>abs_inverse</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Typedef.html#Typedef.type_definition.Abs_inverse|fact"><span>type_definition.Abs_inverse</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Composition.html#BNF_Composition.type_definition_id_bnf_UNIV|fact"><span>type_definition_id_bnf_UNIV</span></a><span> </span><a class="entity_ref" href="../../../../../Set.html#Set.UNIV_I|fact"><span>UNIV_I</span></a><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
   </span><span>type_definition</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Composition.html#BNF_Composition.type_definition_id_bnf_UNIV|fact"><span>type_definition_id_bnf_UNIV</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>}</span></span><span class="main"><span>;</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>the_frozen_ctr_sugar_of</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>fpT_name</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>ctr_sugar_of</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>fpT_name</span></span><span class="main"><span>)</span></span><span>
  </span><span>|&gt;</span><span> </span><span class="entity"><span>morph_ctr_sugar</span></span><span> </span><span class="main"><span>(</span></span><span>Morphism.typ_morphism</span><span> </span><span class="inner_quoted"><span>"BNF"</span></span><span> </span><span>Logic.unvarifyT_global</span><span>
    </span><span>$&gt;</span><span> </span><span>Morphism.term_morphism</span><span> </span><span class="inner_quoted"><span>"BNF"</span></span><span> </span><span class="main"><span>(</span></span><span>Term.map_types</span><span> </span><span>Logic.unvarifyT_global</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>trivial_fp_result_of</span></span><span> </span><span class="entity"><span>fp_bnf</span></span><span> </span><span class="entity"><span>fpT</span></span><span> </span><span class="entity"><span>C</span></span><span> </span><span class="entity"><span>xtor_map</span></span><span> </span><span class="entity"><span>xtor_sets</span></span><span> </span><span class="entity"><span>xtor_rel</span></span><span> </span><span class="entity"><span>ctor_rec_o_map</span></span><span>
    </span><span class="entity"><span>xtor_rel_induct</span></span><span> </span><span class="entity"><span>ctor_rec_transfer</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>xtors</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span>Const</span><span> </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor|const"><span>xtor</span></a><span>›</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>fpT</span></span><span> </span><span>--&gt;</span><span> </span><span class="entity"><span>fpT</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>co_recs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span>Const</span><span> </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.ctor_rec|const"><span>ctor_rec</span></a><span>›</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>fpT</span></span><span> </span><span>--&gt;</span><span> </span><span class="entity"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span>--&gt;</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>fpT</span></span><span> </span><span>--&gt;</span><span> </span><span class="entity"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>co_rec_thms</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>map_id0_of_bnf</span></span><span> </span><span class="entity"><span>fp_bnf</span></span><span> </span><span>RS</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.ctor_rec|fact"><span>ctor_rec</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>co_rec_unique_thm</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>map_id0_of_bnf</span></span><span> </span><span class="entity"><span>fp_bnf</span></span><span> </span><span>RS</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.ctor_rec_unique|fact"><span>ctor_rec_unique</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
    </span><span class="main"><span>{</span></span><span>Ts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>fpT</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span>bnfs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>fp_bnf</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span>pre_bnfs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>ID_bnf</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span>absT_infos</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>trivial_absT_info_of</span></span><span> </span><span class="entity"><span>fpT</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
     </span><span>ctors</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>xtors</span></span><span class="main"><span>,</span></span><span> </span><span>dtors</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>xtors</span></span><span class="main"><span>,</span></span><span> </span><span>xtor_un_folds</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>co_recs</span></span><span class="main"><span>,</span></span><span>
     </span><span>xtor_co_recs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>co_recs</span></span><span class="main"><span>,</span></span><span> </span><span>xtor_co_induct</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_induct|fact"><span>xtor_induct</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span>dtor_ctors</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_xtor|fact"><span>xtor_xtor</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
     </span><span>ctor_dtors</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_xtor|fact"><span>xtor_xtor</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span>ctor_injects</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_inject|fact"><span>xtor_inject</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
     </span><span>dtor_injects</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_inject|fact"><span>xtor_inject</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span>xtor_maps</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>xtor_map</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
     </span><span>xtor_map_unique</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_map_unique|fact"><span>xtor_map_unique</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span>xtor_setss</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>xtor_sets</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span>xtor_rels</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>xtor_rel</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
     </span><span>xtor_un_fold_thms</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>co_rec_thms</span></span><span class="main"><span>,</span></span><span> </span><span>xtor_co_rec_thms</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>co_rec_thms</span></span><span class="main"><span>,</span></span><span>
     </span><span>xtor_un_fold_unique</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>co_rec_unique_thm</span></span><span class="main"><span>,</span></span><span> </span><span>xtor_co_rec_unique</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>co_rec_unique_thm</span></span><span class="main"><span>,</span></span><span>
     </span><span>xtor_un_fold_o_maps</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>ctor_rec_o_map</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span>xtor_co_rec_o_maps</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>ctor_rec_o_map</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
     </span><span>xtor_un_fold_transfers</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>ctor_rec_transfer</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
     </span><span>xtor_co_rec_transfers</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>ctor_rec_transfer</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
     </span><span>xtor_rel_co_induct</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>xtor_rel_induct</span></span><span class="main"><span>,</span></span><span> </span><span>dtor_set_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>}</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span class="main"><span>;</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>fp_sugar_of_sum</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>fpT</span></span><span> </span><span class="keyword1"><span class="keyword"><span>as</span></span></span><span> </span><span>Type</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>fpT_name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>As</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../../../../Sum_Type.html#Sum_Type.sum|type"><span>+</span></a></span><span> </span><span class="tfree"><span>'b</span></span><span>›</span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>fpBT</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../../../../Sum_Type.html#Sum_Type.sum|type"><span>+</span></a></span><span> </span><span class="tfree"><span>'d</span></span><span>›</span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>C</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="tfree"><span>'e</span></span><span>›</span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>X</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="tfree"><span>'sum</span></span><span>›</span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>ctr_Tss</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>map</span><span> </span><span>single</span><span> </span><span class="entity"><span>As</span></span><span class="main"><span>;</span></span><span>

    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>fp_bnf</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>bnf_of</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>fpT_name</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>xtor_map</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_map|fact"><span>xtor_map</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../../../../Sum_Type.html#Sum_Type.map_sum|const"><span>map_sum</span></a><span> </span><span class="free"><span>f1</span></span><span> </span><span class="free"><span>f2</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>f1</span></span><span> </span><span class="free"><span>f2</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>xtor_sets</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_set|fact"><span>xtor_set</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.setl|const"><span>setl</span></a></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_set|fact"><span>xtor_set</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.setr|const"><span>setr</span></a></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>xtor_rel</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_rel|fact"><span>xtor_rel</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../../../../BNF_Def.html#BNF_Def.rel_sum|const"><span>rel_sum</span></a><span> </span><span class="free"><span>R1</span></span><span> </span><span class="free"><span>R2</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>R1</span></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>ctor_rec_o_map</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.ctor_rec_o_map|fact"><span>ctor_rec_o_map</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../../../../Sum_Type.html#Sum_Type.map_sum|const"><span>map_sum</span></a><span> </span><span class="free"><span>g1</span></span><span> </span><span class="free"><span>g2</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>g1</span></span><span> </span><span class="free"><span>g2</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>xtor_rel_induct</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_rel_induct|fact"><span>xtor_rel_induct</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../../../../BNF_Def.html#BNF_Def.rel_sum|const"><span>rel_sum</span></a><span> </span><span class="free"><span>R1</span></span><span> </span><span class="free"><span>R2</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>R1</span></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>ctor_rec_transfer</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.ctor_rec_transfer|fact"><span>ctor_rec_transfer</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../../../../BNF_Def.html#BNF_Def.rel_sum|const"><span>rel_sum</span></a><span> </span><span class="free"><span>R1</span></span><span> </span><span class="free"><span>R2</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>R1</span></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
    </span><span class="main"><span>{</span></span><span>T</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>fpT</span></span><span class="main"><span>,</span></span><span>
     </span><span>BT</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>fpBT</span></span><span class="main"><span>,</span></span><span>
     </span><span>X</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>X</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Least_FP</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_res_index</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_numeral"><span>0</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_res</span><span> </span><span class="main"><span>=</span></span><span>
       </span><span class="entity"><span>trivial_fp_result_of</span></span><span> </span><span class="entity"><span>fp_bnf</span></span><span> </span><span class="entity"><span>fpT</span></span><span> </span><span class="entity"><span>C</span></span><span> </span><span class="entity"><span>xtor_map</span></span><span> </span><span class="entity"><span>xtor_sets</span></span><span> </span><span class="entity"><span>xtor_rel</span></span><span> </span><span class="entity"><span>ctor_rec_o_map</span></span><span> </span><span class="entity"><span>xtor_rel_induct</span></span><span>
         </span><span class="entity"><span>ctor_rec_transfer</span></span><span class="main"><span>,</span></span><span>
     </span><span>pre_bnf</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>ID_bnf</span></span><span> </span><span class="comment1"><span>(*wrong*)</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_bnf</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>fp_bnf</span></span><span class="main"><span>,</span></span><span>
     </span><span>absT_info</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>trivial_absT_info_of</span></span><span> </span><span class="entity"><span>fpT</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_nesting_bnfs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
     </span><span>live_nesting_bnfs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_ctr_sugar</span><span> </span><span class="main"><span>=</span></span><span>
       </span><span class="main"><span>{</span></span><span>ctrXs_Tss</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>ctr_Tss</span></span><span class="main"><span>,</span></span><span>
        </span><span>ctor_iff_dtor</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_iff_xtor|fact"><span>xtor_iff_xtor</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>ctr_defs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.Inl_def_alt|fact"><span>Inl_def_alt</span></a><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.Inr_def_alt|fact"><span>Inr_def_alt</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>ctr_sugar</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>the_frozen_ctr_sugar_of</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>fpT_name</span></span><span class="main"><span>,</span></span><span>
        </span><span>ctr_transfers</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.Inl_transfer|fact"><span>Inl_transfer</span></a><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.Inr_transfer|fact"><span>Inr_transfer</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>case_transfers</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.case_sum_transfer|fact"><span>case_sum_transfer</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>disc_transfers</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.isl_transfer|fact"><span>isl_transfer</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>sel_transfers</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>}</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_bnf_sugar</span><span> </span><span class="main"><span>=</span></span><span>
       </span><span class="main"><span>{</span></span><span>map_thms</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Sum_Type.html#Sum_Type.map_sum.simps|fact"><span>map_sum.simps</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>map_disc_iffs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.isl_map_sum|fact"><span>isl_map_sum</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>map_selss</span><span> </span><span class="main"><span>=</span></span><span> </span><span>map</span><span> </span><span>single</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.map_sum_sel|fact"><span>map_sum_sel</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>rel_injects</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.rel_sum_simps|fact"><span>rel_sum_simps</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>rel_distincts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.rel_sum_simps|fact"><span>rel_sum_simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>,</span></span><span>3</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../../../../HOL.html#HOL.eq_False|fact"><a class="entity_ref" href="../../../../../HOL.html#HOL.eq_False|fact"><span>eq_False</span></a></a><span class="main"><span>[</span></span><span class="operator"><span class="operator"><span>THEN</span></span></span><span> </span><a class="entity_ref" href="../../../../../HOL.html#HOL.iffD1|fact"><a class="entity_ref" href="../../../../../HOL.html#HOL.iffD1|fact"><span>iffD1</span></a></a><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>rel_sels</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.rel_sum_sel|fact"><span>rel_sum_sel</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>rel_intros</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Def.html#BNF_Def.rel_sum.intros|fact"><span>rel_sum.intros</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>rel_cases</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Def.html#BNF_Def.rel_sum.cases|fact"><span>rel_sum.cases</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>pred_injects</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.pred_sum_inject|fact"><span>pred_sum_inject</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>set_thms</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.sum_set_simps|fact"><span>sum_set_simps</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>set_selssss</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.set_sum_sel|fact"><span>set_sum_sel</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.set_sum_sel|fact"><span>set_sum_sel</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>set_introssss</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.setl.intros|fact"><span>setl.intros</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../../../../HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
          </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.setr.intros|fact"><span>setr.intros</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../../../../HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>set_cases</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.setl.cases|fact"><span>setl.cases</span></a><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.hypsubst_in_prems|fact"><span>hypsubst_in_prems</span></a><span class="main"><span>]</span></span><span>
          </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.setr.cases|fact"><span>setr.cases</span></a><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.hypsubst_in_prems|fact"><span>hypsubst_in_prems</span></a><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>}</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_co_induct_sugar</span><span> </span><span class="main"><span>=</span></span><span> </span><span>SOME</span><span>
       </span><span class="main"><span>{</span></span><span>co_rec</span><span> </span><span class="main"><span>=</span></span><span> </span><span>Const</span><span> </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="../../../../../Sum_Type.html#Sum_Type.sum.case_sum|const"><span>case_sum</span></a><span>›</span></span><span class="main"><span>,</span></span><span> </span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>Ts</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Ts</span></span><span> </span><span>---&gt;</span><span> </span><span class="entity"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>ctr_Tss</span></span><span> </span><span>---&gt;</span><span> </span><span class="entity"><span>fpT</span></span><span> </span><span>--&gt;</span><span> </span><span class="entity"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
        </span><span>common_co_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Sum_Type.html#Sum_Type.sum.induct|fact"><span>sum.induct</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>co_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Sum_Type.html#Sum_Type.sum.induct|fact"><span>sum.induct</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_def</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.ctor_rec_def_alt|fact"><span>ctor_rec_def_alt</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../../../../Sum_Type.html#Sum_Type.sum.case_sum|const"><span>case_sum</span></a><span> </span><span class="free"><span>f1</span></span><span> </span><span class="free"><span>f2</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>f1</span></span><span> </span><span class="free"><span>f2</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_thms</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Sum_Type.html#Sum_Type.sum.case|fact"><span>sum.case</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_discs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_disc_iffs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_selss</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_codes</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_transfers</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.case_sum_transfer|fact"><span>case_sum_transfer</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_o_maps</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.case_sum_o_map_sum|fact"><span>case_sum_o_map_sum</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>common_rel_co_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Def.html#BNF_Def.rel_sum.inducts|fact"><span>rel_sum.inducts</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>rel_co_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Def.html#BNF_Def.rel_sum.induct|fact"><span>rel_sum.induct</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>common_set_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>set_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>}</span></span><span class="main"><span>}</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span class="main"><span>;</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>fp_sugar_of_prod</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>fpT</span></span><span> </span><span class="keyword1"><span class="keyword"><span>as</span></span></span><span> </span><span>Type</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>fpT_name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>As</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.prod|type"><span>*</span></a></span><span> </span><span class="tfree"><span>'b</span></span><span>›</span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>fpBT</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.prod|type"><span>*</span></a></span><span> </span><span class="tfree"><span>'d</span></span><span>›</span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>C</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="tfree"><span>'e</span></span><span>›</span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>X</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="tfree"><span>'prod</span></span><span>›</span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>ctr_Ts</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>As</span></span><span class="main"><span>;</span></span><span>

    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>fp_bnf</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>the</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>bnf_of</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>fpT_name</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>xtor_map</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_map|fact"><span>xtor_map</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.map_prod|const"><span>map_prod</span></a><span> </span><span class="free"><span>f1</span></span><span> </span><span class="free"><span>f2</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>f1</span></span><span> </span><span class="free"><span>f2</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>xtor_sets</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_set|fact"><span>xtor_set</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.fsts|const"><span>fsts</span></a></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_set|fact"><span>xtor_set</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.snds|const"><span>snds</span></a></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>xtor_rel</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_rel|fact"><span>xtor_rel</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.rel_prod|const"><span>rel_prod</span></a><span> </span><span class="free"><span>R1</span></span><span> </span><span class="free"><span>R2</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>R1</span></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>ctor_rec_o_map</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.ctor_rec_o_map|fact"><span>ctor_rec_o_map</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.map_prod|const"><span>map_prod</span></a><span> </span><span class="free"><span>g1</span></span><span> </span><span class="free"><span>g2</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>g1</span></span><span> </span><span class="free"><span>g2</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>xtor_rel_induct</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_rel_induct|fact"><span>xtor_rel_induct</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.rel_prod|const"><span>rel_prod</span></a><span> </span><span class="free"><span>R1</span></span><span> </span><span class="free"><span>R2</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>R1</span></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>ctor_rec_transfer</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.ctor_rec_transfer|fact"><span>ctor_rec_transfer</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.rel_prod|const"><span>rel_prod</span></a><span> </span><span class="free"><span>R1</span></span><span> </span><span class="free"><span>R2</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>R1</span></span><span> </span><span class="free"><span>R2</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>;</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
    </span><span class="main"><span>{</span></span><span>T</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>fpT</span></span><span class="main"><span>,</span></span><span>
     </span><span>BT</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>fpBT</span></span><span class="main"><span>,</span></span><span>
     </span><span>X</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>X</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Least_FP</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_res_index</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_numeral"><span>0</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_res</span><span> </span><span class="main"><span>=</span></span><span>
       </span><span class="entity"><span>trivial_fp_result_of</span></span><span> </span><span class="entity"><span>fp_bnf</span></span><span> </span><span class="entity"><span>fpT</span></span><span> </span><span class="entity"><span>C</span></span><span> </span><span class="entity"><span>xtor_map</span></span><span> </span><span class="entity"><span>xtor_sets</span></span><span> </span><span class="entity"><span>xtor_rel</span></span><span> </span><span class="entity"><span>ctor_rec_o_map</span></span><span> </span><span class="entity"><span>xtor_rel_induct</span></span><span>
         </span><span class="entity"><span>ctor_rec_transfer</span></span><span class="main"><span>,</span></span><span>
     </span><span>pre_bnf</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>ID_bnf</span></span><span> </span><span class="comment1"><span>(*wrong*)</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_bnf</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>fp_bnf</span></span><span class="main"><span>,</span></span><span>
     </span><span>absT_info</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>trivial_absT_info_of</span></span><span> </span><span class="entity"><span>fpT</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_nesting_bnfs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
     </span><span>live_nesting_bnfs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_ctr_sugar</span><span> </span><span class="main"><span>=</span></span><span>
       </span><span class="main"><span>{</span></span><span>ctrXs_Tss</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>ctr_Ts</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>ctor_iff_dtor</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.xtor_iff_xtor|fact"><span>xtor_iff_xtor</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>ctr_defs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.Pair_def_alt|fact"><span>Pair_def_alt</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>ctr_sugar</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>the_frozen_ctr_sugar_of</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>fpT_name</span></span><span class="main"><span>,</span></span><span>
        </span><span>ctr_transfers</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.Pair_transfer|fact"><span>Pair_transfer</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>case_transfers</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.case_prod_transfer|fact"><span>case_prod_transfer</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>disc_transfers</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>sel_transfers</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.fst_transfer|fact"><span>fst_transfer</span></a><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.snd_transfer|fact"><span>snd_transfer</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>}</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_bnf_sugar</span><span> </span><span class="main"><span>=</span></span><span>
       </span><span class="main"><span>{</span></span><span>map_thms</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.map_prod_simp|fact"><span>map_prod_simp</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>map_disc_iffs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>map_selss</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.fst_map_prod|fact"><span>fst_map_prod</span></a><span> </span><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.snd_map_prod|fact"><span>snd_map_prod</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>rel_injects</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.rel_prod_inject|fact"><span>rel_prod_inject</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>rel_distincts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>rel_sels</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.rel_prod_sel|fact"><span>rel_prod_sel</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>rel_intros</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.rel_prod.intros|fact"><span>rel_prod.intros</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>rel_cases</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.rel_prod.cases|fact"><span>rel_prod.cases</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>pred_injects</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.pred_prod_inject|fact"><span>pred_prod_inject</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>set_thms</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.prod_set_simps|fact"><span>prod_set_simps</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>set_selssss</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.fsts.intros|fact"><span>fsts.intros</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.snds.intros|fact"><span>snds.intros</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>set_introssss</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.fsts.intros|fact"><span>fsts.intros</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
          </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.snds.intros|fact"><span>snds.intros</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.snd_conv|fact"><span>snd_conv</span></a><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>set_cases</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.fsts.cases|fact"><span>fsts.cases</span></a><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.eq_fst_iff|fact"><span>eq_fst_iff</span></a><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.ex_neg_all_pos|fact"><span>ex_neg_all_pos</span></a><span class="main"><span>]</span></span><span>
          </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.snds.cases|fact"><span>snds.cases</span></a><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.eq_snd_iff|fact"><span>eq_snd_iff</span></a><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.ex_neg_all_pos|fact"><span>ex_neg_all_pos</span></a><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>}</span></span><span class="main"><span>,</span></span><span>
     </span><span>fp_co_induct_sugar</span><span> </span><span class="main"><span>=</span></span><span> </span><span>SOME</span><span>
       </span><span class="main"><span>{</span></span><span>co_rec</span><span> </span><span class="main"><span>=</span></span><span> </span><span>Const</span><span> </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span>›</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>ctr_Ts</span></span><span> </span><span>---&gt;</span><span> </span><span class="entity"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span>--&gt;</span><span> </span><span class="entity"><span>fpT</span></span><span> </span><span>--&gt;</span><span> </span><span class="entity"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
        </span><span>common_co_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.prod.induct|fact"><span>prod.induct</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>co_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.prod.induct|fact"><span>prod.induct</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_def</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNF_LFPs.html#Basic_BNF_LFPs.ctor_rec_def_alt|fact"><span>ctor_rec_def_alt</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><span class="free"><span>f</span></span><span>"</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>]</span></span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_thms</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Product_Type.html#Product_Type.prod.case|fact"><span>prod.case</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_discs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_disc_iffs</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_selss</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_codes</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_transfers</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.case_prod_transfer|fact"><span>case_prod_transfer</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>co_rec_o_maps</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../BNF_Fixpoint_Base.html#BNF_Fixpoint_Base.case_prod_o_map_prod|fact"><span>case_prod_o_map_prod</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>common_rel_co_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.rel_prod.inducts|fact"><span>rel_prod.inducts</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>rel_co_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../../../../Basic_BNFs.html#Basic_BNFs.rel_prod.induct|fact"><span>rel_prod.induct</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
        </span><span>common_set_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span>
        </span><span>set_inducts</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>}</span></span><span class="main"><span>}</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span class="main"><span>;</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Theory.setup</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Named_Target.theory_map</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>lthy</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
  </span><span>fold</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>BNF_FP_Def_Sugar.register_fp_sugars</span></span><span> </span><span class="main"><span>(</span></span><span>K</span><span> </span><span>true</span><span class="main"><span>)</span></span><span> </span><span>o</span><span> </span><span>single</span><span> </span><span>o</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>f</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>f</span></span><span> </span><span class="entity"><span>lthy</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>[</span></span><span class="entity"><span>fp_sugar_of_sum</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>fp_sugar_of_prod</span></span><span class="main"><span>]</span></span><span> </span><span class="entity"><span>lthy</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span class="main"><span>;</span></span><span>
</span></pre>
</body>

</html>