<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>File ‹Tools/SMT/verit_strategies.ML›</title>
</head>


<body>
<div class="head">
<h1>File ‹Tools/SMT/verit_strategies.ML›</h1>
</div>

<pre class="source"><span class="comment1"><span>(*  Title:      HOL/Tools/SMT/verit_strategies.ML
    Author:     Mathias Fleury, ENS Rennes, MPI, JKU, Freiburg University

VeriT proofs: parsing and abstract syntax tree.
*)</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>signature</span></span></span><span> </span><span class="entity"><span>VERIT_STRATEGIES</span></span><span> </span><span class="main"><span>=</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>sig</span></span></span><span>
  </span><span class="comment1"><span>(*Strategy related*)</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> veriT_strategy </span><span class="main"><span>:</span></span><span> </span><span>string</span><span> </span><span>Config.T</span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> veriT_current_strategy </span><span class="main"><span>:</span></span><span> </span><span>Context.generic</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>string</span><span> </span><span>list</span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> all_veriT_stgies</span><span class="main"><span>:</span></span><span> </span><span>Context.generic</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>string</span><span> </span><span>list</span><span class="main"><span>;</span></span><span>

  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> select_veriT_stgy</span><span class="main"><span>:</span></span><span> </span><span>string</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>Context.generic</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>Context.generic</span><span class="main"><span>;</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> valid_veriT_stgy</span><span class="main"><span>:</span></span><span> </span><span>string</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>Context.generic</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>bool</span><span class="main"><span>;</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> verit_add_stgy</span><span class="main"><span>:</span></span><span> </span><span>string</span><span> * </span><span>string</span><span> </span><span>list</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>Context.generic</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>Context.generic</span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> verit_rm_stgy</span><span class="main"><span>:</span></span><span> </span><span>string</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>Context.generic</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>Context.generic</span><span>

  </span><span class="comment1"><span>(*Global tactic*)</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> verit_tac</span><span class="main"><span>:</span></span><span> </span><span class="entity"><span>Proof.context</span></span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>thm</span><span> </span><span>list</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>int</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>tactic</span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> verit_tac_stgy</span><span class="main"><span>:</span></span><span> </span><span>string</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span class="entity"><span>Proof.context</span></span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>thm</span><span> </span><span>list</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>int</span><span> </span><span class="main"><span>-&gt;</span></span><span> </span><span>tactic</span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span class="main"><span>;</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> </span><span class="entity"><span>Verit_Strategies</span></span><span class="main"><span>:</span></span><span> </span><span class="entity"><span>VERIT_STRATEGIES</span></span><span> </span><span class="main"><span>=</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>struct</span></span></span><span>

</span><span class="keyword3"><span class="keyword"><span>open</span></span></span><span> </span><span>SMTLIB_Proof</span><span>

</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>veriT_strategy_default_name</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"default"</span></span><span class="main"><span>;</span></span><span> </span><span class="comment1"><span>(*FUDGE*)</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>veriT_strategy_del_insts_name</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"del_insts"</span></span><span class="main"><span>;</span></span><span> </span><span class="comment1"><span>(*FUDGE*)</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>veriT_strategy_rm_insts_name</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"ccfv_SIG"</span></span><span class="main"><span>;</span></span><span> </span><span class="comment1"><span>(*FUDGE*)</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>veriT_strategy_ccfv_insts_name</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"ccfv_threshold"</span></span><span class="main"><span>;</span></span><span> </span><span class="comment1"><span>(*FUDGE*)</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>veriT_strategy_best_name</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"best"</span></span><span class="main"><span>;</span></span><span> </span><span class="comment1"><span>(*FUDGE*)</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>veriT_strategy_best</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="inner_quoted"><span>"--index-sorts"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--index-fresh-sorts"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--triggers-new"</span></span><span class="main"><span>,</span></span><span>
  </span><span class="inner_quoted"><span>"--triggers-sel-rm-specific"</span></span><span class="main"><span>]</span></span><span class="main"><span>;</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>veriT_strategy_del_insts</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="inner_quoted"><span>"--index-sorts"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--index-fresh-sorts"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--ccfv-breadth"</span></span><span class="main"><span>,</span></span><span>
  </span><span class="inner_quoted"><span>"--inst-deletion"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--index-SAT-triggers"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--inst-deletion-loops"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--inst-deletion-track-vars"</span></span><span class="main"><span>,</span></span><span>
  </span><span class="inner_quoted"><span>"--inst-deletion"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--index-SAT-triggers"</span></span><span class="main"><span>]</span></span><span class="main"><span>;</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>veriT_strategy_rm_insts</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="inner_quoted"><span>"--index-SIG"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--triggers-new"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--triggers-sel-rm-specific"</span></span><span class="main"><span>]</span></span><span class="main"><span>;</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>veriT_strategy_ccfv_insts</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="inner_quoted"><span>"--index-sorts"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--index-fresh-sorts"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--triggers-new"</span></span><span class="main"><span>,</span></span><span>
  </span><span class="inner_quoted"><span>"--triggers-sel-rm-specific"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--triggers-restrict-combine"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--inst-deletion"</span></span><span class="main"><span>,</span></span><span>
  </span><span class="inner_quoted"><span>"--index-SAT-triggers"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--inst-deletion-loops"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--inst-deletion-track-vars"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--inst-deletion"</span></span><span class="main"><span>,</span></span><span>
  </span><span class="inner_quoted"><span>"--index-SAT-triggers"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--inst-sorts-threshold=100000"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--ematch-exp=10000000"</span></span><span class="main"><span>,</span></span><span>
  </span><span class="inner_quoted"><span>"--ccfv-index=100000"</span></span><span class="main"><span>,</span></span><span> </span><span class="inner_quoted"><span>"--ccfv-index-full=1000"</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>veriT_strategy_default</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>;</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>type</span></span></span><span> </span><span class="entity"><span>verit_strategy</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span>default_strategy</span><span class="main"><span>:</span></span><span> </span><span>string</span><span class="main"><span>,</span></span><span> </span><span>strategies</span><span class="main"><span>:</span></span><span> </span><span class="main"><span>(</span></span><span>string</span><span> * </span><span>string</span><span> </span><span>list</span><span class="main"><span>)</span></span><span> </span><span>list</span><span class="main"><span>}</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>mk_verit_strategy</span></span><span> </span><span class="entity"><span>default_strategy</span></span><span> </span><span class="entity"><span>strategies</span></span><span> </span><span class="main"><span>:</span></span><span> </span><span class="entity"><span>verit_strategy</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>{</span></span><span>default_strategy</span><span class="main"><span>=</span></span><span class="entity"><span>default_strategy</span></span><span class="main"><span>,</span></span><span>strategies</span><span class="main"><span>=</span></span><span class="entity"><span>strategies</span></span><span class="main"><span>}</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>empty_data</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>mk_verit_strategy</span></span><span> </span><span class="entity"><span>veriT_strategy_best_name</span></span><span>
  </span><span class="main"><span>[</span></span><span class="main"><span>(</span></span><span class="entity"><span>veriT_strategy_default_name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>veriT_strategy_default</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="entity"><span>veriT_strategy_del_insts_name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>veriT_strategy_del_insts</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="entity"><span>veriT_strategy_rm_insts_name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>veriT_strategy_rm_insts</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="entity"><span>veriT_strategy_ccfv_insts_name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>veriT_strategy_ccfv_insts</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span>
   </span><span class="main"><span>(</span></span><span class="entity"><span>veriT_strategy_best_name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>veriT_strategy_best</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>merge_data</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span>strategies</span><span class="main"><span>=</span></span><span class="entity"><span>strategies1</span></span><span class="main"><span>,</span></span><span class="main"><span>...</span></span><span class="main"><span>}</span></span><span class="main"><span>:</span></span><span class="entity"><span>verit_strategy</span></span><span class="main"><span>,</span></span><span>
    </span><span class="main"><span>{</span></span><span class="entity"><span>default_strategy</span></span><span class="main"><span>,</span></span><span>strategies</span><span class="main"><span>=</span></span><span class="entity"><span>strategies2</span></span><span class="main"><span>}</span></span><span class="main"><span>:</span></span><span class="entity"><span>verit_strategy</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>:</span></span><span> </span><span class="entity"><span>verit_strategy</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="entity"><span>mk_verit_strategy</span></span><span> </span><span class="entity"><span>default_strategy</span></span><span> </span><span class="main"><span>(</span></span><span>AList.merge</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>op</span></span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>op</span></span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>strategies1</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>strategies2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> </span><span class="entity"><span>Data</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Generic_Data</span><span>
</span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>type</span></span></span><span> </span><span class="entity"><span>T</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>verit_strategy</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>empty</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>empty_data</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>merge</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>merge_data</span></span><span>
</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>veriT_current_strategy</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>{</span></span><span class="entity"><span>default_strategy</span></span><span class="main"><span>,</span></span><span class="entity"><span>strategies</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>(</span></span><span>Data.get</span><span> </span><span class="entity"><span>ctxt</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
    </span><span>AList.lookup</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>op</span></span></span><span class="main"><span>=</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>strategies</span></span><span> </span><span class="entity"><span>default_strategy</span></span><span>
   </span><span>|&gt;</span><span> </span><span>the</span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>veriT_strategy</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>Attrib.setup_config_string</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">binding</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="entity_def" id="SMT.smt_verit_strategy|attribute"><span>smt_verit_strategy</span></span><span>›</span></span></span><span> </span><span class="main"><span>(</span></span><span>K</span><span> </span><span class="entity"><span>veriT_strategy_best_name</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>valid_veriT_stgy</span></span><span> </span><span class="entity"><span>stgy</span></span><span> </span><span class="entity"><span>context</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>{</span></span><span class="entity"><span>strategies</span></span><span class="main"><span>,</span></span><span class="main"><span>...</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Data.get</span><span> </span><span class="entity"><span>context</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
    </span><span>AList.defined</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>op</span></span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>strategies</span></span><span> </span><span class="entity"><span>stgy</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>select_veriT_stgy</span></span><span> </span><span class="entity"><span>stgy</span></span><span> </span><span class="entity"><span>context</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>{</span></span><span class="entity"><span>strategies</span></span><span class="main"><span>,</span></span><span class="main"><span>...</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Data.get</span><span> </span><span class="entity"><span>context</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>upd</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Data.map</span><span> </span><span class="main"><span>(</span></span><span>K</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>mk_verit_strategy</span></span><span> </span><span class="entity"><span>stgy</span></span><span> </span><span class="entity"><span>strategies</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span>not</span><span> </span><span class="main"><span>(</span></span><span>AList.defined</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>op</span></span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>strategies</span></span><span> </span><span class="entity"><span>stgy</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span>
      </span><span>error</span><span> </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>"Trying to select unknown veriT strategy: "</span></span><span> </span><span>^</span><span> </span><span>quote</span><span> </span><span class="entity"><span>stgy</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="entity"><span>upd</span></span><span> </span><span class="entity"><span>context</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>verit_add_stgy</span></span><span> </span><span class="entity"><span>stgy</span></span><span> </span><span class="entity"><span>context</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>{</span></span><span class="entity"><span>default_strategy</span></span><span class="main"><span>,</span></span><span class="entity"><span>strategies</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Data.get</span><span> </span><span class="entity"><span>context</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
    </span><span>Data.map</span><span>
      </span><span class="main"><span>(</span></span><span>K</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>mk_verit_strategy</span></span><span> </span><span class="entity"><span>default_strategy</span></span><span> </span><span class="main"><span>(</span></span><span>AList.update</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>op</span></span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>stgy</span></span><span> </span><span class="entity"><span>strategies</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="entity"><span>context</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>verit_rm_stgy</span></span><span> </span><span class="entity"><span>stgy</span></span><span> </span><span class="entity"><span>context</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>{</span></span><span class="entity"><span>default_strategy</span></span><span class="main"><span>,</span></span><span class="entity"><span>strategies</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Data.get</span><span> </span><span class="entity"><span>context</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
    </span><span>Data.map</span><span>
      </span><span class="main"><span>(</span></span><span>K</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>mk_verit_strategy</span></span><span> </span><span class="entity"><span>default_strategy</span></span><span> </span><span class="main"><span>(</span></span><span>AList.delete</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>op</span></span></span><span> </span><span class="main"><span>=</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>stgy</span></span><span> </span><span class="entity"><span>strategies</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="entity"><span>context</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>all_veriT_stgies</span></span><span> </span><span class="entity"><span>context</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>{</span></span><span class="entity"><span>strategies</span></span><span class="main"><span>,</span></span><span class="main"><span>...</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span>Data.get</span><span> </span><span class="entity"><span>context</span></span><span>
   </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
    </span><span>map</span><span> </span><span>fst</span><span> </span><span class="entity"><span>strategies</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>select_verit</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>SMT_Config.select_solver</span></span><span> </span><span class="inner_quoted"><span>"verit"</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>verit_tac</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>SMT_Solver.smt_tac</span></span><span> </span><span class="main"><span>(</span></span><span>Config.put</span><span> </span><span class="entity"><span>SMT_Config.native_bv</span></span><span> </span><span>false</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span>Context.proof_map</span><span> </span><span class="entity"><span>select_verit</span></span><span> </span><span class="entity"><span>ctxt</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>verit_tac_stgy</span></span><span> </span><span class="entity"><span>stgy</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>verit_tac</span></span><span> </span><span class="main"><span>(</span></span><span>Context.proof_of</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>select_veriT_stgy</span></span><span> </span><span class="entity"><span>stgy</span></span><span> </span><span class="main"><span>(</span></span><span>Context.Proof</span><span> </span><span class="entity"><span>ctxt</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span class="main"><span>;</span></span><span>
</span></pre>
</body>

</html>