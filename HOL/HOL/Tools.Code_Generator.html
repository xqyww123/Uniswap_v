<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Tools.Code_Generator</title>
</head>


<body>
<div class="head">
<h1>Theory Tools.Code_Generator</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span>  Title:   Tools/Code_Generator.thy
    Author:  Florian Haftmann, TU Muenchen
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Loading the code generator and related modules</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="Tools.Code_Generator.html"><span>Code_Generator</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="../../Pure/Pure/Pure.html"><span>Pure</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>keywords</span></span></span><span>
  </span><span class="quoted"><span>"</span><span>print_codeproc</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>code_thms</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>code_deps</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> diag </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="quoted"><span>"</span><span>export_code</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>code_identifier</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>code_printing</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>code_reserved</span><span>"</span></span><span>
    </span><span class="quoted"><span>"</span><span>code_monad</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>code_reflect</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> thy_decl </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="quoted"><span>"</span><span>checking</span><span>"</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="quoted"><span>"</span><span>datatypes</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>functions</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>module_name</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>file</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>file_prefix</span><span>"</span></span><span>
    </span><span class="quoted"><span>"</span><span>constant</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>type_constructor</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>type_class</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>class_relation</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>class_instance</span><span>"</span></span><span> </span><span class="quoted"><span>"</span><span>code_module</span><span>"</span></span><span>
    </span><span class="main"><span>::</span></span><span> quasi_command
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/cache_io.ML.html"><span>‹</span><span>~~/src/Tools/cache_io.ML</span><span>›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/Code/code_preproc.ML.html"><span>‹</span><span>~~/src/Tools/Code/code_preproc.ML</span><span>›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/Code/code_symbol.ML.html"><span>‹</span><span>~~/src/Tools/Code/code_symbol.ML</span><span>›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/Code/code_thingol.ML.html"><span>‹</span><span>~~/src/Tools/Code/code_thingol.ML</span><span>›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/Code/code_simp.ML.html"><span>‹</span><span>~~/src/Tools/Code/code_simp.ML</span><span>›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/Code/code_printer.ML.html"><span>‹</span><span>~~/src/Tools/Code/code_printer.ML</span><span>›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/Code/code_target.ML.html"><span>‹</span><span>~~/src/Tools/Code/code_target.ML</span><span>›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/Code/code_namespace.ML.html"><span>‹</span><span>~~/src/Tools/Code/code_namespace.ML</span><span>›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/Code/code_ml.ML.html"><span>‹</span><span>~~/src/Tools/Code/code_ml.ML</span><span>›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/Code/code_haskell.ML.html"><span>‹</span><span>~~/src/Tools/Code/code_haskell.ML</span><span>›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/Code/code_scala.ML.html"><span>‹</span><span>~~/src/Tools/Code/code_scala.ML</span><span>›</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>code_datatype</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Code_Generator.holds_def|fact"><span class="entity_def" id="Code_Generator.holds_def|thm"><span class="entity_def" id="Code_Generator.holds_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Code_Generator.holds|const"><span>holds</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>prop</span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>holds</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>::</span></span><span>prop</span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_Generator.holds|fact"><span class="entity_def" id="Code_Generator.holds|thm"><span>holds</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>PROP</span></span><span> </span><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds|const"><span>holds</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold</span></span><span> </span><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds_def|fact"><span>holds_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><span>reflexive</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>code_datatype</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds|const"><span>holds</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Code_Generator.implies_code|fact"><span class="entity_def" id="Code_Generator.implies_code(2)|thm"><span class="entity_def" id="Code_Generator.implies_code(1)|thm"><span>implies_code</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>PROP</span></span><span> </span><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds|const"><span>holds</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds|const"><span>holds</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds|const"><span>holds</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>PROP</span></span><span> </span><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds|const"><span>holds</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>PROP</span></span><span> </span><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds|const"><span>holds</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds|fact"><span>holds</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>PROP</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds|const"><span>holds</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>PROP</span></span><span> </span><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds|const"><span>holds</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>rule</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule</span></span><span> </span><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds|fact"><span>holds</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/Code/code_runtime.ML.html"><span>‹</span><span>~~/src/Tools/Code/code_runtime.ML</span><span>›</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/Tools/nbe.ML.html"><span>‹</span><span>~~/src/Tools/nbe.ML</span><span>›</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>hide_const</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>open</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Tools.Code_Generator.html#Code_Generator.holds|const"><span>holds</span></a><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>