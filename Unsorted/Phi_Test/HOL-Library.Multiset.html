<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory HOL-Library.Multiset</title>
</head>


<body>
<div class="head">
<h1>Theory HOL-Library.Multiset</h1>
</div>

<pre class="source"><span class="comment1"><span>(</span><span>*</span><span>  Title:      HOL/Library/Multiset.thy
    Author:     Tobias Nipkow, Markus Wenzel, Lawrence C Paulson, Norbert Voelker
    Author:     Andrei Popescu, TU Muenchen
    Author:     Jasmin Blanchette, Inria, LORIA, MPII
    Author:     Dmitriy Traytel, TU Muenchen
    Author:     Mathias Fleury, MPII
    Author:     Martin Desharnais, MPI-INF Saarbruecken
</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>(Finite) Multisets</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="HOL-Library.Multiset.html"><span>Multiset</span></a><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="HOL-Library.Cancellation.html"><span>Cancellation</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>The type of multisets</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.arity_typerep_multiset|fact"><span class="entity_def" id="Multiset.typerep_multiset_def|fact"><span class="entity_def" id="Multiset.typerep_multiset_inst.typerep_multiset|fact"><span class="entity_def" id="Multiset.multiset.type_definition_multiset|fact"><span class="entity_def" id="Multiset.arity_type_multiset|fact"><span class="entity_def" id="Multiset.arity_typerep_multiset|thm"><span class="entity_def" id="Multiset.typerep_multiset_def|thm"><span class="entity_def" id="Multiset.typerep_multiset_inst.typerep_multiset|thm"><span class="entity_def" id="Multiset.multiset.type_definition_multiset|thm"><span class="entity_def" id="Multiset.arity_type_multiset|thm"><span class="entity_def" id="Multiset.typerep_multiset_def_raw|axiom"><span class="entity_def" id="Multiset.typerep_multiset_inst.typerep_multiset_def|axiom"><span class="entity_def" id="Multiset.multiset.type_definition_multiset|axiom"><span class="entity_def" id="Multiset.arity_type_multiset|axiom"><span class="entity_def" id="Multiset.typerep_multiset_inst.typerep_multiset|const"><span>typedef</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="entity_def" id="Multiset.multiset|type"><span>multiset</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><span class="bound"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>morphisms</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset.count_induct|fact"><span class="entity_def" id="Multiset.multiset.count_cases|fact"><span class="entity_def" id="Multiset.multiset.count_inject|fact"><span class="entity_def" id="Multiset.multiset.count_inverse|fact"><span class="entity_def" id="Multiset.multiset.count|fact"><span class="entity_def" id="Multiset.multiset.count_induct|thm"><span class="entity_def" id="Multiset.multiset.count_cases|thm"><span class="entity_def" id="Multiset.multiset.count_inject|thm"><span class="entity_def" id="Multiset.multiset.count_inverse|thm"><span class="entity_def" id="Multiset.multiset.count|thm"><span class="entity_def" id="Multiset.multiset.count|const"><span>count</span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Multiset.multiset.Abs_multiset_induct|fact"><span class="entity_def" id="Multiset.multiset.Abs_multiset_cases|fact"><span class="entity_def" id="Multiset.multiset.Abs_multiset_inject|fact"><span class="entity_def" id="Multiset.multiset.Abs_multiset_inverse|fact"><span class="entity_def" id="Multiset.multiset.Abs_multiset_induct|thm"><span class="entity_def" id="Multiset.multiset.Abs_multiset_cases|thm"><span class="entity_def" id="Multiset.multiset.Abs_multiset_inject|thm"><span class="entity_def" id="Multiset.multiset.Abs_multiset_inverse|thm"><span class="entity_def" id="Multiset.multiset.Abs_multiset|const"><span>Abs_multiset</span></span></span></span></span></span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.Quotient_multiset|fact"><span class="entity_def" id="Multiset.multiset.domain_eq|fact"><span class="entity_def" id="Multiset.multiset.domain_par_left_total|fact"><span class="entity_def" id="Multiset.multiset.domain_par|fact"><span class="entity_def" id="Multiset.multiset.domain|fact"><span class="entity_def" id="Multiset.multiset.rep_transfer|fact"><span class="entity_def" id="Multiset.multiset.right_total|fact"><span class="entity_def" id="Multiset.multiset.bi_unique|fact"><span class="entity_def" id="Multiset.multiset.right_unique|fact"><span class="entity_def" id="Multiset.multiset.left_unique|fact"><span class="entity_def" id="Multiset.arity_term_of_multiset|fact"><span class="entity_def" id="Multiset.term_of_multiset_triv|fact"><span class="entity_def" id="Multiset.term_of_multiset_inst.term_of_multiset|fact"><span class="entity_def" id="Multiset.multiset.pcr_cr_eq|fact"><span class="entity_def" id="Multiset.pcr_multiset_def|fact"><span class="entity_def" id="Multiset.cr_multiset_def|fact"><span class="entity_def" id="Multiset.multiset.lifting|bundle"><span class="entity_def" id="Multiset.Quotient_multiset|thm"><span class="entity_def" id="Multiset.multiset.domain_eq|thm"><span class="entity_def" id="Multiset.multiset.domain_par_left_total|thm"><span class="entity_def" id="Multiset.multiset.domain_par|thm"><span class="entity_def" id="Multiset.multiset.domain|thm"><span class="entity_def" id="Multiset.multiset.rep_transfer|thm"><span class="entity_def" id="Multiset.multiset.right_total|thm"><span class="entity_def" id="Multiset.multiset.bi_unique|thm"><span class="entity_def" id="Multiset.multiset.right_unique|thm"><span class="entity_def" id="Multiset.multiset.left_unique|thm"><span class="entity_def" id="Multiset.arity_term_of_multiset|thm"><span class="entity_def" id="Multiset.term_of_multiset_triv|thm"><span class="entity_def" id="Multiset.term_of_multiset_inst.term_of_multiset|thm"><span class="entity_def" id="Multiset.multiset.pcr_cr_eq|thm"><span class="entity_def" id="Multiset.pcr_multiset_def|thm"><span class="entity_def" id="Multiset.cr_multiset_def|thm"><span class="entity_def" id="Multiset.term_of_multiset_triv_raw|axiom"><span class="entity_def" id="Multiset.term_of_multiset_inst.term_of_multiset_def|axiom"><span class="entity_def" id="Multiset.pcr_multiset_def_raw|axiom"><span class="entity_def" id="Multiset.cr_multiset_def|axiom"><span class="entity_def" id="Multiset.term_of_multiset_inst.term_of_multiset|const"><span class="entity_def" id="Multiset.pcr_multiset|const"><span class="entity_def" id="Multiset.cr_multiset|const"><span>setup_lifting</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.type_definition_multiset|fact"><span>type_definition_multiset</span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_680..685">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_Abs_multiset|fact"><span class="entity_def" id="Multiset.count_Abs_multiset|thm"><span>count_Abs_multiset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.Abs_multiset|const"><span>Abs_multiset</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.Abs_multiset_inverse|fact"><span>Abs_multiset_inverse</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_680..685"><span>that</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_eq_iff|fact"><span class="entity_def" id="Multiset.multiset_eq_iff|thm"><span>multiset_eq_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count_inject|fact"><span>count_inject</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_eqI|fact"><span class="entity_def" id="Multiset.multiset_eqI|thm"><span>multiset_eqI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Preservation of the representing set </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="free"><span>multiset</span></span><span>›</span></span></span><span>.</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1078..1083">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_preserves_multiset|fact"><span class="entity_def" id="Multiset.diff_preserves_multiset|thm"><span>diff_preserves_multiset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_1078..1083"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.rev_finite_subset|fact"><span>rev_finite_subset</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1233..1238">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_preserves_multiset|fact"><span class="entity_def" id="Multiset.filter_preserves_multiset|thm"><span>filter_preserves_multiset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_1233..1238"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.rev_finite_subset|fact"><span>rev_finite_subset</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.in_multiset|fact"><span class="entity_def" id="Multiset.in_multiset(2)|thm"><span class="entity_def" id="Multiset.in_multiset(1)|thm"><span>in_multiset</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_preserves_multiset|fact"><span>diff_preserves_multiset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_preserves_multiset|fact"><span>filter_preserves_multiset</span></a><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Representing multisets</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Multiset enumeration</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.type|class"><span>type</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_comm_monoid_add|class"><span>cancel_comm_monoid_add</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.zero_multiset.rep_eq|fact"><span class="entity_def" id="Multiset.zero_multiset.abs_eq|fact"><span class="entity_def" id="Multiset.zero_multiset.transfer|fact"><span class="entity_def" id="Multiset.zero_multiset.rsp|fact"><span class="entity_def" id="Multiset.zero_multiset_def|fact"><span class="entity_def" id="Multiset.zero_multiset_inst.zero_multiset|fact"><span class="entity_def" id="Multiset.zero_multiset.rep_eq|thm"><span class="entity_def" id="Multiset.zero_multiset.abs_eq|thm"><span class="entity_def" id="Multiset.zero_multiset.transfer|thm"><span class="entity_def" id="Multiset.zero_multiset.rsp|thm"><span class="entity_def" id="Multiset.zero_multiset_def|thm"><span class="entity_def" id="Multiset.zero_multiset_inst.zero_multiset|thm"><span class="entity_def" id="Multiset.zero_multiset_def|axiom"><span class="entity_def" id="Multiset.zero_multiset_inst.zero_multiset_def|axiom"><span class="entity_def" id="Multiset.zero_multiset_inst.zero_multiset|const"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="class_parameter"><span>zero_multiset</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.empty_mset|const"><span>empty_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>›</span></span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>‹</span><span class="keyword1"><span>{#}</span></span><span>›</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>empty_mset</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.plus_multiset.rep_eq|fact"><span class="entity_def" id="Multiset.plus_multiset.abs_eq|fact"><span class="entity_def" id="Multiset.plus_multiset.transfer|fact"><span class="entity_def" id="Multiset.plus_multiset.rsp|fact"><span class="entity_def" id="Multiset.plus_multiset_def|fact"><span class="entity_def" id="Multiset.plus_multiset_inst.plus_multiset|fact"><span class="entity_def" id="Multiset.plus_multiset.rep_eq|thm"><span class="entity_def" id="Multiset.plus_multiset.abs_eq|thm"><span class="entity_def" id="Multiset.plus_multiset.transfer|thm"><span class="entity_def" id="Multiset.plus_multiset.rsp|thm"><span class="entity_def" id="Multiset.plus_multiset_def|thm"><span class="entity_def" id="Multiset.plus_multiset_inst.plus_multiset|thm"><span class="entity_def" id="Multiset.plus_multiset_def|axiom"><span class="entity_def" id="Multiset.plus_multiset_inst.plus_multiset_def|axiom"><span class="entity_def" id="Multiset.plus_multiset_inst.plus_multiset|const"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="class_parameter"><span>plus_multiset</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="bound"><span>a</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.minus_multiset.rep_eq|fact"><span class="entity_def" id="Multiset.minus_multiset.abs_eq|fact"><span class="entity_def" id="Multiset.minus_multiset.transfer|fact"><span class="entity_def" id="Multiset.minus_multiset.rsp|fact"><span class="entity_def" id="Multiset.minus_multiset_def|fact"><span class="entity_def" id="Multiset.minus_multiset_inst.minus_multiset|fact"><span class="entity_def" id="Multiset.minus_multiset.rep_eq|thm"><span class="entity_def" id="Multiset.minus_multiset.abs_eq|thm"><span class="entity_def" id="Multiset.minus_multiset.transfer|thm"><span class="entity_def" id="Multiset.minus_multiset.rsp|thm"><span class="entity_def" id="Multiset.minus_multiset_def|thm"><span class="entity_def" id="Multiset.minus_multiset_inst.minus_multiset|thm"><span class="entity_def" id="Multiset.minus_multiset_def|axiom"><span class="entity_def" id="Multiset.minus_multiset_inst.minus_multiset_def|axiom"><span class="entity_def" id="Multiset.minus_multiset_inst.minus_multiset|const"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="class_parameter"><span>minus_multiset</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="bound"><span>a</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_preserves_multiset|fact"><span>diff_preserves_multiset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.arity_cancel_comm_monoid_add_multiset|fact"><span class="entity_def" id="Multiset.arity_cancel_comm_monoid_add_multiset|thm"><span>instance</span></span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Transfer/transfer.ML.html#Transfer.transfer|method"><span class="operator"><span>transfer</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>qualified</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.is_empty_def|fact"><span class="entity_def" id="Multiset.is_empty_def|thm"><span class="entity_def" id="Multiset.is_empty_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.is_empty|const"><span>is_empty</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/Code/code_preproc.ML.html#Code_Generator.code_abbrev|attribute"><span class="operator"><span>code_abbrev</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_empty</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2191..2196">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_in_multiset|fact"><span class="entity_def" id="Multiset.add_mset_in_multiset|thm"><span>add_mset_in_multiset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_2191..2196"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_Collect|fact"><span>insert_Collect</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.add_mset.rep_eq|fact"><span class="entity_def" id="Multiset.add_mset.abs_eq|fact"><span class="entity_def" id="Multiset.add_mset.transfer|fact"><span class="entity_def" id="Multiset.add_mset.rsp|fact"><span class="entity_def" id="Multiset.add_mset_def|fact"><span class="entity_def" id="Multiset.add_mset.rep_eq|thm"><span class="entity_def" id="Multiset.add_mset.abs_eq|thm"><span class="entity_def" id="Multiset.add_mset.transfer|thm"><span class="entity_def" id="Multiset.add_mset.rsp|thm"><span class="entity_def" id="Multiset.add_mset_def|thm"><span class="entity_def" id="Multiset.add_mset_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset|const"><span>add_mset</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_in_multiset|fact"><span>add_mset_in_multiset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span>
  </span><span class="quoted"><span>"</span><span>_multiset</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>args</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>    </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>{#</span></span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>)</span></span><span class="keyword1"><span>#}</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>translations</span></span></span><span>
  </span><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>#}</span></span><span>"</span></span><span> </span><span class="main"><span>==</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>xs</span></span><span class="main"><span>#}</span></span><span>"</span></span><span>
  </span><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span>"</span></span><span> </span><span class="main"><span>==</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_empty|fact"><span class="entity_def" id="Multiset.count_empty|thm"><span>count_empty</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.zero_multiset.rep_eq|fact"><span>zero_multiset.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_add_mset|fact"><span class="entity_def" id="Multiset.count_add_mset|thm"><span>count_add_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset.rep_eq|fact"><span>add_mset.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_single|fact"><span class="entity_def" id="Multiset.count_single|thm"><span>count_single</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>{#</span></span><span class="free"><span>b</span></span><span class="main"><span>#}</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>
  </span><span class="entity_def" id="Multiset.add_mset_not_empty|fact"><span class="entity_def" id="Multiset.add_mset_not_empty|thm"><span>add_mset_not_empty</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="Multiset.empty_not_add_mset|fact"><span class="entity_def" id="Multiset.empty_not_add_mset|thm"><span>empty_not_add_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_add_mset_same_iff|fact"><span class="entity_def" id="Multiset.add_mset_add_mset_same_iff|thm"><span>add_mset_add_mset_same_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_commute|fact"><span class="entity_def" id="Multiset.add_mset_commute|thm"><span>add_mset_commute</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Basic operations</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Conversion to set and membership</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.set_mset_def|fact"><span class="entity_def" id="Multiset.set_mset_def|thm"><span class="entity_def" id="Multiset.set_mset_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.set_mset|const"><span>set_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>set_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.member_mset|const"><span>member_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>member_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>member_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>‹</span><span class="keyword1"><span>'(∈#')</span></span><span>›</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>member_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>‹</span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>∈#</span></span><span> </span><span>_</span><span class="keyword3"><span>)</span></span><span>›</span></span><span> </span><span class="main"><span>[</span></span><span>50</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>]</span></span><span> 50</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span>  </span><span class="main"><span>(</span></span><span>ASCII</span><span class="main"><span>)</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>member_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>‹</span><span class="keyword1"><span>'(:#')</span></span><span>›</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>member_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>‹</span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>:#</span></span><span> </span><span>_</span><span class="keyword3"><span>)</span></span><span>›</span></span><span> </span><span class="main"><span>[</span></span><span>50</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>]</span></span><span> 50</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.not_member_mset|const"><span>not_member_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>not_member_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>not_member_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>‹</span><span class="keyword1"><span>'(∉#')</span></span><span>›</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>not_member_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>‹</span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>∉#</span></span><span> </span><span>_</span><span class="keyword3"><span>)</span></span><span>›</span></span><span> </span><span class="main"><span>[</span></span><span>50</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>]</span></span><span> 50</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span>  </span><span class="main"><span>(</span></span><span>ASCII</span><span class="main"><span>)</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>not_member_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>‹</span><span class="keyword1"><span>'(~:#')</span></span><span>›</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>not_member_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>‹</span><span class="keyword3"><span>(</span></span><span>_</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>~:#</span></span><span> </span><span>_</span><span class="keyword3"><span>)</span></span><span>›</span></span><span> </span><span class="main"><span>[</span></span><span>50</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>]</span></span><span> 50</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>qualified</span></span></span><span> </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.Ball|const"><span>Ball</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Ball</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Ball|const"><span>Set.Ball</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>qualified</span></span></span><span> </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.Bex|const"><span>Bex</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Bex</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Bex|const"><span>Set.Bex</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span>
  </span><span class="quoted"><span>"</span><span>_MBall</span><span>"</span></span><span>       </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>pttrn</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>      </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(3</span></span><span class="keyword1"><span>∀</span></span><span>_</span><span class="keyword1"><span>∈#</span></span><span>_</span><span class="keyword1"><span>.</span></span><span class="keyword3"><span>/ </span></span><span>_</span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span> 0</span><span class="main"><span>,</span></span><span> 10</span><span class="main"><span>]</span></span><span> 10</span><span class="main"><span>)</span></span><span>
  </span><span class="quoted"><span>"</span><span>_MBex</span><span>"</span></span><span>        </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>pttrn</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>      </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(3</span></span><span class="keyword1"><span>∃</span></span><span>_</span><span class="keyword1"><span>∈#</span></span><span>_</span><span class="keyword1"><span>.</span></span><span class="keyword3"><span>/ </span></span><span>_</span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span> 0</span><span class="main"><span>,</span></span><span> 10</span><span class="main"><span>]</span></span><span> 10</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span>  </span><span class="main"><span>(</span></span><span>ASCII</span><span class="main"><span>)</span></span><span>
  </span><span class="quoted"><span>"</span><span>_MBall</span><span>"</span></span><span>       </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>pttrn</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>      </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(3</span></span><span class="keyword1"><span>∀</span></span><span>_</span><span class="keyword1"><span>:#</span></span><span>_</span><span class="keyword1"><span>.</span></span><span class="keyword3"><span>/ </span></span><span>_</span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span> 0</span><span class="main"><span>,</span></span><span> 10</span><span class="main"><span>]</span></span><span> 10</span><span class="main"><span>)</span></span><span>
  </span><span class="quoted"><span>"</span><span>_MBex</span><span>"</span></span><span>        </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>pttrn</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>      </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(3</span></span><span class="keyword1"><span>∃</span></span><span>_</span><span class="keyword1"><span>:#</span></span><span>_</span><span class="keyword1"><span>.</span></span><span class="keyword3"><span>/ </span></span><span>_</span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span> 0</span><span class="main"><span>,</span></span><span> 10</span><span class="main"><span>]</span></span><span> 10</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>translations</span></span></span><span>
  </span><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="free"><span>x</span></span><span class="main"><span>∈#</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span><span> </span><span class="main"><span>⇌</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Ball|const"><span>Multiset.Ball</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="free"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span>"</span></span><span>
  </span><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="free"><span>x</span></span><span class="main"><span>∈#</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span><span> </span><span class="main"><span>⇌</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Bex|const"><span>Multiset.Bex</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="free"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>print_translation</span></span></span><span> </span><span class="quoted"><span>‹</span><span>
 </span><span class="main"><span>[</span></span><span>Syntax_Trans.preserve_binder_abs2_tr'</span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_syntax</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Ball|const"><span>Multiset.Ball</span></a><span>›</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">syntax_const</span><span class="hidden">&gt;</span></span></span><span>‹_MBall›</span></span><span class="main"><span>,</span></span><span>
  </span><span>Syntax_Trans.preserve_binder_abs2_tr'</span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_syntax</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Bex|const"><span>Multiset.Bex</span></a><span>›</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">syntax_const</span><span class="hidden">&gt;</span></span></span><span>‹_MBex›</span></span><span class="main"><span>]</span></span><span>
</span><span>›</span></span><span> </span><span class="comment1"><span>― ‹</span><span>to avoid eta-contraction of body</span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_eq_zero_iff|fact"><span class="entity_def" id="Multiset.count_eq_zero_iff|thm"><span>count_eq_zero_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_def|fact"><span>set_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.not_in_iff|fact"><span class="entity_def" id="Multiset.not_in_iff|thm"><span>not_in_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_eq_zero_iff|fact"><span>count_eq_zero_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_greater_zero_iff|fact"><span class="entity_def" id="Multiset.count_greater_zero_iff|thm"><span>count_greater_zero_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_def|fact"><span>set_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5235..5240">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_inI|fact"><span class="entity_def" id="Multiset.count_inI|thm"><span>count_inI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ccontr|fact"><span>ccontr</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_5235..5240"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5396..5401">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_countE|fact"><span class="entity_def" id="Multiset.in_countE|thm"><span>in_countE</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_5396..5401"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.gr0_conv_Suc|fact"><span>gr0_conv_Suc</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_5396..5401"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="free"><span>thesis</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_greater_eq_Suc_zero_iff|fact"><span class="entity_def" id="Multiset.count_greater_eq_Suc_zero_iff|thm"><span>count_greater_eq_Suc_zero_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc_le_eq|fact"><span>Suc_le_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_greater_eq_one_iff|fact"><span class="entity_def" id="Multiset.count_greater_eq_one_iff|thm"><span>count_greater_eq_one_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_empty|fact"><span class="entity_def" id="Multiset.set_mset_empty|thm"><span>set_mset_empty</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_def|fact"><span>set_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_single|fact"><span class="entity_def" id="Multiset.set_mset_single|thm"><span>set_mset_single</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>{#</span></span><span class="free"><span>b</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>b</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_def|fact"><span>set_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_eq_empty_iff|fact"><span class="entity_def" id="Multiset.set_mset_eq_empty_iff|thm"><span>set_mset_eq_empty_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_eq_zero_iff|fact"><span>count_eq_zero_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.finite_set_mset|fact"><span class="entity_def" id="Multiset.finite_set_mset|thm"><span>finite_set_mset</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|fact"><span>count</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_add_mset_insert|fact"><span class="entity_def" id="Multiset.set_mset_add_mset_insert|thm"><span>set_mset_add_mset_insert</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_greater_eq_Suc_zero_iff|fact"><span>count_greater_eq_Suc_zero_iff</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6332..6337">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_nonemptyE|fact"><span class="entity_def" id="Multiset.multiset_nonemptyE|thm"><span>multiset_nonemptyE</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.elim|attribute"><span class="operator"><span>elim</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ccontr|fact"><span>ccontr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>insert</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_6332..6337"><span>assms</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_6332..6337"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Union</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_union|fact"><span class="entity_def" id="Multiset.count_union|thm"><span>count_union</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.plus_multiset.rep_eq|fact"><span>plus_multiset.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_union|fact"><span class="entity_def" id="Multiset.set_mset_union|thm"><span>set_mset_union</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_greater_zero_iff|fact"><span>count_greater_zero_iff</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_union|fact"><span>count_union</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_mset_add_mset_left|fact"><span class="entity_def" id="Multiset.union_mset_add_mset_left|thm"><span>union_mset_add_mset_left</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_mset_add_mset_right|fact"><span class="entity_def" id="Multiset.union_mset_add_mset_right|thm"><span>union_mset_add_mset_right</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_add_single|fact"><span class="entity_def" id="Multiset.add_mset_add_single|thm"><span>add_mset_add_single</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset_add_mset_right|fact"><span>union_mset_add_mset_right</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_add_class.add.comm_neutral|fact"><span>add.comm_neutral</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Difference</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.arity_comm_monoid_diff_multiset|fact"><span class="entity_def" id="Multiset.arity_comm_monoid_diff_multiset|thm"><span>instance</span></span></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.type|class"><span>type</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_diff|class"><span>comm_monoid_diff</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Transfer/transfer.ML.html#Transfer.transfer|method"><span class="operator"><span>transfer</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_diff|fact"><span class="entity_def" id="Multiset.count_diff|thm"><span>count_diff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.minus_multiset.rep_eq|fact"><span>minus_multiset.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_diff_bothsides|fact"><span class="entity_def" id="Multiset.add_mset_diff_bothsides|thm"><span>add_mset_diff_bothsides</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_diff_count|fact"><span class="entity_def" id="Multiset.in_diff_count|thm"><span>in_diff_count</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_def|fact"><span>set_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7596..7601">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_in_diffI|fact"><span class="entity_def" id="Multiset.count_in_diffI|thm"><span>count_in_diffI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ccontr|fact"><span>ccontr</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_diff_count|fact"><span>in_diff_count</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>not_less</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_7596..7601"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7872..7877">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_diff_countE|fact"><span class="entity_def" id="Multiset.in_diff_countE|thm"><span>in_diff_countE</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_7872..7877"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_diff_count|fact"><span>in_diff_count</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>n</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_iff_Suc_add|fact"><span>less_iff_Suc_add</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_7872..7877"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="free"><span>thesis</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8214..8219">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_diffD|fact"><span class="entity_def" id="Multiset.in_diffD|thm"><span>in_diffD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_8214..8219"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_diff_count|fact"><span>in_diff_count</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_diff|fact"><span class="entity_def" id="Multiset.set_mset_diff|thm"><span>set_mset_diff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_def|fact"><span>set_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_empty|fact"><span class="entity_def" id="Multiset.diff_empty|thm"><span>diff_empty</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_comm_monoid_add_class.diff_zero|fact"><span>Groups.diff_zero</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_diff_class.zero_diff|fact"><span>Groups.zero_diff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_cancel|fact"><span class="entity_def" id="Multiset.diff_cancel|thm"><span>diff_cancel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_comm_monoid_add_class.diff_cancel|fact"><span>Groups.diff_cancel</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_union_cancelR|fact"><span class="entity_def" id="Multiset.diff_union_cancelR|thm"><span>diff_union_cancelR</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.add_diff_cancel_right&apos;|fact"><span>add_diff_cancel_right'</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_union_cancelL|fact"><span class="entity_def" id="Multiset.diff_union_cancelL|thm"><span>diff_union_cancelL</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.add_diff_cancel_left&apos;|fact"><span>add_diff_cancel_left'</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_right_commute|fact"><span class="entity_def" id="Multiset.diff_right_commute|thm"><span>diff_right_commute</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.diff_right_commute|fact"><span>diff_right_commute</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_add|fact"><span class="entity_def" id="Multiset.diff_add|thm"><span>diff_add</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.sym|fact"><span>sym</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.diff_diff_add|fact"><span>diff_diff_add</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.insert_DiffM|fact"><span class="entity_def" id="Multiset.insert_DiffM|thm"><span>insert_DiffM</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.insert_DiffM2|fact"><span class="entity_def" id="Multiset.insert_DiffM2|thm"><span>insert_DiffM2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_union_swap|fact"><span class="entity_def" id="Multiset.diff_union_swap|thm"><span>diff_union_swap</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_add_mset_swap|fact"><span class="entity_def" id="Multiset.diff_add_mset_swap|thm"><span>diff_add_mset_swap</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_union_swap2|fact"><span class="entity_def" id="Multiset.diff_union_swap2|thm"><span>diff_union_swap2</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>y</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>y</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_diff_bothsides|fact"><span>add_mset_diff_bothsides</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_union_swap|fact"><span>diff_union_swap</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_comm_monoid_add_class.diff_zero|fact"><span>diff_zero</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.insert_DiffM|fact"><span>insert_DiffM</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_diff_add_mset|fact"><span class="entity_def" id="Multiset.diff_diff_add_mset|thm"><span>diff_diff_add_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.diff_diff_add|fact"><span>diff_diff_add</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_union_single_conv|fact"><span class="entity_def" id="Multiset.diff_union_single_conv|thm"><span>diff_union_single_conv</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>J</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc_le_eq|fact"><span>Suc_le_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9942..9947">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_add|fact"><span class="entity_def" id="Multiset.mset_add|thm"><span>mset_add</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.elim|attribute"><span class="operator"><span>elim</span></span></a><span class="main"><span class="main"><span class="main"><span class="main"><span>?</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_9942..9947"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_9942..9947"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="free"><span>thesis</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_iff|fact"><span class="entity_def" id="Multiset.union_iff|thm"><span>union_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Min and Max</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.Min_mset|const"><span>Min_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Min_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min|const"><span>Min</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.Max_mset|const"><span>Max_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
</span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Max_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max|const"><span>Max</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Equality of multisets</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.single_eq_single|fact"><span class="entity_def" id="Multiset.single_eq_single|thm"><span>single_eq_single</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>b</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_eq_empty|fact"><span class="entity_def" id="Multiset.union_eq_empty|thm"><span>union_eq_empty</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.empty_eq_union|fact"><span class="entity_def" id="Multiset.empty_eq_union|thm"><span>empty_eq_union</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multi_self_add_other_not_self|fact"><span class="entity_def" id="Multiset.multi_self_add_other_not_self|thm"><span>multi_self_add_other_not_self</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_remove_trivial|fact"><span class="entity_def" id="Multiset.add_mset_remove_trivial|thm"><span>add_mset_remove_trivial</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_single_trivial|fact"><span class="entity_def" id="Multiset.diff_single_trivial|thm"><span>diff_single_trivial</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_single_eq_union|fact"><span class="entity_def" id="Multiset.diff_single_eq_union|thm"><span>diff_single_eq_union</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_single_eq_diff|fact"><span class="entity_def" id="Multiset.union_single_eq_diff|thm"><span>union_single_eq_diff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_add_single|fact"><span>add_mset_add_single</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_comm_monoid_add_class.add_implies_diff|fact"><span>add_implies_diff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_single_eq_member|fact"><span class="entity_def" id="Multiset.union_single_eq_member|thm"><span>union_single_eq_member</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_remove_trivial_If|fact"><span class="entity_def" id="Multiset.add_mset_remove_trivial_If|thm"><span>add_mset_remove_trivial_If</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_single_trivial|fact"><span>diff_single_trivial</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_remove_trivial_eq|fact"><span class="entity_def" id="Multiset.add_mset_remove_trivial_eq|thm"><span>add_mset_remove_trivial_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_remove_trivial_If|fact"><span>add_mset_remove_trivial_If</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_is_single|fact"><span class="entity_def" id="Multiset.union_is_single|thm"><span>union_is_single</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?lhs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_11700..11704">show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?lhs</span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?rhs</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_11700..11704"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_11739..11743">show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?rhs</span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?lhs</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_cancel|fact"><span>Multiset.diff_cancel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.add_diff_cancel_left&apos;|fact"><span>add_diff_cancel_left'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_diff_class.diff_add_zero|fact"><span>diff_add_zero</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_single_trivial|fact"><span>diff_single_trivial</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.insert_DiffM|fact"><span>insert_DiffM</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_11739..11743"><span>that</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.single_is_union|fact"><span class="entity_def" id="Multiset.single_is_union|thm"><span>single_is_union</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq_commute|fact"><span>eq_commute</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_is_single|fact"><span>union_is_single</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_eq_conv_diff|fact"><span class="entity_def" id="Multiset.add_eq_conv_diff|thm"><span>add_eq_conv_diff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>b</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?lhs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="comment1"><span>(</span><span>*</span><span> shorter: by (simp add: multiset_eq_iff) fastforce </span><span>*</span><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_12253..12257">show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?lhs</span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?rhs</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_12253..12257"><span>that</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_commute|fact"><span>add_mset_commute</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span> </span><span class="quoted"><span class="free"><span>b</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?rhs</span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?lhs</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span> </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="var"><span>?lhs</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_12442..12447">False</span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="var"><span>?lhs</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_single_eq_member|fact"><span>union_single_eq_member</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_12442..12447"><span>False</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="var"><span>?lhs</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_single_eq_diff|fact"><span>union_single_eq_diff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_12442..12447"><span>False</span></a><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_right_commute|fact"><span>diff_right_commute</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_eq_single|fact"><span class="entity_def" id="Multiset.add_mset_eq_single|thm"><span>add_mset_eq_single</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_eq_conv_diff|fact"><span>add_eq_conv_diff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.single_eq_add_mset|fact"><span class="entity_def" id="Multiset.single_eq_add_mset|thm"><span>single_eq_add_mset</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_eq_conv_diff|fact"><span>add_eq_conv_diff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.insert_noteq_member|fact"><span class="entity_def" id="Multiset.insert_noteq_member|thm"><span>insert_noteq_member</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_13019..13021">BC</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span>
   </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_13060..13065">bnotc</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_13142..13144">nc</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>b</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_13060..13065"><span>bnotc</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_13019..13021"><span>BC</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_13142..13144"><span>nc</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_eq_conv_ex|fact"><span class="entity_def" id="Multiset.add_eq_conv_ex|thm"><span>add_eq_conv_ex</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>K</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="bound"><span>K</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_eq_conv_diff|fact"><span>add_eq_conv_diff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multi_member_split|fact"><span class="entity_def" id="Multiset.multi_member_split|thm"><span>multi_member_split</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>A</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="bound"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="free"><span class="free"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span></a></span></a></span><span> </span><span class="main"><span class="main"><span class="main"><span>{#</span></span></span></span><span class="free"><span class="free"><span class="free"><span>x</span></span></span></span><span class="main"><span class="main"><span class="main"><span>#}</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_add_sub_el_shuffle|fact"><span class="entity_def" id="Multiset.multiset_add_sub_el_shuffle|thm"><span>multiset_add_sub_el_shuffle</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>c</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>c</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>A</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_13704..13705">B</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multi_member_split|fact"><span>multi_member_split</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>c</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>c</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>c</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_13704..13705"><span>B</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_eq_singleton_iff|fact"><span class="entity_def" id="Multiset.add_mset_eq_singleton_iff|thm"><span>add_mset_eq_singleton_iff</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>y</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Pointwise ordering induced by count</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subseteq_mset_def|fact"><span class="entity_def" id="Multiset.subseteq_mset_def|thm"><span class="entity_def" id="Multiset.subseteq_mset_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.subseteq_mset|const"><span>subseteq_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>⊆#</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span class="free"><span>⊆#</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subset_mset_def|fact"><span class="entity_def" id="Multiset.subset_mset_def|thm"><span class="entity_def" id="Multiset.subset_mset_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.subset_mset|const"><span>subset_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>⊂#</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span class="free"><span>⊂#</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.supseteq_mset|const"><span>supseteq_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>⊇#</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>supseteq_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.supset_mset|const"><span>supset_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>⊃#</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>supset_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>subseteq_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>≤#</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.supseteq_mset|const"><span>supseteq_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>≥#</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><span class="main"><span>(</span></span><span>ASCII</span><span class="main"><span>)</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>subseteq_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>&lt;=#</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>subset_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>&lt;#</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.supseteq_mset|const"><span>supseteq_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>&gt;=#</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.supset_mset|const"><span>supset_mset</span></a><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>&gt;#</span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subset_mset.eq_iff|fact"><span class="entity_def" id="Multiset.subset_mset.order_iff_strict|fact"><span class="entity_def" id="Multiset.subset_mset.not_eq_order_implies_strict|fact"><span class="entity_def" id="Multiset.subset_mset.strict_implies_not_eq|fact"><span class="entity_def" id="Multiset.subset_mset.antisym|fact"><span class="entity_def" id="Multiset.subset_mset.strict_iff_order|fact"><span class="entity_def" id="Multiset.subset_mset.ordering_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.strict_trans|fact"><span class="entity_def" id="Multiset.subset_mset.strict_trans2|fact"><span class="entity_def" id="Multiset.subset_mset.strict_trans1|fact"><span class="entity_def" id="Multiset.subset_mset.asym|fact"><span class="entity_def" id="Multiset.subset_mset.irrefl|fact"><span class="entity_def" id="Multiset.subset_mset.strict_implies_order|fact"><span class="entity_def" id="Multiset.subset_mset.strict_iff_not|fact"><span class="entity_def" id="Multiset.subset_mset.preordering_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.trans|fact"><span class="entity_def" id="Multiset.subset_mset.refl|fact"><span class="entity_def" id="Multiset.subset_mset.partial_preordering_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.eq_iff|thm"><span class="entity_def" id="Multiset.subset_mset.order_iff_strict|thm"><span class="entity_def" id="Multiset.subset_mset.not_eq_order_implies_strict|thm"><span class="entity_def" id="Multiset.subset_mset.strict_implies_not_eq|thm"><span class="entity_def" id="Multiset.subset_mset.strict_iff_order|thm"><span class="entity_def" id="Multiset.subset_mset.strict_trans|thm"><span class="entity_def" id="Multiset.subset_mset.strict_trans2|thm"><span class="entity_def" id="Multiset.subset_mset.strict_trans1|thm"><span class="entity_def" id="Multiset.subset_mset.asym|thm"><span class="entity_def" id="Multiset.subset_mset.irrefl|thm"><span class="entity_def" id="Multiset.subset_mset.strict_implies_order|thm"><span class="entity_def" id="Multiset.subset_mset.strict_iff_not|thm"><span class="entity_def" id="Multiset.subset_mset.trans|thm"><span class="entity_def" id="Multiset.subset_mset.refl|thm"><span class="entity_def" id="Multiset.subset_mset.antisym|thm"><span class="entity_def" id="Multiset.subset_mset.ordering_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.preordering_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.partial_preordering_axioms|thm"><span>global_interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> subset_mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ordering|locale"><span>ordering</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>(⊆#)</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>(⊂#)</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order.trans|fact"><span>order.trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.order.antisym|fact"><span>order.antisym</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subset_mset.min_add_distrib_right|fact"><span class="entity_def" id="Multiset.subset_mset.max_add_distrib_right|fact"><span class="entity_def" id="Multiset.subset_mset.min_add_distrib_left|fact"><span class="entity_def" id="Multiset.subset_mset.max_add_distrib_left|fact"><span class="entity_def" id="Multiset.subset_mset.add_le_imp_le_right|fact"><span class="entity_def" id="Multiset.subset_mset.add_le_cancel_right|fact"><span class="entity_def" id="Multiset.subset_mset.add_le_cancel_left|fact"><span class="entity_def" id="Multiset.subset_mset.add_less_cancel_right|fact"><span class="entity_def" id="Multiset.subset_mset.add_less_cancel_left|fact"><span class="entity_def" id="Multiset.subset_mset.add_less_imp_less_right|fact"><span class="entity_def" id="Multiset.subset_mset.add_less_imp_less_left|fact"><span class="entity_def" id="Multiset.subset_mset.add_le_imp_le_left|fact"><span class="entity_def" id="Multiset.subset_mset.ordered_ab_semigroup_add_imp_le_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.add_le_less_mono|fact"><span class="entity_def" id="Multiset.subset_mset.add_less_le_mono|fact"><span class="entity_def" id="Multiset.subset_mset.add_strict_right_mono|fact"><span class="entity_def" id="Multiset.subset_mset.add_strict_left_mono|fact"><span class="entity_def" id="Multiset.subset_mset.ordered_cancel_ab_semigroup_add_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.add_strict_mono|fact"><span class="entity_def" id="Multiset.subset_mset.strict_ordered_ab_semigroup_add_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.add_mono|fact"><span class="entity_def" id="Multiset.subset_mset.add_right_mono|fact"><span class="entity_def" id="Multiset.subset_mset.add_left_mono|fact"><span class="entity_def" id="Multiset.subset_mset.ordered_ab_semigroup_add_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_irreflexive&apos;|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_antisym|fact"><span class="entity_def" id="Multiset.subset_mset.Iio_Int_singleton|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost_singleton_iff|fact"><span class="entity_def" id="Multiset.subset_mset.Icc_eq_Icc|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost_singleton&apos;|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost_singleton|fact"><span class="entity_def" id="Multiset.subset_mset.greaterThanLessThan_empty|fact"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost_empty|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan_empty|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastatMost_empty|fact"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost_eq_atLeastAtMost_diff|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan_eq_atLeastAtMost_diff|fact"><span class="entity_def" id="Multiset.subset_mset.finite_has_minimal2|fact"><span class="entity_def" id="Multiset.subset_mset.finite_has_minimal|fact"><span class="entity_def" id="Multiset.subset_mset.finite_has_maximal2|fact"><span class="entity_def" id="Multiset.subset_mset.finite_has_maximal|fact"><span class="entity_def" id="Multiset.subset_mset.lift_Suc_mono_less_iff|fact"><span class="entity_def" id="Multiset.subset_mset.lift_Suc_mono_less|fact"><span class="entity_def" id="Multiset.subset_mset.lift_Suc_antimono_le|fact"><span class="entity_def" id="Multiset.subset_mset.lift_Suc_mono_le|fact"><span class="entity_def" id="Multiset.subset_mset.strict_mono_mono|fact"><span class="entity_def" id="Multiset.subset_mset.mono_imp_mono_on|fact"><span class="entity_def" id="Multiset.subset_mset.antimonoE|fact"><span class="entity_def" id="Multiset.subset_mset.monoE|fact"><span class="entity_def" id="Multiset.subset_mset.antimonoD|fact"><span class="entity_def" id="Multiset.subset_mset.strict_monoD|fact"><span class="entity_def" id="Multiset.subset_mset.monoD|fact"><span class="entity_def" id="Multiset.subset_mset.antimonoI|fact"><span class="entity_def" id="Multiset.subset_mset.strict_monoI|fact"><span class="entity_def" id="Multiset.subset_mset.monoI|fact"><span class="entity_def" id="Multiset.subset_mset.antimono_def|fact"><span class="entity_def" id="Multiset.subset_mset.strict_mono_def|fact"><span class="entity_def" id="Multiset.subset_mset.mono_def|fact"><span class="entity_def" id="Multiset.subset_mset.nless_le|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order|fact"><span class="entity_def" id="Multiset.subset_mset.Greatest_equality|fact"><span class="entity_def" id="Multiset.subset_mset.GreatestI2_order|fact"><span class="entity_def" id="Multiset.subset_mset.Greatest_def|fact"><span class="entity_def" id="Multiset.subset_mset.Least_ex1|fact"><span class="entity_def" id="Multiset.subset_mset.Least1_le|fact"><span class="entity_def" id="Multiset.subset_mset.Least1I|fact"><span class="entity_def" id="Multiset.subset_mset.LeastI2_order|fact"><span class="entity_def" id="Multiset.subset_mset.Least_equality|fact"><span class="entity_def" id="Multiset.subset_mset.leD|fact"><span class="entity_def" id="Multiset.subset_mset.antisym_conv2|fact"><span class="entity_def" id="Multiset.subset_mset.antisym_conv1|fact"><span class="entity_def" id="Multiset.subset_mset.less_imp_neq|fact"><span class="entity_def" id="Multiset.subset_mset.antisym_conv|fact"><span class="entity_def" id="Multiset.subset_mset.order_eq_iff|fact"><span class="entity_def" id="Multiset.subset_mset.le_neq_trans|fact"><span class="entity_def" id="Multiset.subset_mset.neq_le_trans|fact"><span class="entity_def" id="Multiset.subset_mset.less_imp_not_eq2|fact"><span class="entity_def" id="Multiset.subset_mset.less_imp_not_eq|fact"><span class="entity_def" id="Multiset.subset_mset.le_imp_less_or_eq|fact"><span class="entity_def" id="Multiset.subset_mset.le_less|fact"><span class="entity_def" id="Multiset.subset_mset.less_le|fact"><span class="entity_def" id="Multiset.subset_mset.order_antisym|fact"><span class="entity_def" id="Multiset.subset_mset.order_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.eq_iff|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.order_iff_strict|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.not_eq_order_implies_strict|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_implies_not_eq|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.antisym|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_iff_order|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.ordering_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Ici|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Icc|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Ico|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Ioi|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Ioc|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Ioo|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Iic|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Icc|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Ioc|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Iio|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Ico|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Ioo|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Int2|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Int1|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Int2|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Int1|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_mono|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_mono|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_empty|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_empty|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_belowI2|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_aboveI2|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_belowI|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_aboveI|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_def|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_def|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_primitive_def|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_primitive_def|fact"><span class="entity_def" id="Multiset.subset_mset.not_empty_eq_Iic_eq_empty|fact"><span class="entity_def" id="Multiset.subset_mset.not_empty_eq_Ici_eq_empty|fact"><span class="entity_def" id="Multiset.subset_mset.not_Iic_eq_empty|fact"><span class="entity_def" id="Multiset.subset_mset.not_Ici_eq_empty|fact"><span class="entity_def" id="Multiset.subset_mset.Icc_subset_Iic_iff|fact"><span class="entity_def" id="Multiset.subset_mset.Icc_subset_Ici_iff|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost_subseteq_atLeastLessThan_iff|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastatMost_psubset_iff|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastatMost_subset_iff|fact"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost_empty_iff2|fact"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost_empty_iff|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan_empty_iff2|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan_empty_iff|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastatMost_empty_iff2|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastatMost_empty_iff|fact"><span class="entity_def" id="Multiset.subset_mset.Ioi_le_Ico|fact"><span class="entity_def" id="Multiset.subset_mset.acyclicI_order|fact"><span class="entity_def" id="Multiset.subset_mset.transp_gr|fact"><span class="entity_def" id="Multiset.subset_mset.transp_ge|fact"><span class="entity_def" id="Multiset.subset_mset.transp_less|fact"><span class="entity_def" id="Multiset.subset_mset.transp_le|fact"><span class="entity_def" id="Multiset.subset_mset.asymp_greater|fact"><span class="entity_def" id="Multiset.subset_mset.asymp_less|fact"><span class="entity_def" id="Multiset.subset_mset.irreflp_greater|fact"><span class="entity_def" id="Multiset.subset_mset.irreflp_less|fact"><span class="entity_def" id="Multiset.subset_mset.dual_preorder|fact"><span class="entity_def" id="Multiset.subset_mset.less_asym&apos;|fact"><span class="entity_def" id="Multiset.subset_mset.less_imp_triv|fact"><span class="entity_def" id="Multiset.subset_mset.less_imp_not_less|fact"><span class="entity_def" id="Multiset.subset_mset.less_le_trans|fact"><span class="entity_def" id="Multiset.subset_mset.le_less_trans|fact"><span class="entity_def" id="Multiset.subset_mset.less_trans|fact"><span class="entity_def" id="Multiset.subset_mset.less_asym|fact"><span class="entity_def" id="Multiset.subset_mset.less_not_sym|fact"><span class="entity_def" id="Multiset.subset_mset.less_imp_le|fact"><span class="entity_def" id="Multiset.subset_mset.less_irrefl|fact"><span class="entity_def" id="Multiset.subset_mset.eq_refl|fact"><span class="entity_def" id="Multiset.subset_mset.order_trans|fact"><span class="entity_def" id="Multiset.subset_mset.order_refl|fact"><span class="entity_def" id="Multiset.subset_mset.less_le_not_le|fact"><span class="entity_def" id="Multiset.subset_mset.preorder_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below.Int2|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below.Int1|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below.mono|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below.I2|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below.E|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below.I|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below.empty|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below.unfold|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below.preordering_bdd_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above.Int2|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above.Int1|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above.mono|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above.I2|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above.E|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above.I|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above.empty|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above.unfold|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above.preordering_bdd_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_trans|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_trans2|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_trans1|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.asym|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.irrefl|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_implies_order|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_iff_not|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.preordering_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.trans|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.refl|fact"><span class="entity_def" id="Multiset.subset_mset.dual_order.partial_preordering_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq_pref|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_into_lexordp_eq|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_irreflexive|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_append_leftD|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_append_leftI|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq_refl|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_append_left_rightI|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_append_rightI|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq_simps|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.inducts|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.simps|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.induct|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.cases|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.intros|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.Cons_eq|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.Cons|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.Nil|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_simps|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp.inducts|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp.simps|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp.induct|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp.cases|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp.intros|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp.Cons_eq|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp.Cons|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp.Nil|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp.mono|fact"><span class="entity_def" id="Multiset.subset_mset.lexordp_def|fact"><span class="entity_def" id="Multiset.subset_mset.greaterThanLessThan_eq|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost_iff|fact"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost_iff|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan_iff|fact"><span class="entity_def" id="Multiset.subset_mset.greaterThanLessThan_iff|fact"><span class="entity_def" id="Multiset.subset_mset.atMost_iff|fact"><span class="entity_def" id="Multiset.subset_mset.atLeast_iff|fact"><span class="entity_def" id="Multiset.subset_mset.greaterThan_iff|fact"><span class="entity_def" id="Multiset.subset_mset.lessThan_iff|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost_def|fact"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost_def|fact"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan_def|fact"><span class="entity_def" id="Multiset.subset_mset.greaterThanLessThan_def|fact"><span class="entity_def" id="Multiset.subset_mset.atLeast_def|fact"><span class="entity_def" id="Multiset.subset_mset.greaterThan_def|fact"><span class="entity_def" id="Multiset.subset_mset.atMost_def|fact"><span class="entity_def" id="Multiset.subset_mset.lessThan_def|fact"><span class="entity_def" id="Multiset.subset_mset.arg_max_on_def|fact"><span class="entity_def" id="Multiset.subset_mset.arg_max_def|fact"><span class="entity_def" id="Multiset.subset_mset.is_arg_max_def|fact"><span class="entity_def" id="Multiset.subset_mset.arg_min_on_def|fact"><span class="entity_def" id="Multiset.subset_mset.arg_min_def|fact"><span class="entity_def" id="Multiset.subset_mset.is_arg_min_def|fact"><span class="entity_def" id="Multiset.subset_mset.mono_on_subset|fact"><span class="entity_def" id="Multiset.subset_mset.strict_mono_onD|fact"><span class="entity_def" id="Multiset.subset_mset.mono_onD|fact"><span class="entity_def" id="Multiset.subset_mset.strict_mono_onI|fact"><span class="entity_def" id="Multiset.subset_mset.mono_onI|fact"><span class="entity_def" id="Multiset.subset_mset.strict_mono_on_def|fact"><span class="entity_def" id="Multiset.subset_mset.mono_on_def|fact"><span class="entity_def" id="Multiset.subset_mset.max_def|fact"><span class="entity_def" id="Multiset.subset_mset.min_def|fact"><span class="entity_def" id="Multiset.subset_mset.ord_eq_less_trans|fact"><span class="entity_def" id="Multiset.subset_mset.ord_less_eq_trans|fact"><span class="entity_def" id="Multiset.subset_mset.ord_eq_le_trans|fact"><span class="entity_def" id="Multiset.subset_mset.ord_le_eq_trans|fact"><span class="entity_def" id="Multiset.subset_mset.Least_def|fact"><span class="entity_def" id="Multiset.subset_mset.min_add_distrib_right|thm"><span class="entity_def" id="Multiset.subset_mset.max_add_distrib_right|thm"><span class="entity_def" id="Multiset.subset_mset.min_add_distrib_left|thm"><span class="entity_def" id="Multiset.subset_mset.max_add_distrib_left|thm"><span class="entity_def" id="Multiset.subset_mset.add_le_imp_le_right|thm"><span class="entity_def" id="Multiset.subset_mset.add_less_imp_less_right|thm"><span class="entity_def" id="Multiset.subset_mset.add_less_imp_less_left|thm"><span class="entity_def" id="Multiset.subset_mset.add_le_imp_le_left|thm"><span class="entity_def" id="Multiset.subset_mset.add_le_less_mono|thm"><span class="entity_def" id="Multiset.subset_mset.add_less_le_mono|thm"><span class="entity_def" id="Multiset.subset_mset.add_strict_right_mono|thm"><span class="entity_def" id="Multiset.subset_mset.add_strict_left_mono|thm"><span class="entity_def" id="Multiset.subset_mset.add_strict_mono|thm"><span class="entity_def" id="Multiset.subset_mset.add_right_mono|thm"><span class="entity_def" id="Multiset.subset_mset.add_left_mono|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_irreflexive&apos;|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_antisym|thm"><span class="entity_def" id="Multiset.subset_mset.Iio_Int_singleton|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost_singleton&apos;|thm"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost_eq_atLeastAtMost_diff|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan_eq_atLeastAtMost_diff|thm"><span class="entity_def" id="Multiset.subset_mset.finite_has_minimal2|thm"><span class="entity_def" id="Multiset.subset_mset.finite_has_minimal|thm"><span class="entity_def" id="Multiset.subset_mset.finite_has_maximal2|thm"><span class="entity_def" id="Multiset.subset_mset.finite_has_maximal|thm"><span class="entity_def" id="Multiset.subset_mset.lift_Suc_mono_less_iff|thm"><span class="entity_def" id="Multiset.subset_mset.lift_Suc_mono_less|thm"><span class="entity_def" id="Multiset.subset_mset.lift_Suc_antimono_le|thm"><span class="entity_def" id="Multiset.subset_mset.lift_Suc_mono_le|thm"><span class="entity_def" id="Multiset.subset_mset.mono_imp_mono_on|thm"><span class="entity_def" id="Multiset.subset_mset.nless_le|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order|thm"><span class="entity_def" id="Multiset.subset_mset.Greatest_equality|thm"><span class="entity_def" id="Multiset.subset_mset.GreatestI2_order|thm"><span class="entity_def" id="Multiset.subset_mset.Greatest_def|thm"><span class="entity_def" id="Multiset.subset_mset.Least_ex1(2)|thm"><span class="entity_def" id="Multiset.subset_mset.Least_ex1(1)|thm"><span class="entity_def" id="Multiset.subset_mset.Least1_le|thm"><span class="entity_def" id="Multiset.subset_mset.Least1I|thm"><span class="entity_def" id="Multiset.subset_mset.LeastI2_order|thm"><span class="entity_def" id="Multiset.subset_mset.Least_equality|thm"><span class="entity_def" id="Multiset.subset_mset.leD|thm"><span class="entity_def" id="Multiset.subset_mset.antisym_conv2|thm"><span class="entity_def" id="Multiset.subset_mset.antisym_conv1|thm"><span class="entity_def" id="Multiset.subset_mset.less_imp_neq|thm"><span class="entity_def" id="Multiset.subset_mset.antisym_conv|thm"><span class="entity_def" id="Multiset.subset_mset.order_eq_iff|thm"><span class="entity_def" id="Multiset.subset_mset.le_neq_trans|thm"><span class="entity_def" id="Multiset.subset_mset.neq_le_trans|thm"><span class="entity_def" id="Multiset.subset_mset.less_imp_not_eq2|thm"><span class="entity_def" id="Multiset.subset_mset.less_imp_not_eq|thm"><span class="entity_def" id="Multiset.subset_mset.le_imp_less_or_eq|thm"><span class="entity_def" id="Multiset.subset_mset.le_less|thm"><span class="entity_def" id="Multiset.subset_mset.less_le|thm"><span class="entity_def" id="Multiset.subset_mset.order_antisym|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.eq_iff|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.order_iff_strict|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.not_eq_order_implies_strict|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_implies_not_eq|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.antisym|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_iff_order|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Int2|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Int1|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Int2|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Int1|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_mono|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_mono|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_empty|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_empty|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_belowI2|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_aboveI2|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_belowI|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_aboveI|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_def|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_def|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_primitive_def|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_primitive_def|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost_subseteq_atLeastLessThan_iff|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastatMost_psubset_iff|thm"><span class="entity_def" id="Multiset.subset_mset.Ioi_le_Ico|thm"><span class="entity_def" id="Multiset.subset_mset.acyclicI_order|thm"><span class="entity_def" id="Multiset.subset_mset.dual_preorder|thm"><span class="entity_def" id="Multiset.subset_mset.less_asym&apos;|thm"><span class="entity_def" id="Multiset.subset_mset.less_imp_triv|thm"><span class="entity_def" id="Multiset.subset_mset.less_imp_not_less|thm"><span class="entity_def" id="Multiset.subset_mset.less_le_trans|thm"><span class="entity_def" id="Multiset.subset_mset.le_less_trans|thm"><span class="entity_def" id="Multiset.subset_mset.less_asym|thm"><span class="entity_def" id="Multiset.subset_mset.less_not_sym|thm"><span class="entity_def" id="Multiset.subset_mset.less_imp_le|thm"><span class="entity_def" id="Multiset.subset_mset.eq_refl|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below.mono|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below.I2|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below.unfold|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above.mono|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above.I2|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above.unfold|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_trans|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_trans2|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_trans1|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.asym|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.irrefl|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_implies_order|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.strict_iff_not|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.trans|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.refl|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq_pref|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_into_lexordp_eq|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_irreflexive|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_append_leftD|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_append_leftI|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq_refl|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_append_left_rightI|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_append_rightI|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.intros(3)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.intros(2)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.intros(1)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp.intros(3)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp.intros(2)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp.intros(1)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp.mono|thm"><span class="entity_def" id="Multiset.subset_mset.greaterThanLessThan_eq|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost_def|thm"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost_def|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan_def|thm"><span class="entity_def" id="Multiset.subset_mset.greaterThanLessThan_def|thm"><span class="entity_def" id="Multiset.subset_mset.atLeast_def|thm"><span class="entity_def" id="Multiset.subset_mset.greaterThan_def|thm"><span class="entity_def" id="Multiset.subset_mset.atMost_def|thm"><span class="entity_def" id="Multiset.subset_mset.lessThan_def|thm"><span class="entity_def" id="Multiset.subset_mset.arg_max_on_def|thm"><span class="entity_def" id="Multiset.subset_mset.arg_max_def|thm"><span class="entity_def" id="Multiset.subset_mset.is_arg_max_def|thm"><span class="entity_def" id="Multiset.subset_mset.arg_min_on_def|thm"><span class="entity_def" id="Multiset.subset_mset.arg_min_def|thm"><span class="entity_def" id="Multiset.subset_mset.is_arg_min_def|thm"><span class="entity_def" id="Multiset.subset_mset.mono_on_subset|thm"><span class="entity_def" id="Multiset.subset_mset.strict_mono_onD|thm"><span class="entity_def" id="Multiset.subset_mset.mono_onD|thm"><span class="entity_def" id="Multiset.subset_mset.strict_mono_onI|thm"><span class="entity_def" id="Multiset.subset_mset.mono_onI|thm"><span class="entity_def" id="Multiset.subset_mset.max_def|thm"><span class="entity_def" id="Multiset.subset_mset.min_def|thm"><span class="entity_def" id="Multiset.subset_mset.ord_eq_less_trans|thm"><span class="entity_def" id="Multiset.subset_mset.ord_less_eq_trans|thm"><span class="entity_def" id="Multiset.subset_mset.ord_eq_le_trans|thm"><span class="entity_def" id="Multiset.subset_mset.ord_le_eq_trans|thm"><span class="entity_def" id="Multiset.subset_mset.Least_def|thm"><span class="entity_def" id="Multiset.subset_mset.less_trans|thm"><span class="entity_def" id="Multiset.subset_mset.order_trans|thm"><span class="entity_def" id="Multiset.subset_mset.less_le_not_le|thm"><span class="entity_def" id="Multiset.subset_mset.add_mono|thm"><span class="entity_def" id="Multiset.subset_mset.add_le_cancel_right|thm"><span class="entity_def" id="Multiset.subset_mset.add_le_cancel_left|thm"><span class="entity_def" id="Multiset.subset_mset.add_less_cancel_right|thm"><span class="entity_def" id="Multiset.subset_mset.add_less_cancel_left|thm"><span class="entity_def" id="Multiset.subset_mset.ordered_ab_semigroup_add_imp_le_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.ordered_cancel_ab_semigroup_add_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.strict_ordered_ab_semigroup_add_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.ordered_ab_semigroup_add_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost_singleton_iff|thm"><span class="entity_def" id="Multiset.subset_mset.Icc_eq_Icc|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost_singleton|thm"><span class="entity_def" id="Multiset.subset_mset.greaterThanLessThan_empty|thm"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost_empty|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan_empty|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastatMost_empty|thm"><span class="entity_def" id="Multiset.subset_mset.strict_mono_mono|thm"><span class="entity_def" id="Multiset.subset_mset.antimonoE|thm"><span class="entity_def" id="Multiset.subset_mset.monoE|thm"><span class="entity_def" id="Multiset.subset_mset.antimonoD|thm"><span class="entity_def" id="Multiset.subset_mset.strict_monoD|thm"><span class="entity_def" id="Multiset.subset_mset.monoD|thm"><span class="entity_def" id="Multiset.subset_mset.antimonoI|thm"><span class="entity_def" id="Multiset.subset_mset.strict_monoI|thm"><span class="entity_def" id="Multiset.subset_mset.monoI|thm"><span class="entity_def" id="Multiset.subset_mset.antimono_def|thm"><span class="entity_def" id="Multiset.subset_mset.strict_mono_def|thm"><span class="entity_def" id="Multiset.subset_mset.mono_def|thm"><span class="entity_def" id="Multiset.subset_mset.order_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.ordering_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Ici|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Icc|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Ico|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Ioi|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Ioc|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Ioo|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Iic|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Icc|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Ioc|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Iio|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Ico|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Ioo|thm"><span class="entity_def" id="Multiset.subset_mset.not_empty_eq_Iic_eq_empty|thm"><span class="entity_def" id="Multiset.subset_mset.not_empty_eq_Ici_eq_empty|thm"><span class="entity_def" id="Multiset.subset_mset.not_Iic_eq_empty|thm"><span class="entity_def" id="Multiset.subset_mset.not_Ici_eq_empty|thm"><span class="entity_def" id="Multiset.subset_mset.Icc_subset_Iic_iff|thm"><span class="entity_def" id="Multiset.subset_mset.Icc_subset_Ici_iff|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastatMost_subset_iff|thm"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost_empty_iff2|thm"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost_empty_iff|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan_empty_iff2|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan_empty_iff|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastatMost_empty_iff2|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastatMost_empty_iff|thm"><span class="entity_def" id="Multiset.subset_mset.transp_gr|thm"><span class="entity_def" id="Multiset.subset_mset.transp_ge|thm"><span class="entity_def" id="Multiset.subset_mset.transp_less|thm"><span class="entity_def" id="Multiset.subset_mset.transp_le|thm"><span class="entity_def" id="Multiset.subset_mset.asymp_greater|thm"><span class="entity_def" id="Multiset.subset_mset.asymp_less|thm"><span class="entity_def" id="Multiset.subset_mset.irreflp_greater|thm"><span class="entity_def" id="Multiset.subset_mset.irreflp_less|thm"><span class="entity_def" id="Multiset.subset_mset.less_irrefl|thm"><span class="entity_def" id="Multiset.subset_mset.order_refl|thm"><span class="entity_def" id="Multiset.subset_mset.preorder_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below.Int2|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below.Int1|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below.E|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below.I|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below.empty|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below.preordering_bdd_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above.Int2|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above.Int1|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above.E|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above.I|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above.empty|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above.preordering_bdd_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.preordering_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.dual_order.partial_preordering_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq_simps(4)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq_simps(3)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq_simps(2)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq_simps(1)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.inducts|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.simps|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.induct|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.cases|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.Cons_eq|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.Cons|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq.Nil|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_simps(3)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_simps(2)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_simps(1)|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp.inducts|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp.simps|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp.induct|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp.cases|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp.Cons_eq|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp.Cons|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp.Nil|thm"><span class="entity_def" id="Multiset.subset_mset.lexordp_def|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost_iff|thm"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost_iff|thm"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan_iff|thm"><span class="entity_def" id="Multiset.subset_mset.greaterThanLessThan_iff|thm"><span class="entity_def" id="Multiset.subset_mset.atMost_iff|thm"><span class="entity_def" id="Multiset.subset_mset.atLeast_iff|thm"><span class="entity_def" id="Multiset.subset_mset.greaterThan_iff|thm"><span class="entity_def" id="Multiset.subset_mset.lessThan_iff|thm"><span class="entity_def" id="Multiset.subset_mset.strict_mono_on_def|thm"><span class="entity_def" id="Multiset.subset_mset.mono_on_def|thm"><span class="entity_def" id="Multiset.subset_mset.antimono|const"><span class="entity_def" id="Multiset.subset_mset.strict_mono|const"><span class="entity_def" id="Multiset.subset_mset.mono|const"><span class="entity_def" id="Multiset.subset_mset.Greatest|const"><span class="entity_def" id="Multiset.subset_mset.bdd_below|const"><span class="entity_def" id="Multiset.subset_mset.bdd_above|const"><span class="entity_def" id="Multiset.subset_mset.bdd_below.bdd|const"><span class="entity_def" id="Multiset.subset_mset.bdd_above.bdd|const"><span class="entity_def" id="Multiset.subset_mset.lexordp_eq|const"><span class="entity_def" id="Multiset.subset_mset.lexordp|const"><span class="entity_def" id="Multiset.subset_mset.atLeastAtMost|const"><span class="entity_def" id="Multiset.subset_mset.greaterThanAtMost|const"><span class="entity_def" id="Multiset.subset_mset.atLeastLessThan|const"><span class="entity_def" id="Multiset.subset_mset.greaterThanLessThan|const"><span class="entity_def" id="Multiset.subset_mset.atLeast|const"><span class="entity_def" id="Multiset.subset_mset.greaterThan|const"><span class="entity_def" id="Multiset.subset_mset.atMost|const"><span class="entity_def" id="Multiset.subset_mset.lessThan|const"><span class="entity_def" id="Multiset.subset_mset.arg_max_on|const"><span class="entity_def" id="Multiset.subset_mset.arg_max|const"><span class="entity_def" id="Multiset.subset_mset.is_arg_max|const"><span class="entity_def" id="Multiset.subset_mset.arg_min_on|const"><span class="entity_def" id="Multiset.subset_mset.arg_min|const"><span class="entity_def" id="Multiset.subset_mset.is_arg_min|const"><span class="entity_def" id="Multiset.subset_mset.strict_mono_on|const"><span class="entity_def" id="Multiset.subset_mset.mono_on|const"><span class="entity_def" id="Multiset.subset_mset.max|const"><span class="entity_def" id="Multiset.subset_mset.min|const"><span class="entity_def" id="Multiset.subset_mset.Least|const"><span class="entity_def" id="Multiset.subset_mset.greater|const"><span class="entity_def" id="Multiset.subset_mset.greater_eq|const"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> subset_mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_imp_le|locale"><span>ordered_ab_semigroup_add_imp_le</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>(+)</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>(-)</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>(⊆#)</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>(⊂#)</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.antisym|fact"><span>antisym</span></a><span class="main"><span>)</span></span><span>
    </span><span class="comment1"><span>― ‹</span><span>FIXME: avoid junk stemming from type class interpretation</span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subset_mset.le_add_same_cancel2|fact"><span class="entity_def" id="Multiset.subset_mset.le_add_same_cancel1|fact"><span class="entity_def" id="Multiset.subset_mset.add_le_same_cancel2|fact"><span class="entity_def" id="Multiset.subset_mset.add_le_same_cancel1|fact"><span class="entity_def" id="Multiset.subset_mset.less_add_same_cancel2|fact"><span class="entity_def" id="Multiset.subset_mset.less_add_same_cancel1|fact"><span class="entity_def" id="Multiset.subset_mset.add_less_same_cancel2|fact"><span class="entity_def" id="Multiset.subset_mset.add_less_same_cancel1|fact"><span class="entity_def" id="Multiset.subset_mset.ordered_ab_semigroup_monoid_add_imp_le_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.add_strict_increasing2|fact"><span class="entity_def" id="Multiset.subset_mset.add_strict_increasing|fact"><span class="entity_def" id="Multiset.subset_mset.ordered_cancel_comm_monoid_add_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.sum_strict_mono|fact"><span class="entity_def" id="Multiset.subset_mset.pos_add_strict|fact"><span class="entity_def" id="Multiset.subset_mset.strict_ordered_comm_monoid_add_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.sum_list_nonneg_eq_0_iff|fact"><span class="entity_def" id="Multiset.subset_mset.sum_list_nonpos|fact"><span class="entity_def" id="Multiset.subset_mset.sum_list_nonneg|fact"><span class="entity_def" id="Multiset.subset_mset.sum_pos2|fact"><span class="entity_def" id="Multiset.subset_mset.sum_pos|fact"><span class="entity_def" id="Multiset.subset_mset.sum_le_included|fact"><span class="entity_def" id="Multiset.subset_mset.sum_mono2|fact"><span class="entity_def" id="Multiset.subset_mset.sum_nonneg_leq_bound|fact"><span class="entity_def" id="Multiset.subset_mset.sum_nonneg_0|fact"><span class="entity_def" id="Multiset.subset_mset.sum_nonneg_eq_0_iff|fact"><span class="entity_def" id="Multiset.subset_mset.sum_nonpos|fact"><span class="entity_def" id="Multiset.subset_mset.sum_nonneg|fact"><span class="entity_def" id="Multiset.subset_mset.sum_mono|fact"><span class="entity_def" id="Multiset.subset_mset.add_sign_intros|fact"><span class="entity_def" id="Multiset.subset_mset.add_nonpos_neg|fact"><span class="entity_def" id="Multiset.subset_mset.add_neg_neg|fact"><span class="entity_def" id="Multiset.subset_mset.add_neg_nonpos|fact"><span class="entity_def" id="Multiset.subset_mset.add_nonneg_pos|fact"><span class="entity_def" id="Multiset.subset_mset.add_pos_pos|fact"><span class="entity_def" id="Multiset.subset_mset.add_pos_nonneg|fact"><span class="entity_def" id="Multiset.subset_mset.add_decreasing2|fact"><span class="entity_def" id="Multiset.subset_mset.add_decreasing|fact"><span class="entity_def" id="Multiset.subset_mset.add_increasing2|fact"><span class="entity_def" id="Multiset.subset_mset.add_increasing|fact"><span class="entity_def" id="Multiset.subset_mset.add_nonpos_eq_0_iff|fact"><span class="entity_def" id="Multiset.subset_mset.add_nonneg_eq_0_iff|fact"><span class="entity_def" id="Multiset.subset_mset.add_nonpos_nonpos|fact"><span class="entity_def" id="Multiset.subset_mset.add_nonneg_nonneg|fact"><span class="entity_def" id="Multiset.subset_mset.ordered_comm_monoid_add_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.add_strict_increasing2|thm"><span class="entity_def" id="Multiset.subset_mset.add_strict_increasing|thm"><span class="entity_def" id="Multiset.subset_mset.sum_strict_mono|thm"><span class="entity_def" id="Multiset.subset_mset.pos_add_strict|thm"><span class="entity_def" id="Multiset.subset_mset.sum_list_nonneg_eq_0_iff|thm"><span class="entity_def" id="Multiset.subset_mset.sum_list_nonpos|thm"><span class="entity_def" id="Multiset.subset_mset.sum_list_nonneg|thm"><span class="entity_def" id="Multiset.subset_mset.sum_pos2|thm"><span class="entity_def" id="Multiset.subset_mset.sum_pos|thm"><span class="entity_def" id="Multiset.subset_mset.sum_le_included|thm"><span class="entity_def" id="Multiset.subset_mset.sum_mono2|thm"><span class="entity_def" id="Multiset.subset_mset.sum_nonneg_leq_bound|thm"><span class="entity_def" id="Multiset.subset_mset.sum_nonneg_0|thm"><span class="entity_def" id="Multiset.subset_mset.sum_nonneg_eq_0_iff|thm"><span class="entity_def" id="Multiset.subset_mset.sum_nonpos|thm"><span class="entity_def" id="Multiset.subset_mset.sum_nonneg|thm"><span class="entity_def" id="Multiset.subset_mset.sum_mono|thm"><span class="entity_def" id="Multiset.subset_mset.add_sign_intros(8)|thm"><span class="entity_def" id="Multiset.subset_mset.add_sign_intros(7)|thm"><span class="entity_def" id="Multiset.subset_mset.add_sign_intros(6)|thm"><span class="entity_def" id="Multiset.subset_mset.add_sign_intros(5)|thm"><span class="entity_def" id="Multiset.subset_mset.add_sign_intros(4)|thm"><span class="entity_def" id="Multiset.subset_mset.add_sign_intros(3)|thm"><span class="entity_def" id="Multiset.subset_mset.add_sign_intros(2)|thm"><span class="entity_def" id="Multiset.subset_mset.add_sign_intros(1)|thm"><span class="entity_def" id="Multiset.subset_mset.add_nonpos_neg|thm"><span class="entity_def" id="Multiset.subset_mset.add_neg_neg|thm"><span class="entity_def" id="Multiset.subset_mset.add_neg_nonpos|thm"><span class="entity_def" id="Multiset.subset_mset.add_nonneg_pos|thm"><span class="entity_def" id="Multiset.subset_mset.add_pos_pos|thm"><span class="entity_def" id="Multiset.subset_mset.add_pos_nonneg|thm"><span class="entity_def" id="Multiset.subset_mset.add_decreasing2|thm"><span class="entity_def" id="Multiset.subset_mset.add_decreasing|thm"><span class="entity_def" id="Multiset.subset_mset.add_increasing2|thm"><span class="entity_def" id="Multiset.subset_mset.add_increasing|thm"><span class="entity_def" id="Multiset.subset_mset.add_nonpos_eq_0_iff|thm"><span class="entity_def" id="Multiset.subset_mset.add_nonneg_eq_0_iff|thm"><span class="entity_def" id="Multiset.subset_mset.add_nonpos_nonpos|thm"><span class="entity_def" id="Multiset.subset_mset.le_add_same_cancel2|thm"><span class="entity_def" id="Multiset.subset_mset.le_add_same_cancel1|thm"><span class="entity_def" id="Multiset.subset_mset.add_le_same_cancel2|thm"><span class="entity_def" id="Multiset.subset_mset.add_le_same_cancel1|thm"><span class="entity_def" id="Multiset.subset_mset.less_add_same_cancel2|thm"><span class="entity_def" id="Multiset.subset_mset.less_add_same_cancel1|thm"><span class="entity_def" id="Multiset.subset_mset.add_less_same_cancel2|thm"><span class="entity_def" id="Multiset.subset_mset.add_less_same_cancel1|thm"><span class="entity_def" id="Multiset.subset_mset.ordered_ab_semigroup_monoid_add_imp_le_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.ordered_cancel_comm_monoid_add_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.strict_ordered_comm_monoid_add_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.add_nonneg_nonneg|thm"><span class="entity_def" id="Multiset.subset_mset.ordered_comm_monoid_add_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> subset_mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_monoid_add_imp_le|locale"><span>ordered_ab_semigroup_monoid_add_imp_le</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>(+)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>(-)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>(⊆#)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>(⊂#)</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span>
    </span><span class="comment1"><span>― ‹</span><span>FIXME: avoid junk stemming from type class interpretation</span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eqI|fact"><span class="entity_def" id="Multiset.mset_subset_eqI|thm"><span>mset_subset_eqI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eq_count|fact"><span class="entity_def" id="Multiset.mset_subset_eq_count|thm"><span>mset_subset_eq_count</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eq_exists_conv|fact"><span class="entity_def" id="Multiset.mset_subset_eq_exists_conv|thm"><span>mset_subset_eq_exists_conv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>C</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffI|fact"><span>iffI</span></a><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> x </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="free"><span>B</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span></a></span><span> </span><span class="free"><span class="free"><span>A</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffD2|fact"><span>iffD2</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subset_mset.sum_list_update|fact"><span class="entity_def" id="Multiset.subset_mset.le_diff_conv2|fact"><span class="entity_def" id="Multiset.subset_mset.le_imp_diff_is_add|fact"><span class="entity_def" id="Multiset.subset_mset.le_add_diff|fact"><span class="entity_def" id="Multiset.subset_mset.diff_add|fact"><span class="entity_def" id="Multiset.subset_mset.diff_diff_right|fact"><span class="entity_def" id="Multiset.subset_mset.diff_add_assoc2|fact"><span class="entity_def" id="Multiset.subset_mset.diff_add_assoc|fact"><span class="entity_def" id="Multiset.subset_mset.add_diff_assoc2|fact"><span class="entity_def" id="Multiset.subset_mset.add_diff_assoc|fact"><span class="entity_def" id="Multiset.subset_mset.add_diff_inverse|fact"><span class="entity_def" id="Multiset.subset_mset.ordered_cancel_comm_monoid_diff_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.elem_le_sum_list|fact"><span class="entity_def" id="Multiset.subset_mset.member_le_sum_list|fact"><span class="entity_def" id="Multiset.subset_mset.sum_list_eq_0_iff|fact"><span class="entity_def" id="Multiset.subset_mset.sum_eq_0_iff|fact"><span class="entity_def" id="Multiset.subset_mset.zero_order|fact"><span class="entity_def" id="Multiset.subset_mset.lessE|fact"><span class="entity_def" id="Multiset.subset_mset.less_eqE|fact"><span class="entity_def" id="Multiset.subset_mset.zero_eq_add_iff_both_eq_0|fact"><span class="entity_def" id="Multiset.subset_mset.add_eq_0_iff_both_eq_0|fact"><span class="entity_def" id="Multiset.subset_mset.gr_implies_not_zero|fact"><span class="entity_def" id="Multiset.subset_mset.not_gr_zero|fact"><span class="entity_def" id="Multiset.subset_mset.gr_zeroI|fact"><span class="entity_def" id="Multiset.subset_mset.zero_less_iff_neq_zero|fact"><span class="entity_def" id="Multiset.subset_mset.not_less_zero|fact"><span class="entity_def" id="Multiset.subset_mset.le_zero_eq|fact"><span class="entity_def" id="Multiset.subset_mset.zero_le|fact"><span class="entity_def" id="Multiset.subset_mset.le_iff_add|fact"><span class="entity_def" id="Multiset.subset_mset.canonically_ordered_monoid_add_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.sum_list_update|thm"><span class="entity_def" id="Multiset.subset_mset.le_diff_conv2|thm"><span class="entity_def" id="Multiset.subset_mset.le_imp_diff_is_add|thm"><span class="entity_def" id="Multiset.subset_mset.le_add_diff|thm"><span class="entity_def" id="Multiset.subset_mset.diff_diff_right|thm"><span class="entity_def" id="Multiset.subset_mset.diff_add_assoc2|thm"><span class="entity_def" id="Multiset.subset_mset.elem_le_sum_list|thm"><span class="entity_def" id="Multiset.subset_mset.member_le_sum_list|thm"><span class="entity_def" id="Multiset.subset_mset.zero_order(5)|thm"><span class="entity_def" id="Multiset.subset_mset.zero_order(4)|thm"><span class="entity_def" id="Multiset.subset_mset.zero_order(3)|thm"><span class="entity_def" id="Multiset.subset_mset.zero_order(2)|thm"><span class="entity_def" id="Multiset.subset_mset.zero_order(1)|thm"><span class="entity_def" id="Multiset.subset_mset.gr_implies_not_zero|thm"><span class="entity_def" id="Multiset.subset_mset.zero_less_iff_neq_zero|thm"><span class="entity_def" id="Multiset.subset_mset.add_diff_inverse|thm"><span class="entity_def" id="Multiset.subset_mset.diff_add|thm"><span class="entity_def" id="Multiset.subset_mset.le_iff_add|thm"><span class="entity_def" id="Multiset.subset_mset.gr_zeroI|thm"><span class="entity_def" id="Multiset.subset_mset.diff_add_assoc|thm"><span class="entity_def" id="Multiset.subset_mset.add_diff_assoc2|thm"><span class="entity_def" id="Multiset.subset_mset.add_diff_assoc|thm"><span class="entity_def" id="Multiset.subset_mset.ordered_cancel_comm_monoid_diff_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.sum_list_eq_0_iff|thm"><span class="entity_def" id="Multiset.subset_mset.sum_eq_0_iff|thm"><span class="entity_def" id="Multiset.subset_mset.lessE|thm"><span class="entity_def" id="Multiset.subset_mset.less_eqE|thm"><span class="entity_def" id="Multiset.subset_mset.zero_eq_add_iff_both_eq_0|thm"><span class="entity_def" id="Multiset.subset_mset.add_eq_0_iff_both_eq_0|thm"><span class="entity_def" id="Multiset.subset_mset.not_gr_zero|thm"><span class="entity_def" id="Multiset.subset_mset.not_less_zero|thm"><span class="entity_def" id="Multiset.subset_mset.le_zero_eq|thm"><span class="entity_def" id="Multiset.subset_mset.zero_le|thm"><span class="entity_def" id="Multiset.subset_mset.canonically_ordered_monoid_add_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> subset_mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_cancel_comm_monoid_diff|locale"><span>ordered_cancel_comm_monoid_diff</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>(+)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>(⊆#)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>(⊂#)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>(-)</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_exists_conv|fact"><span>mset_subset_eq_exists_conv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="comment1"><span>― ‹</span><span>FIXME: avoid junk stemming from type class interpretation</span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.add_diff_assoc|fact"><span>subset_mset.add_diff_assoc</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.add_diff_assoc2|fact"><span>subset_mset.add_diff_assoc2</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eq_mono_add_right_cancel|fact"><span class="entity_def" id="Multiset.mset_subset_eq_mono_add_right_cancel|thm"><span>mset_subset_eq_mono_add_right_cancel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.add_le_cancel_right|fact"><span>subset_mset.add_le_cancel_right</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eq_mono_add_left_cancel|fact"><span class="entity_def" id="Multiset.mset_subset_eq_mono_add_left_cancel|thm"><span>mset_subset_eq_mono_add_left_cancel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.add_le_cancel_left|fact"><span>subset_mset.add_le_cancel_left</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eq_mono_add|fact"><span class="entity_def" id="Multiset.mset_subset_eq_mono_add|thm"><span>mset_subset_eq_mono_add</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>D</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.add_mono|fact"><span>subset_mset.add_mono</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eq_add_left|fact"><span class="entity_def" id="Multiset.mset_subset_eq_add_left|thm"><span>mset_subset_eq_add_left</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eq_add_right|fact"><span class="entity_def" id="Multiset.mset_subset_eq_add_right|thm"><span>mset_subset_eq_add_right</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.single_subset_iff|fact"><span class="entity_def" id="Multiset.single_subset_iff|thm"><span>single_subset_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc_le_eq|fact"><span>Suc_le_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eq_single|fact"><span class="entity_def" id="Multiset.mset_subset_eq_single|thm"><span>mset_subset_eq_single</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eq_add_mset_cancel|fact"><span class="entity_def" id="Multiset.mset_subset_eq_add_mset_cancel|thm"><span>mset_subset_eq_add_mset_cancel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_add_single|fact"><span>add_mset_add_single</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_add_single|fact"><span>add_mset_add_single</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_mono_add_right_cancel|fact"><span>mset_subset_eq_mono_add_right_cancel</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_diff_union_assoc|fact"><span class="entity_def" id="Multiset.multiset_diff_union_assoc|thm"><span>multiset_diff_union_assoc</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.diff_add_assoc|fact"><span>subset_mset.diff_add_assoc</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eq_multiset_union_diff_commute|fact"><span class="entity_def" id="Multiset.mset_subset_eq_multiset_union_diff_commute|thm"><span>mset_subset_eq_multiset_union_diff_commute</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.add_diff_assoc2|fact"><span>subset_mset.add_diff_assoc2</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_subset_eq_self|fact"><span class="entity_def" id="Multiset.diff_subset_eq_self|thm"><span>diff_subset_eq_self</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eqD|fact"><span class="entity_def" id="Multiset.mset_subset_eqD|thm"><span>mset_subset_eqD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subsetD|fact"><span class="entity_def" id="Multiset.mset_subsetD|thm"><span>mset_subsetD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eqD|fact"><span>mset_subset_eqD</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_mono|fact"><span class="entity_def" id="Multiset.set_mset_mono|thm"><span>set_mset_mono</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eqD|fact"><span>mset_subset_eqD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetI|fact"><span>subsetI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_eq_insertD|fact"><span class="entity_def" id="Multiset.mset_subset_eq_insertD|thm"><span>mset_subset_eq_insertD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span class="main"><span>)</span></span><span>
 </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eqD|fact"><span>mset_subset_eqD</span></a><span class="main"><span>)</span></span><span>
 </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span class="main"><span>)</span></span><span>
 </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule_tac</span></span><span> x </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="improper"><span>a</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.allE|fact"><span>allE</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_split_asm|fact"><span>if_split_asm</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_insertD|fact"><span class="entity_def" id="Multiset.mset_subset_insertD|thm"><span>mset_subset_insertD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_insertD|fact"><span>mset_subset_eq_insertD</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_of_empty|fact"><span class="entity_def" id="Multiset.mset_subset_of_empty|thm"><span>mset_subset_of_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.not_less_zero|fact"><span>subset_mset.not_less_zero</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.empty_subset_add_mset|fact"><span class="entity_def" id="Multiset.empty_subset_add_mset|thm"><span>empty_subset_add_mset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.gr_zeroI|fact"><span>subset_mset.gr_zeroI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.empty_le|fact"><span class="entity_def" id="Multiset.empty_le|thm"><span>empty_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.zero_le|fact"><span>subset_mset.zero_le</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.insert_subset_eq_iff|fact"><span class="entity_def" id="Multiset.insert_subset_eq_iff|thm"><span>insert_subset_eq_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_diff_conv2|fact"><span>le_diff_conv2</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc_le_eq|fact"><span>Suc_le_eq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ccontr|fact"><span>ccontr</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.insert_union_subset_iff|fact"><span class="entity_def" id="Multiset.insert_union_subset_iff|thm"><span>insert_union_subset_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.insert_subset_eq_iff|fact"><span>insert_subset_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.subset_eq_diff_conv|fact"><span class="entity_def" id="Multiset.subset_eq_diff_conv|thm"><span>subset_eq_diff_conv</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_diff_conv|fact"><span>le_diff_conv</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multi_psub_of_add_self|fact"><span class="entity_def" id="Multiset.multi_psub_of_add_self|thm"><span>multi_psub_of_add_self</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multi_psub_self|fact"><span class="entity_def" id="Multiset.multi_psub_self|thm"><span>multi_psub_self</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_add_mset|fact"><span class="entity_def" id="Multiset.mset_subset_add_mset|thm"><span>mset_subset_add_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_add_single|fact"><span>add_mset_add_single</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_add_single|fact"><span>add_mset_add_single</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.add_less_cancel_right|fact"><span>subset_mset.add_less_cancel_right</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_diff_self|fact"><span class="entity_def" id="Multiset.mset_subset_diff_self|thm"><span>mset_subset_diff_self</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>c</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_add|fact"><span>mset_add</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.Diff_eq_empty_iff_mset|fact"><span class="entity_def" id="Multiset.Diff_eq_empty_iff_mset|thm"><span>Diff_eq_empty_iff_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_subseteq_single_iff|fact"><span class="entity_def" id="Multiset.add_mset_subseteq_single_iff|thm"><span>add_mset_subseteq_single_iff</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>b</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_19703..19704">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>b</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>b</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_insertD|fact"><span>mset_subset_eq_insertD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_19703..19704"><span>A</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_add_mset_cancel|fact"><span>mset_subset_eq_add_mset_cancel</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Intersection and bounded union</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.inter_mset_def|fact"><span class="entity_def" id="Multiset.inter_mset_def|thm"><span class="entity_def" id="Multiset.inter_mset_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.inter_mset|const"><span>inter_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>›</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="keyword1"><span>∩#</span></span><span>›</span></span><span> 70</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span class="free"><span>∩#</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_inter_mset|fact"><span class="entity_def" id="Multiset.count_inter_mset|thm"><span>count_inter_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min|const"><span>min</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset_def|fact"><span>inter_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="comment1"><span>(</span><span>*</span><span>global_interpretation subset_mset: semilattice_order ‹(∩#)› ‹(⊆#)› ‹(⊂#)›
  by standard (simp_all add: multiset_eq_iff subseteq_mset_def subset_mset_def min_def)</span><span>*</span><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subset_mset.Inf_fin_def|fact"><span class="entity_def" id="Multiset.subset_mset.comp_fun_idem_inf|fact"><span class="entity_def" id="Multiset.subset_mset.mono_inf|fact"><span class="entity_def" id="Multiset.subset_mset.inf_unique|fact"><span class="entity_def" id="Multiset.subset_mset.less_infI2|fact"><span class="entity_def" id="Multiset.subset_mset.less_infI1|fact"><span class="entity_def" id="Multiset.subset_mset.inf_aci|fact"><span class="entity_def" id="Multiset.subset_mset.inf_absorb2|fact"><span class="entity_def" id="Multiset.subset_mset.inf_absorb1|fact"><span class="entity_def" id="Multiset.subset_mset.inf_right_idem|fact"><span class="entity_def" id="Multiset.subset_mset.inf_left_idem|fact"><span class="entity_def" id="Multiset.subset_mset.inf_idem|fact"><span class="entity_def" id="Multiset.subset_mset.inf_left_commute|fact"><span class="entity_def" id="Multiset.subset_mset.inf_commute|fact"><span class="entity_def" id="Multiset.subset_mset.inf_assoc|fact"><span class="entity_def" id="Multiset.subset_mset.inf_mono|fact"><span class="entity_def" id="Multiset.subset_mset.le_iff_inf|fact"><span class="entity_def" id="Multiset.subset_mset.le_inf_iff|fact"><span class="entity_def" id="Multiset.subset_mset.le_infE|fact"><span class="entity_def" id="Multiset.subset_mset.le_infI|fact"><span class="entity_def" id="Multiset.subset_mset.le_infI2|fact"><span class="entity_def" id="Multiset.subset_mset.le_infI1|fact"><span class="entity_def" id="Multiset.subset_mset.inf_greatest|fact"><span class="entity_def" id="Multiset.subset_mset.inf_le2|fact"><span class="entity_def" id="Multiset.subset_mset.inf_le1|fact"><span class="entity_def" id="Multiset.subset_mset.semilattice_inf_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.subset_imp|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.coboundedI|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.boundedE|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.boundedI|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.bounded_iff|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.semilattice_order_set_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.set_eq_fold|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.infinite|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.hom_commute|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.closed|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.subset|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.insert_remove|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.remove|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.union|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.insert|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.in_idem|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.insert_not_elem|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.singleton|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.eq_fold|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.eq_fold&apos;|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.semilattice_set_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.inf.absorb_iff2|fact"><span class="entity_def" id="Multiset.subset_mset.inf.absorb_iff1|fact"><span class="entity_def" id="Multiset.subset_mset.inf.absorb4|fact"><span class="entity_def" id="Multiset.subset_mset.inf.absorb3|fact"><span class="entity_def" id="Multiset.subset_mset.inf.absorb2|fact"><span class="entity_def" id="Multiset.subset_mset.inf.absorb1|fact"><span class="entity_def" id="Multiset.subset_mset.inf.mono|fact"><span class="entity_def" id="Multiset.subset_mset.inf.strict_coboundedI2|fact"><span class="entity_def" id="Multiset.subset_mset.inf.strict_coboundedI1|fact"><span class="entity_def" id="Multiset.subset_mset.inf.coboundedI2|fact"><span class="entity_def" id="Multiset.subset_mset.inf.coboundedI1|fact"><span class="entity_def" id="Multiset.subset_mset.inf.strict_boundedE|fact"><span class="entity_def" id="Multiset.subset_mset.inf.bounded_iff|fact"><span class="entity_def" id="Multiset.subset_mset.inf.boundedE|fact"><span class="entity_def" id="Multiset.subset_mset.inf.boundedI|fact"><span class="entity_def" id="Multiset.subset_mset.inf.cobounded2|fact"><span class="entity_def" id="Multiset.subset_mset.inf.cobounded1|fact"><span class="entity_def" id="Multiset.subset_mset.inf.orderE|fact"><span class="entity_def" id="Multiset.subset_mset.inf.orderI|fact"><span class="entity_def" id="Multiset.subset_mset.inf.strict_order_iff|fact"><span class="entity_def" id="Multiset.subset_mset.inf.order_iff|fact"><span class="entity_def" id="Multiset.subset_mset.inf.semilattice_order_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.inf.right_idem|fact"><span class="entity_def" id="Multiset.subset_mset.inf.left_idem|fact"><span class="entity_def" id="Multiset.subset_mset.inf.idem|fact"><span class="entity_def" id="Multiset.subset_mset.inf.semilattice_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.inf.left_commute|fact"><span class="entity_def" id="Multiset.subset_mset.inf.commute|fact"><span class="entity_def" id="Multiset.subset_mset.inf.abel_semigroup_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.inf.assoc|fact"><span class="entity_def" id="Multiset.subset_mset.inf.semigroup_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin_def|thm"><span class="entity_def" id="Multiset.subset_mset.comp_fun_idem_inf|thm"><span class="entity_def" id="Multiset.subset_mset.mono_inf|thm"><span class="entity_def" id="Multiset.subset_mset.inf_unique|thm"><span class="entity_def" id="Multiset.subset_mset.less_infI2|thm"><span class="entity_def" id="Multiset.subset_mset.less_infI1|thm"><span class="entity_def" id="Multiset.subset_mset.inf_aci(4)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_aci(3)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_aci(2)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_aci(1)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_absorb2|thm"><span class="entity_def" id="Multiset.subset_mset.inf_absorb1|thm"><span class="entity_def" id="Multiset.subset_mset.inf_right_idem|thm"><span class="entity_def" id="Multiset.subset_mset.inf_left_idem|thm"><span class="entity_def" id="Multiset.subset_mset.inf_idem|thm"><span class="entity_def" id="Multiset.subset_mset.inf_left_commute|thm"><span class="entity_def" id="Multiset.subset_mset.inf_commute|thm"><span class="entity_def" id="Multiset.subset_mset.inf_assoc|thm"><span class="entity_def" id="Multiset.subset_mset.inf_mono|thm"><span class="entity_def" id="Multiset.subset_mset.le_iff_inf|thm"><span class="entity_def" id="Multiset.subset_mset.le_inf_iff|thm"><span class="entity_def" id="Multiset.subset_mset.le_infE|thm"><span class="entity_def" id="Multiset.subset_mset.le_infI|thm"><span class="entity_def" id="Multiset.subset_mset.le_infI2|thm"><span class="entity_def" id="Multiset.subset_mset.le_infI1|thm"><span class="entity_def" id="Multiset.subset_mset.inf_greatest|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.subset_imp|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.coboundedI|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.boundedI|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.bounded_iff|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.infinite|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.hom_commute|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.closed|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.subset|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.insert_remove|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.remove|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.union|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.in_idem|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.insert_not_elem|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.eq_fold|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.eq_fold&apos;|thm"><span class="entity_def" id="Multiset.subset_mset.inf.absorb_iff2|thm"><span class="entity_def" id="Multiset.subset_mset.inf.absorb_iff1|thm"><span class="entity_def" id="Multiset.subset_mset.inf.absorb4|thm"><span class="entity_def" id="Multiset.subset_mset.inf.absorb3|thm"><span class="entity_def" id="Multiset.subset_mset.inf.absorb2|thm"><span class="entity_def" id="Multiset.subset_mset.inf.absorb1|thm"><span class="entity_def" id="Multiset.subset_mset.inf.mono|thm"><span class="entity_def" id="Multiset.subset_mset.inf.strict_coboundedI2|thm"><span class="entity_def" id="Multiset.subset_mset.inf.strict_coboundedI1|thm"><span class="entity_def" id="Multiset.subset_mset.inf.coboundedI2|thm"><span class="entity_def" id="Multiset.subset_mset.inf.coboundedI1|thm"><span class="entity_def" id="Multiset.subset_mset.inf.boundedI|thm"><span class="entity_def" id="Multiset.subset_mset.inf.orderI|thm"><span class="entity_def" id="Multiset.subset_mset.inf.strict_order_iff|thm"><span class="entity_def" id="Multiset.subset_mset.inf.order_iff|thm"><span class="entity_def" id="Multiset.subset_mset.inf_le2|thm"><span class="entity_def" id="Multiset.subset_mset.inf_le1|thm"><span class="entity_def" id="Multiset.subset_mset.semilattice_inf_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.boundedE|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.semilattice_order_set_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.set_eq_fold|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.insert|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.singleton|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.semilattice_set_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.inf.strict_boundedE|thm"><span class="entity_def" id="Multiset.subset_mset.inf.bounded_iff|thm"><span class="entity_def" id="Multiset.subset_mset.inf.boundedE|thm"><span class="entity_def" id="Multiset.subset_mset.inf.cobounded2|thm"><span class="entity_def" id="Multiset.subset_mset.inf.cobounded1|thm"><span class="entity_def" id="Multiset.subset_mset.inf.orderE|thm"><span class="entity_def" id="Multiset.subset_mset.inf.semilattice_order_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.inf.right_idem|thm"><span class="entity_def" id="Multiset.subset_mset.inf.left_idem|thm"><span class="entity_def" id="Multiset.subset_mset.inf.idem|thm"><span class="entity_def" id="Multiset.subset_mset.inf.semilattice_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.inf.left_commute|thm"><span class="entity_def" id="Multiset.subset_mset.inf.commute|thm"><span class="entity_def" id="Multiset.subset_mset.inf.abel_semigroup_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.inf.assoc|thm"><span class="entity_def" id="Multiset.subset_mset.inf.semigroup_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin|const"><span class="entity_def" id="Multiset.subset_mset.Inf_fin.F|const"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> subset_mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf|locale"><span>semilattice_inf</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>(∩#)</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>(⊆#)</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>(⊂#)</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="comment1"><span>― ‹</span><span>FIXME: avoid junk stemming from type class interpretation</span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.union_mset_def|fact"><span class="entity_def" id="Multiset.union_mset_def|thm"><span class="entity_def" id="Multiset.union_mset_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.union_mset|const"><span>union_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>›</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="keyword1"><span>∪#</span></span><span>›</span></span><span> 70</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span class="free"><span>∪#</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_union_mset|fact"><span class="entity_def" id="Multiset.count_union_mset|thm"><span>count_union_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.max|const"><span>max</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset_def|fact"><span>union_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subset_mset.neutr_eq_iff|fact"><span class="entity_def" id="Multiset.subset_mset.eq_neutr_iff|fact"><span class="entity_def" id="Multiset.subset_mset.semilattice_neutr_order_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.not_eq_extremum|fact"><span class="entity_def" id="Multiset.subset_mset.extremum_strict|fact"><span class="entity_def" id="Multiset.subset_mset.extremum_unique|fact"><span class="entity_def" id="Multiset.subset_mset.extremum_uniqueI|fact"><span class="entity_def" id="Multiset.subset_mset.extremum|fact"><span class="entity_def" id="Multiset.subset_mset.ordering_top_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.absorb_iff2|fact"><span class="entity_def" id="Multiset.subset_mset.absorb_iff1|fact"><span class="entity_def" id="Multiset.subset_mset.absorb4|fact"><span class="entity_def" id="Multiset.subset_mset.absorb3|fact"><span class="entity_def" id="Multiset.subset_mset.absorb2|fact"><span class="entity_def" id="Multiset.subset_mset.absorb1|fact"><span class="entity_def" id="Multiset.subset_mset.mono|fact"><span class="entity_def" id="Multiset.subset_mset.strict_coboundedI2|fact"><span class="entity_def" id="Multiset.subset_mset.strict_coboundedI1|fact"><span class="entity_def" id="Multiset.subset_mset.coboundedI2|fact"><span class="entity_def" id="Multiset.subset_mset.coboundedI1|fact"><span class="entity_def" id="Multiset.subset_mset.strict_boundedE|fact"><span class="entity_def" id="Multiset.subset_mset.bounded_iff|fact"><span class="entity_def" id="Multiset.subset_mset.boundedE|fact"><span class="entity_def" id="Multiset.subset_mset.boundedI|fact"><span class="entity_def" id="Multiset.subset_mset.cobounded2|fact"><span class="entity_def" id="Multiset.subset_mset.cobounded1|fact"><span class="entity_def" id="Multiset.subset_mset.orderE|fact"><span class="entity_def" id="Multiset.subset_mset.orderI|fact"><span class="entity_def" id="Multiset.subset_mset.strict_order_iff|fact"><span class="entity_def" id="Multiset.subset_mset.order_iff|fact"><span class="entity_def" id="Multiset.subset_mset.semilattice_order_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.semilattice_neutr_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.comm_neutral|fact"><span class="entity_def" id="Multiset.subset_mset.comm_monoid_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.right_neutral|fact"><span class="entity_def" id="Multiset.subset_mset.left_neutral|fact"><span class="entity_def" id="Multiset.subset_mset.monoid_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.right_idem|fact"><span class="entity_def" id="Multiset.subset_mset.left_idem|fact"><span class="entity_def" id="Multiset.subset_mset.idem|fact"><span class="entity_def" id="Multiset.subset_mset.semilattice_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.left_commute|fact"><span class="entity_def" id="Multiset.subset_mset.commute|fact"><span class="entity_def" id="Multiset.subset_mset.abel_semigroup_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.assoc|fact"><span class="entity_def" id="Multiset.subset_mset.semigroup_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.not_eq_extremum|thm"><span class="entity_def" id="Multiset.subset_mset.extremum_unique|thm"><span class="entity_def" id="Multiset.subset_mset.extremum_uniqueI|thm"><span class="entity_def" id="Multiset.subset_mset.absorb_iff2|thm"><span class="entity_def" id="Multiset.subset_mset.absorb_iff1|thm"><span class="entity_def" id="Multiset.subset_mset.absorb4|thm"><span class="entity_def" id="Multiset.subset_mset.absorb3|thm"><span class="entity_def" id="Multiset.subset_mset.absorb2|thm"><span class="entity_def" id="Multiset.subset_mset.absorb1|thm"><span class="entity_def" id="Multiset.subset_mset.mono|thm"><span class="entity_def" id="Multiset.subset_mset.strict_coboundedI2|thm"><span class="entity_def" id="Multiset.subset_mset.strict_coboundedI1|thm"><span class="entity_def" id="Multiset.subset_mset.coboundedI2|thm"><span class="entity_def" id="Multiset.subset_mset.coboundedI1|thm"><span class="entity_def" id="Multiset.subset_mset.boundedI|thm"><span class="entity_def" id="Multiset.subset_mset.orderI|thm"><span class="entity_def" id="Multiset.subset_mset.strict_order_iff|thm"><span class="entity_def" id="Multiset.subset_mset.order_iff|thm"><span class="entity_def" id="Multiset.subset_mset.comm_neutral|thm"><span class="entity_def" id="Multiset.subset_mset.neutr_eq_iff|thm"><span class="entity_def" id="Multiset.subset_mset.eq_neutr_iff|thm"><span class="entity_def" id="Multiset.subset_mset.semilattice_neutr_order_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.extremum_strict|thm"><span class="entity_def" id="Multiset.subset_mset.extremum|thm"><span class="entity_def" id="Multiset.subset_mset.ordering_top_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.strict_boundedE|thm"><span class="entity_def" id="Multiset.subset_mset.bounded_iff|thm"><span class="entity_def" id="Multiset.subset_mset.boundedE|thm"><span class="entity_def" id="Multiset.subset_mset.cobounded2|thm"><span class="entity_def" id="Multiset.subset_mset.cobounded1|thm"><span class="entity_def" id="Multiset.subset_mset.orderE|thm"><span class="entity_def" id="Multiset.subset_mset.semilattice_order_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.semilattice_neutr_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.comm_monoid_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.right_neutral|thm"><span class="entity_def" id="Multiset.subset_mset.left_neutral|thm"><span class="entity_def" id="Multiset.subset_mset.monoid_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.right_idem|thm"><span class="entity_def" id="Multiset.subset_mset.left_idem|thm"><span class="entity_def" id="Multiset.subset_mset.idem|thm"><span class="entity_def" id="Multiset.subset_mset.semilattice_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.left_commute|thm"><span class="entity_def" id="Multiset.subset_mset.commute|thm"><span class="entity_def" id="Multiset.subset_mset.abel_semigroup_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.assoc|thm"><span class="entity_def" id="Multiset.subset_mset.semigroup_axioms|thm"><span>global_interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> subset_mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_neutr_order|locale"><span>semilattice_neutr_order</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>(∪#)</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.supseteq_mset|const"><span>(⊇#)</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.supset_mset|const"><span>(⊃#)</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.max_def|fact"><span>max_def</span></a><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_antisym|fact"><span>le_antisym</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.sym|fact"><span>sym</span></a><span class="main"><span>)</span></span><span>
   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat_le_linear|fact"><span>nat_le_linear</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subset_mset.Sup_fin_def|fact"><span class="entity_def" id="Multiset.subset_mset.comp_fun_idem_sup|fact"><span class="entity_def" id="Multiset.subset_mset.mono_sup|fact"><span class="entity_def" id="Multiset.subset_mset.sup_unique|fact"><span class="entity_def" id="Multiset.subset_mset.less_supI2|fact"><span class="entity_def" id="Multiset.subset_mset.less_supI1|fact"><span class="entity_def" id="Multiset.subset_mset.sup_aci|fact"><span class="entity_def" id="Multiset.subset_mset.sup_absorb2|fact"><span class="entity_def" id="Multiset.subset_mset.sup_absorb1|fact"><span class="entity_def" id="Multiset.subset_mset.sup_left_idem|fact"><span class="entity_def" id="Multiset.subset_mset.sup_idem|fact"><span class="entity_def" id="Multiset.subset_mset.sup_left_commute|fact"><span class="entity_def" id="Multiset.subset_mset.sup_commute|fact"><span class="entity_def" id="Multiset.subset_mset.sup_assoc|fact"><span class="entity_def" id="Multiset.subset_mset.sup_mono|fact"><span class="entity_def" id="Multiset.subset_mset.le_iff_sup|fact"><span class="entity_def" id="Multiset.subset_mset.le_sup_iff|fact"><span class="entity_def" id="Multiset.subset_mset.le_supE|fact"><span class="entity_def" id="Multiset.subset_mset.le_supI|fact"><span class="entity_def" id="Multiset.subset_mset.le_supI2|fact"><span class="entity_def" id="Multiset.subset_mset.le_supI1|fact"><span class="entity_def" id="Multiset.subset_mset.dual_semilattice|fact"><span class="entity_def" id="Multiset.subset_mset.sup_least|fact"><span class="entity_def" id="Multiset.subset_mset.sup_ge2|fact"><span class="entity_def" id="Multiset.subset_mset.sup_ge1|fact"><span class="entity_def" id="Multiset.subset_mset.semilattice_sup_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.subset_imp|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.coboundedI|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.boundedE|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.boundedI|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.bounded_iff|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.semilattice_order_set_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.set_eq_fold|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.infinite|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.hom_commute|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.closed|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.subset|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.insert_remove|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.remove|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.union|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.insert|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.in_idem|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.insert_not_elem|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.singleton|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.eq_fold|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.eq_fold&apos;|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.semilattice_set_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.Sup_fin_def|thm"><span class="entity_def" id="Multiset.subset_mset.comp_fun_idem_sup|thm"><span class="entity_def" id="Multiset.subset_mset.mono_sup|thm"><span class="entity_def" id="Multiset.subset_mset.sup_unique|thm"><span class="entity_def" id="Multiset.subset_mset.less_supI2|thm"><span class="entity_def" id="Multiset.subset_mset.less_supI1|thm"><span class="entity_def" id="Multiset.subset_mset.sup_aci(4)|thm"><span class="entity_def" id="Multiset.subset_mset.sup_aci(3)|thm"><span class="entity_def" id="Multiset.subset_mset.sup_aci(2)|thm"><span class="entity_def" id="Multiset.subset_mset.sup_aci(1)|thm"><span class="entity_def" id="Multiset.subset_mset.sup_absorb2|thm"><span class="entity_def" id="Multiset.subset_mset.sup_absorb1|thm"><span class="entity_def" id="Multiset.subset_mset.sup_idem|thm"><span class="entity_def" id="Multiset.subset_mset.sup_left_commute|thm"><span class="entity_def" id="Multiset.subset_mset.sup_commute|thm"><span class="entity_def" id="Multiset.subset_mset.sup_assoc|thm"><span class="entity_def" id="Multiset.subset_mset.sup_mono|thm"><span class="entity_def" id="Multiset.subset_mset.le_iff_sup|thm"><span class="entity_def" id="Multiset.subset_mset.le_sup_iff|thm"><span class="entity_def" id="Multiset.subset_mset.le_supE|thm"><span class="entity_def" id="Multiset.subset_mset.le_supI|thm"><span class="entity_def" id="Multiset.subset_mset.le_supI2|thm"><span class="entity_def" id="Multiset.subset_mset.le_supI1|thm"><span class="entity_def" id="Multiset.subset_mset.dual_semilattice|thm"><span class="entity_def" id="Multiset.subset_mset.sup_least|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.subset_imp|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.coboundedI|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.boundedI|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.bounded_iff|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.infinite|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.hom_commute|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.closed|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.subset|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.insert_remove|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.remove|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.union|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.in_idem|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.insert_not_elem|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.eq_fold|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.eq_fold&apos;|thm"><span class="entity_def" id="Multiset.subset_mset.sup_left_idem|thm"><span class="entity_def" id="Multiset.subset_mset.sup_ge2|thm"><span class="entity_def" id="Multiset.subset_mset.sup_ge1|thm"><span class="entity_def" id="Multiset.subset_mset.semilattice_sup_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.boundedE|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.semilattice_order_set_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.set_eq_fold|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.insert|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.singleton|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.semilattice_set_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.Sup_fin|const"><span class="entity_def" id="Multiset.subset_mset.Sup_fin.F|const"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> subset_mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_sup|locale"><span>semilattice_sup</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>(∪#)</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>(⊆#)</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>(⊂#)</span></a></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="skolem"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="skolem"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>q</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/arith_data.ML.html#Rings.arith|method"><span class="operator"><span>arith</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.class.semilattice_sup|const"><span>class.semilattice_sup</span></a><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>(∪#)</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>(⊆#)</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>(⊂#)</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset_def|fact"><span>union_mset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>FIXME: avoid junk stemming from type class interpretation</span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subset_mset.inf_bot_right|fact"><span class="entity_def" id="Multiset.subset_mset.inf_bot_left|fact"><span class="entity_def" id="Multiset.subset_mset.bounded_lattice_bot_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.bot_eq_sup_iff|fact"><span class="entity_def" id="Multiset.subset_mset.sup_eq_bot_iff|fact"><span class="entity_def" id="Multiset.subset_mset.sup_bot_right|fact"><span class="entity_def" id="Multiset.subset_mset.sup_bot_left|fact"><span class="entity_def" id="Multiset.subset_mset.bounded_semilattice_sup_bot_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_bot|fact"><span class="entity_def" id="Multiset.subset_mset.atLeast_eq_UNIV_iff|fact"><span class="entity_def" id="Multiset.subset_mset.min_bot2|fact"><span class="entity_def" id="Multiset.subset_mset.min_bot|fact"><span class="entity_def" id="Multiset.subset_mset.max_bot2|fact"><span class="entity_def" id="Multiset.subset_mset.max_bot|fact"><span class="entity_def" id="Multiset.subset_mset.bot_less|fact"><span class="entity_def" id="Multiset.subset_mset.not_less_bot|fact"><span class="entity_def" id="Multiset.subset_mset.bot_unique|fact"><span class="entity_def" id="Multiset.subset_mset.le_bot|fact"><span class="entity_def" id="Multiset.subset_mset.bot_least|fact"><span class="entity_def" id="Multiset.subset_mset.order_bot_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_UN|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_UN|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_image_inf|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_image_sup|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Un|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Un|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_finite|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_finite|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_finite|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_below_insert|fact"><span class="entity_def" id="Multiset.subset_mset.bdd_above_insert|fact"><span class="entity_def" id="Multiset.subset_mset.inf_Sup_absorb|fact"><span class="entity_def" id="Multiset.subset_mset.sup_Inf_absorb|fact"><span class="entity_def" id="Multiset.subset_mset.Inf_fin_le_Sup_fin|fact"><span class="entity_def" id="Multiset.subset_mset.distrib_imp2|fact"><span class="entity_def" id="Multiset.subset_mset.distrib_imp1|fact"><span class="entity_def" id="Multiset.subset_mset.distrib_inf_le|fact"><span class="entity_def" id="Multiset.subset_mset.distrib_sup_le|fact"><span class="entity_def" id="Multiset.subset_mset.inf_sup_ord|fact"><span class="entity_def" id="Multiset.subset_mset.inf_sup_aci|fact"><span class="entity_def" id="Multiset.subset_mset.sup_inf_absorb|fact"><span class="entity_def" id="Multiset.subset_mset.inf_sup_absorb|fact"><span class="entity_def" id="Multiset.subset_mset.dual_lattice|fact"><span class="entity_def" id="Multiset.subset_mset.lattice_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.bot_eq_sup_iff|thm"><span class="entity_def" id="Multiset.subset_mset.sup_eq_bot_iff|thm"><span class="entity_def" id="Multiset.subset_mset.sup_bot_right|thm"><span class="entity_def" id="Multiset.subset_mset.sup_bot_left|thm"><span class="entity_def" id="Multiset.subset_mset.atLeast_eq_UNIV_iff|thm"><span class="entity_def" id="Multiset.subset_mset.bot_less|thm"><span class="entity_def" id="Multiset.subset_mset.not_less_bot|thm"><span class="entity_def" id="Multiset.subset_mset.bot_unique|thm"><span class="entity_def" id="Multiset.subset_mset.le_bot|thm"><span class="entity_def" id="Multiset.subset_mset.bot_least|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_finite|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_finite|thm"><span class="entity_def" id="Multiset.subset_mset.distrib_imp2|thm"><span class="entity_def" id="Multiset.subset_mset.distrib_imp1|thm"><span class="entity_def" id="Multiset.subset_mset.distrib_inf_le|thm"><span class="entity_def" id="Multiset.subset_mset.distrib_sup_le|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_ord(4)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_ord(3)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_ord(2)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_ord(1)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_aci(8)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_aci(7)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_aci(6)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_aci(5)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_aci(4)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_aci(3)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_aci(2)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_aci(1)|thm"><span class="entity_def" id="Multiset.subset_mset.dual_lattice|thm"><span class="entity_def" id="Multiset.subset_mset.inf_bot_right|thm"><span class="entity_def" id="Multiset.subset_mset.inf_bot_left|thm"><span class="entity_def" id="Multiset.subset_mset.bounded_lattice_bot_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.bounded_semilattice_sup_bot_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_bot|thm"><span class="entity_def" id="Multiset.subset_mset.min_bot2|thm"><span class="entity_def" id="Multiset.subset_mset.min_bot|thm"><span class="entity_def" id="Multiset.subset_mset.max_bot2|thm"><span class="entity_def" id="Multiset.subset_mset.max_bot|thm"><span class="entity_def" id="Multiset.subset_mset.order_bot_axioms|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_UN|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_UN|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_image_inf|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_image_sup|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_Un|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_Un|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_finite(2)|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_finite(1)|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_below_insert|thm"><span class="entity_def" id="Multiset.subset_mset.bdd_above_insert|thm"><span class="entity_def" id="Multiset.subset_mset.inf_Sup_absorb|thm"><span class="entity_def" id="Multiset.subset_mset.sup_Inf_absorb|thm"><span class="entity_def" id="Multiset.subset_mset.Inf_fin_le_Sup_fin|thm"><span class="entity_def" id="Multiset.subset_mset.sup_inf_absorb|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_absorb|thm"><span class="entity_def" id="Multiset.subset_mset.lattice_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> subset_mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.bounded_lattice_bot|locale"><span>bounded_lattice_bot</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>(∩#)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>(⊆#)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>(⊂#)</span></a></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>(∪#)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="comment1"><span>― ‹</span><span>FIXME: avoid junk stemming from type class interpretation</span><span>›</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Additional intersection facts</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_inter|fact"><span class="entity_def" id="Multiset.set_mset_inter|thm"><span>set_mset_inter</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_def|fact"><span>set_mset_def</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_intersect_left_idem|fact"><span class="entity_def" id="Multiset.diff_intersect_left_idem|thm"><span>diff_intersect_left_idem</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min_def|fact"><span>min_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_intersect_right_idem|fact"><span class="entity_def" id="Multiset.diff_intersect_right_idem|thm"><span>diff_intersect_right_idem</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min_def|fact"><span>min_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_inter_single|fact"><span class="entity_def" id="Multiset.multiset_inter_single|thm"><span>multiset_inter_single</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>b</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_22006..22011">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_union_diff_commute|fact"><span class="entity_def" id="Multiset.multiset_union_diff_commute|thm"><span>multiset_union_diff_commute</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_22006..22011"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min|const"><span>min</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min_def|fact"><span>min_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.disjunct_not_in|fact"><span class="entity_def" id="Multiset.disjunct_not_in|thm"><span>disjunct_not_in</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="var"><span>?Q</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?P</span></span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?Q</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="var"><span>?P</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min|const"><span>min</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.min_def|fact"><span>min_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?Q</span></span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?P</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="var"><span>?Q</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.inter_mset_empty_distrib_right|fact"><span class="entity_def" id="Multiset.inter_mset_empty_distrib_right|thm"><span>inter_mset_empty_distrib_right</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.disjunct_not_in|fact"><span>disjunct_not_in</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_iff|fact"><span>union_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.inter_mset_empty_distrib_left|fact"><span class="entity_def" id="Multiset.inter_mset_empty_distrib_left|thm"><span>inter_mset_empty_distrib_left</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.disjunct_not_in|fact"><span>disjunct_not_in</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_iff|fact"><span>union_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_inter_add_mset|fact"><span class="entity_def" id="Multiset.add_mset_inter_add_mset|thm"><span>add_mset_inter_add_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_disjoint|fact"><span class="entity_def" id="Multiset.add_mset_disjoint(2)|thm"><span class="entity_def" id="Multiset.add_mset_disjoint(1)|thm"><span>add_mset_disjoint</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.disjunct_not_in|fact"><span>disjunct_not_in</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.disjoint_add_mset|fact"><span class="entity_def" id="Multiset.disjoint_add_mset(2)|thm"><span class="entity_def" id="Multiset.disjoint_add_mset(1)|thm"><span>disjoint_add_mset</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.disjunct_not_in|fact"><span>disjunct_not_in</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.inter_add_left1|fact"><span class="entity_def" id="Multiset.inter_add_left1|thm"><span>inter_add_left1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.inter_add_left2|fact"><span class="entity_def" id="Multiset.inter_add_left2|thm"><span>inter_add_left2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_add|fact"><span>mset_add</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.inter_add_right1|fact"><span class="entity_def" id="Multiset.inter_add_right1|thm"><span>inter_add_right1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.inter_add_right2|fact"><span class="entity_def" id="Multiset.inter_add_right2|thm"><span>inter_add_right2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_add|fact"><span>mset_add</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24236..24241">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.disjunct_set_mset_diff|fact"><span class="entity_def" id="Multiset.disjunct_set_mset_diff|thm"><span>disjunct_set_mset_diff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eqI|fact"><span>set_eqI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_24236..24241"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.disjunct_not_in|fact"><span>disjunct_not_in</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_diffD|fact"><span>in_diffD</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_diff_count|fact"><span>in_diff_count</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24536..24541">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.at_most_one_mset_mset_diff|fact"><span class="entity_def" id="Multiset.at_most_one_mset_mset_diff|thm"><span>at_most_one_mset_mset_diff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_24536..24541"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_diff_count|fact"><span>in_diff_count</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_24718..24723">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.more_than_one_mset_mset_diff|fact"><span class="entity_def" id="Multiset.more_than_one_mset_mset_diff|thm"><span>more_than_one_mset_mset_diff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eqI|fact"><span>set_eqI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>b</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/arith_data.ML.html#Rings.arith|method"><span class="operator"><span>arith</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_24718..24723"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_diff_count|fact"><span>in_diff_count</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.inter_iff|fact"><span class="entity_def" id="Multiset.inter_iff|thm"><span>inter_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.inter_union_distrib_left|fact"><span class="entity_def" id="Multiset.inter_union_distrib_left|thm"><span>inter_union_distrib_left</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_imp_le_class.min_add_distrib_left|fact"><span>min_add_distrib_left</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.inter_union_distrib_right|fact"><span class="entity_def" id="Multiset.inter_union_distrib_right|thm"><span>inter_union_distrib_right</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_union_distrib_left|fact"><span>inter_union_distrib_left</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span> </span><span class="quoted"><span class="free"><span>C</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.inter_subset_eq_union|fact"><span class="entity_def" id="Multiset.inter_subset_eq_union|thm"><span>inter_subset_eq_union</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Additional bounded union facts</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_sup|fact"><span class="entity_def" id="Multiset.set_mset_sup|thm"><span>set_mset_sup</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>B</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_def|fact"><span>set_mset_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.linorder_class.less_max_iff_disj|fact"><span>less_max_iff_disj</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.sup_union_left1|fact"><span class="entity_def" id="Multiset.sup_union_left1|thm"><span>sup_union_left1</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.sup_union_left2|fact"><span class="entity_def" id="Multiset.sup_union_left2|thm"><span>sup_union_left2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.sup_union_right1|fact"><span class="entity_def" id="Multiset.sup_union_right1|thm"><span>sup_union_right1</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.sup_union_right2|fact"><span class="entity_def" id="Multiset.sup_union_right2|thm"><span>sup_union_right2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.sup_union_distrib_left|fact"><span class="entity_def" id="Multiset.sup_union_distrib_left|thm"><span>sup_union_distrib_left</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add_imp_le_class.max_add_distrib_left|fact"><span>max_add_distrib_left</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_sup_distrib_right|fact"><span class="entity_def" id="Multiset.union_sup_distrib_right|thm"><span>union_sup_distrib_right</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.sup_union_distrib_left|fact"><span>sup_union_distrib_left</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span> </span><span class="quoted"><span class="free"><span>C</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_diff_inter_eq_sup|fact"><span class="entity_def" id="Multiset.union_diff_inter_eq_sup|thm"><span>union_diff_inter_eq_sup</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_diff_sup_eq_inter|fact"><span class="entity_def" id="Multiset.union_diff_sup_eq_inter|thm"><span>union_diff_sup_eq_inter</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_union|fact"><span class="entity_def" id="Multiset.add_mset_union|thm"><span>add_mset_union</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.max_def|fact"><span>max_def</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Replicate and repeat operations</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.replicate_mset_def|fact"><span class="entity_def" id="Multiset.replicate_mset_def|thm"><span class="entity_def" id="Multiset.replicate_mset_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.replicate_mset|const"><span>replicate_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>replicate_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.replicate_mset_0|fact"><span class="entity_def" id="Multiset.replicate_mset_0|thm"><span>replicate_mset_0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset_def|fact"><span>replicate_mset_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.replicate_mset_Suc|fact"><span class="entity_def" id="Multiset.replicate_mset_Suc|thm"><span>replicate_mset_Suc</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset_def|fact"><span>replicate_mset_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_replicate_mset|fact"><span class="entity_def" id="Multiset.count_replicate_mset|thm"><span>count_replicate_mset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset_def|fact"><span>replicate_mset_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.repeat_mset.rep_eq|fact"><span class="entity_def" id="Multiset.repeat_mset.abs_eq|fact"><span class="entity_def" id="Multiset.repeat_mset.transfer|fact"><span class="entity_def" id="Multiset.repeat_mset.rsp|fact"><span class="entity_def" id="Multiset.repeat_mset_def|fact"><span class="entity_def" id="Multiset.repeat_mset.rep_eq|thm"><span class="entity_def" id="Multiset.repeat_mset.abs_eq|thm"><span class="entity_def" id="Multiset.repeat_mset.transfer|thm"><span class="entity_def" id="Multiset.repeat_mset.rsp|thm"><span class="entity_def" id="Multiset.repeat_mset_def|thm"><span class="entity_def" id="Multiset.repeat_mset_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset|const"><span>repeat_mset</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>λ</span></span><span class="bound"><span>n</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>a</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_repeat_mset|fact"><span class="entity_def" id="Multiset.count_repeat_mset|thm"><span>count_repeat_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Transfer/transfer.ML.html#Transfer.transfer|method"><span class="operator"><span>transfer</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset_0|fact"><span class="entity_def" id="Multiset.repeat_mset_0|thm"><span>repeat_mset_0</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Transfer/transfer.ML.html#Transfer.transfer|method"><span class="operator"><span>transfer</span></span></a><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset_Suc|fact"><span class="entity_def" id="Multiset.repeat_mset_Suc|thm"><span>repeat_mset_Suc</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>M</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Transfer/transfer.ML.html#Transfer.transfer|method"><span class="operator"><span>transfer</span></span></a><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset_right|fact"><span class="entity_def" id="Multiset.repeat_mset_right|thm"><span>repeat_mset_right</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.comm_semiring_1_cancel_class.left_diff_distrib&apos;|fact"><span>left_diff_distrib'</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.left_diff_repeat_mset_distrib&apos;|fact"><span class="entity_def" id="Multiset.left_diff_repeat_mset_distrib&apos;|thm"><span>left_diff_repeat_mset_distrib'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>u</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.comm_semiring_1_cancel_class.left_diff_distrib&apos;|fact"><span>left_diff_distrib'</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.left_add_mult_distrib_mset|fact"><span class="entity_def" id="Multiset.left_add_mult_distrib_mset|thm"><span>left_add_mult_distrib_mset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.add_mult_distrib|fact"><span>add_mult_distrib</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset_distrib|fact"><span class="entity_def" id="Multiset.repeat_mset_distrib|thm"><span>repeat_mset_distrib</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.add_mult_distrib|fact"><span>Nat.add_mult_distrib</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset_distrib2|fact"><span class="entity_def" id="Multiset.repeat_mset_distrib2|thm"><span>repeat_mset_distrib2</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.add_mult_distrib2|fact"><span>add_mult_distrib2</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset_replicate_mset|fact"><span class="entity_def" id="Multiset.repeat_mset_replicate_mset|thm"><span>repeat_mset_replicate_mset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset_distrib_add_mset|fact"><span class="entity_def" id="Multiset.repeat_mset_distrib_add_mset|thm"><span>repeat_mset_distrib_add_mset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset_empty|fact"><span class="entity_def" id="Multiset.repeat_mset_empty|thm"><span>repeat_mset_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Transfer/transfer.ML.html#Transfer.transfer|method"><span class="operator"><span>transfer</span></span></a><span> </span><span class="operator"><span>simp</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Simprocs</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset_iterate_add|fact"><span class="entity_def" id="Multiset.repeat_mset_iterate_add|thm"><span>repeat_mset_iterate_add</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.iterate_add|const"><span>iterate_add</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>M</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.iterate_add_def|fact"><span>iterate_add_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subseteq_add_iff1|fact"><span class="entity_def" id="Multiset.mset_subseteq_add_iff1|thm"><span>mset_subseteq_add_iff1</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Numeral_Simprocs.html#Numeral_Simprocs.nat_le_add_iff1|fact"><span>nat_le_add_iff1</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subseteq_add_iff2|fact"><span class="entity_def" id="Multiset.mset_subseteq_add_iff2|thm"><span>mset_subseteq_add_iff2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Numeral_Simprocs.html#Numeral_Simprocs.nat_le_add_iff2|fact"><span>nat_le_add_iff2</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_add_iff1|fact"><span class="entity_def" id="Multiset.mset_subset_add_iff1|thm"><span>mset_subset_add_iff1</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset_iterate_add|fact"><span>repeat_mset_iterate_add</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.iterate_add_eq_add_iff1|fact"><span>iterate_add_eq_add_iff1</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subseteq_add_iff1|fact"><span>mset_subseteq_add_iff1</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset_iterate_add|fact"><span>repeat_mset_iterate_add</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_add_iff2|fact"><span class="entity_def" id="Multiset.mset_subset_add_iff2|thm"><span>mset_subset_add_iff2</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>u</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset_iterate_add|fact"><span>repeat_mset_iterate_add</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.iterate_add_eq_add_iff2|fact"><span>iterate_add_eq_add_iff2</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subseteq_add_iff2|fact"><span>mset_subseteq_add_iff2</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset_iterate_add|fact"><span>repeat_mset_iterate_add</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>ML_file</span></span></span><span> </span><span class="quoted"><a href="ISABELLE_HOME/src/HOL/Library/multiset_simprocs.ML.html"><span>‹</span><span>multiset_simprocs.ML</span><span>›</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.add_mset_replicate_mset_safe|fact"><span class="entity_def" id="Multiset.add_mset_replicate_mset_safe|thm"><span>add_mset_replicate_mset_safe</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.cancelation_simproc_pre|attribute"><span class="operator"><span>cancelation_simproc_pre</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.NO_MATCH|const"><span>NO_MATCH</span></a><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>M</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset_iterate_add|fact"><span>repeat_mset_iterate_add</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.cancelation_simproc_pre|attribute"><span class="operator"><span>cancelation_simproc_pre</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.iterate_add_distrib|fact"><span>iterate_add_distrib</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.cancelation_simproc_pre|attribute"><span class="operator"><span>cancelation_simproc_pre</span></span></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset_iterate_add|fact"><span>repeat_mset_iterate_add</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.cancelation_simproc_post|attribute"><span class="operator"><span>cancelation_simproc_post</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_not_empty|fact"><span>add_mset_not_empty</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.cancelation_simproc_eq_elim|attribute"><span class="operator"><span>cancelation_simproc_eq_elim</span></span></a><span class="main"><span>]</span></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_not_add_mset|fact"><span>empty_not_add_mset</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.cancelation_simproc_eq_elim|attribute"><span class="operator"><span>cancelation_simproc_eq_elim</span></span></a><span class="main"><span>]</span></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.le_zero_eq|fact"><span>subset_mset.le_zero_eq</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.cancelation_simproc_eq_elim|attribute"><span class="operator"><span>cancelation_simproc_eq_elim</span></span></a><span class="main"><span>]</span></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_not_add_mset|fact"><span>empty_not_add_mset</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.cancelation_simproc_eq_elim|attribute"><span class="operator"><span>cancelation_simproc_eq_elim</span></span></a><span class="main"><span>]</span></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_not_empty|fact"><span>add_mset_not_empty</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.cancelation_simproc_eq_elim|attribute"><span class="operator"><span>cancelation_simproc_eq_elim</span></span></a><span class="main"><span>]</span></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.le_zero_eq|fact"><span>subset_mset.le_zero_eq</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.cancelation_simproc_eq_elim|attribute"><span class="operator"><span>cancelation_simproc_eq_elim</span></span></a><span class="main"><span>]</span></span><span>
    </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.canonically_ordered_monoid_add_class.le_zero_eq|fact"><span>le_zero_eq</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="HOL-Library.Cancellation.html#Cancellation.cancelation_simproc_eq_elim|attribute"><span class="operator"><span>cancelation_simproc_eq_elim</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>simproc_setup</span></span></span><span> </span><span>mseteq_cancel</span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="quoted"><span>‹</span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>phi</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>Cancel_Simprocs.eq_cancel</span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>simproc_setup</span></span></span><span> </span><span>msetsubset_cancel</span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="quoted"><span>‹</span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>phi</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>Multiset_Simprocs.subset_cancel_msets</span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>simproc_setup</span></span></span><span> </span><span>msetsubset_eq_cancel</span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="quoted"><span>‹</span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>phi</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>Multiset_Simprocs.subseteq_cancel_msets</span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>simproc_setup</span></span></span><span> </span><span>msetdiff_cancel</span><span>
  </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="quoted"><span>‹</span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>phi</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>Cancel_Simprocs.diff_cancel</span></span><span>›</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Conditionally complete lattice</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.type|class"><span>type</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf|class"><span>Inf</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.Inf_multiset.rep_eq|fact"><span class="entity_def" id="Multiset.Inf_multiset.abs_eq|fact"><span class="entity_def" id="Multiset.Inf_multiset.transfer|fact"><span class="entity_def" id="Multiset.Inf_multiset.rsp|fact"><span class="entity_def" id="Multiset.Inf_multiset_def|fact"><span class="entity_def" id="Multiset.Inf_multiset_inst.Inf_multiset|fact"><span class="entity_def" id="Multiset.Inf_multiset.rep_eq|thm"><span class="entity_def" id="Multiset.Inf_multiset.abs_eq|thm"><span class="entity_def" id="Multiset.Inf_multiset.transfer|thm"><span class="entity_def" id="Multiset.Inf_multiset.rsp|thm"><span class="entity_def" id="Multiset.Inf_multiset_def|thm"><span class="entity_def" id="Multiset.Inf_multiset_inst.Inf_multiset|thm"><span class="entity_def" id="Multiset.Inf_multiset_def|axiom"><span class="entity_def" id="Multiset.Inf_multiset_inst.Inf_multiset_def|axiom"><span class="entity_def" id="Multiset.Inf_multiset_inst.Inf_multiset|const"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="class_parameter"><span>Inf_multiset</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>A</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_31911..31912">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>INF</span></span><span> </span><span class="bound"><span>f</span></span><span class="main"><span>∈</span></span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_32044..32049">False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>f</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_le_trans|fact"><span>less_le_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cInf_lower|fact"><span>cInf_lower</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>A</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_31911..31912"><span>*</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>…</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>f</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_32044..32049"><span>False</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.arity_Inf_multiset|fact"><span class="entity_def" id="Multiset.arity_Inf_multiset|thm"><span>instance</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.Inf_multiset_empty|fact"><span class="entity_def" id="Multiset.Inf_multiset_empty|thm"><span>Inf_multiset_empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Transfer/transfer.ML.html#Transfer.transfer|method"><span class="operator"><span>transfer</span></span></a><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_Inf_multiset_nonempty|fact"><span class="entity_def" id="Multiset.count_Inf_multiset_nonempty|thm"><span>count_Inf_multiset_nonempty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Transfer/transfer.ML.html#Transfer.transfer|method"><span class="operator"><span>transfer</span></span></a><span> </span><span class="operator"><span>simp_all</span></span><span>


</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.type|class"><span>type</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup|class"><span>Sup</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.Sup_multiset_def|fact"><span class="entity_def" id="Multiset.Sup_multiset_inst.Sup_multiset|fact"><span class="entity_def" id="Multiset.Sup_multiset_def|thm"><span class="entity_def" id="Multiset.Sup_multiset_inst.Sup_multiset|thm"><span class="entity_def" id="Multiset.Sup_multiset_def_raw|axiom"><span class="entity_def" id="Multiset.Sup_multiset_inst.Sup_multiset_def|axiom"><span class="entity_def" id="Multiset.Sup_multiset_inst.Sup_multiset|const"><span class="entity_def" id="offset_32633..32643">definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="class_parameter"><span>Sup_multiset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Sup_multiset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above|const"><span>subset_mset.bdd_above</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span>
           </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.Abs_multiset|const"><span>Abs_multiset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.Sup_multiset_empty|fact"><span class="entity_def" id="Multiset.Sup_multiset_empty|thm"><span>Sup_multiset_empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_32633..32643"><span>Sup_multiset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.Sup_multiset_unbounded|fact"><span class="entity_def" id="Multiset.Sup_multiset_unbounded|thm"><span>Sup_multiset_unbounded</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above|const"><span>subset_mset.bdd_above</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_32633..32643"><span>Sup_multiset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.arity_Sup_multiset|fact"><span class="entity_def" id="Multiset.arity_Sup_multiset|thm"><span>instance</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_33029..33034">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.bdd_above_multiset_imp_bdd_above_count|fact"><span class="entity_def" id="Multiset.bdd_above_multiset_imp_bdd_above_count|thm"><span>bdd_above_multiset_imp_bdd_above_count</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above|const"><span>subset_mset.bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_above|const"><span>bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_33029..33034"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>Y</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above.E|fact"><span>subset_mset.bdd_above.E</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_33271..33276">hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>X</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_33271..33276"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_count|fact"><span>mset_subset_eq_count</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.preorder_class.bdd_aboveI|fact"><span>bdd_aboveI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a></a></a><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>Y</span></span></span></span><span> </span><span class="free"><span class="free"><span class="free"><span>x</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_33436..33441">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.bdd_above_multiset_imp_finite_support|fact"><span class="entity_def" id="Multiset.bdd_above_multiset_imp_finite_support|thm"><span>bdd_above_multiset_imp_finite_support</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above|const"><span>subset_mset.bdd_above</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_33436..33441"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>Y</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="skolem"><span>Y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above.E|fact"><span>subset_mset.bdd_above.E</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_33688..33693">hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_33688..33693"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_count|fact"><span>mset_subset_eq_count</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_le_trans|fact"><span>less_le_trans</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>…</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_33972..33977">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.Sup_multiset_in_multiset|fact"><span class="entity_def" id="Multiset.Sup_multiset_in_multiset|thm"><span>Sup_multiset_in_multiset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SUP</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above|const"><span>subset_mset.bdd_above</span></a><span> </span><span class="free"><span>A</span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_34196..34199">pos</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>SUP</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ccontr|fact"><span>ccontr</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_eq_zero_iff|fact"><span>count_eq_zero_iff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_33972..33977"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>SUP</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="skolem"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSup_least|fact"><span>cSup_least</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.bdd_above_multiset_imp_bdd_above_count|fact"><span>bdd_above_multiset_imp_bdd_above_count</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_34196..34199"><span>pos</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_33972..33977"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>…</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.bdd_above_multiset_imp_finite_support|fact"><span>bdd_above_multiset_imp_finite_support</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_34762..34767">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_Sup_multiset_nonempty|fact"><span class="entity_def" id="Multiset.count_Sup_multiset_nonempty|thm"><span>count_Sup_multiset_nonempty</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SUP</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above|const"><span>subset_mset.bdd_above</span></a><span> </span><span class="free"><span>A</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_34762..34767"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Sup_multiset_def|fact"><span>Sup_multiset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Sup_multiset_in_multiset|fact"><span>Sup_multiset_in_multiset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_Abs_multiset|fact"><span>count_Abs_multiset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subset_mset.mono_cSUP|fact"><span class="entity_def" id="Multiset.subset_mset.mono_cINF|fact"><span class="entity_def" id="Multiset.subset_mset.mono_cSup|fact"><span class="entity_def" id="Multiset.subset_mset.mono_cInf|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_le_cSup|fact"><span class="entity_def" id="Multiset.subset_mset.SUP_sup_distrib|fact"><span class="entity_def" id="Multiset.subset_mset.cINF_inf_distrib|fact"><span class="entity_def" id="Multiset.subset_mset.cSUP_union|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_union_distrib|fact"><span class="entity_def" id="Multiset.subset_mset.cINF_union|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_union_distrib|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_inter_less_eq|fact"><span class="entity_def" id="Multiset.subset_mset.less_eq_cInf_inter|fact"><span class="entity_def" id="Multiset.subset_mset.cSUP_subset_mono|fact"><span class="entity_def" id="Multiset.subset_mset.cINF_superset_mono|fact"><span class="entity_def" id="Multiset.subset_mset.cSUP_mono|fact"><span class="entity_def" id="Multiset.subset_mset.cINF_mono|fact"><span class="entity_def" id="Multiset.subset_mset.cSUP_insert|fact"><span class="entity_def" id="Multiset.subset_mset.cINF_insert|fact"><span class="entity_def" id="Multiset.subset_mset.cSUP_lessD|fact"><span class="entity_def" id="Multiset.subset_mset.less_cINF_D|fact"><span class="entity_def" id="Multiset.subset_mset.cSUP_le_iff|fact"><span class="entity_def" id="Multiset.subset_mset.le_cINF_iff|fact"><span class="entity_def" id="Multiset.subset_mset.cINF_const|fact"><span class="entity_def" id="Multiset.subset_mset.cSUP_const|fact"><span class="entity_def" id="Multiset.subset_mset.cSUP_upper2|fact"><span class="entity_def" id="Multiset.subset_mset.cINF_lower2|fact"><span class="entity_def" id="Multiset.subset_mset.cSUP_least|fact"><span class="entity_def" id="Multiset.subset_mset.cSUP_upper|fact"><span class="entity_def" id="Multiset.subset_mset.cINF_greatest|fact"><span class="entity_def" id="Multiset.subset_mset.cINF_lower|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_atLeastAtMost|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_atLeastLessThan|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_atLeast|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_atLeastAtMost|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_greaterThanAtMost|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_atMost|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_eq_Inf_fin|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_eq_Sup_fin|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_le_finite|fact"><span class="entity_def" id="Multiset.subset_mset.le_cSup_finite|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_insert_If|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_insert_If|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_singleton|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_singleton|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_insert|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_insert|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_cInf|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_cSup|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_eq_non_empty|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_eq_non_empty|fact"><span class="entity_def" id="Multiset.subset_mset.le_cInf_iff|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_le_iff|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_eq_minimum|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_eq_maximum|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_superset_mono|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_subset_mono|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_mono|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_mono|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_lower2|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_upper2|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_least|fact"><span class="entity_def" id="Multiset.subset_mset.cSup_upper|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_greatest|fact"><span class="entity_def" id="Multiset.subset_mset.cInf_lower|fact"><span class="entity_def" id="Multiset.subset_mset.conditionally_complete_lattice_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.mono_cSUP|thm"><span class="entity_def" id="Multiset.subset_mset.mono_cINF|thm"><span class="entity_def" id="Multiset.subset_mset.mono_cSup|thm"><span class="entity_def" id="Multiset.subset_mset.mono_cInf|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_le_cSup|thm"><span class="entity_def" id="Multiset.subset_mset.SUP_sup_distrib|thm"><span class="entity_def" id="Multiset.subset_mset.cINF_inf_distrib|thm"><span class="entity_def" id="Multiset.subset_mset.cSUP_union|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_union_distrib|thm"><span class="entity_def" id="Multiset.subset_mset.cINF_union|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_union_distrib|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_inter_less_eq|thm"><span class="entity_def" id="Multiset.subset_mset.less_eq_cInf_inter|thm"><span class="entity_def" id="Multiset.subset_mset.cSUP_subset_mono|thm"><span class="entity_def" id="Multiset.subset_mset.cINF_superset_mono|thm"><span class="entity_def" id="Multiset.subset_mset.cSUP_mono|thm"><span class="entity_def" id="Multiset.subset_mset.cINF_mono|thm"><span class="entity_def" id="Multiset.subset_mset.cSUP_insert|thm"><span class="entity_def" id="Multiset.subset_mset.cINF_insert|thm"><span class="entity_def" id="Multiset.subset_mset.cSUP_lessD|thm"><span class="entity_def" id="Multiset.subset_mset.less_cINF_D|thm"><span class="entity_def" id="Multiset.subset_mset.cSUP_le_iff|thm"><span class="entity_def" id="Multiset.subset_mset.le_cINF_iff|thm"><span class="entity_def" id="Multiset.subset_mset.cSUP_upper2|thm"><span class="entity_def" id="Multiset.subset_mset.cINF_lower2|thm"><span class="entity_def" id="Multiset.subset_mset.cSUP_least|thm"><span class="entity_def" id="Multiset.subset_mset.cSUP_upper|thm"><span class="entity_def" id="Multiset.subset_mset.cINF_greatest|thm"><span class="entity_def" id="Multiset.subset_mset.cINF_lower|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_eq_Inf_fin|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_eq_Sup_fin|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_le_finite|thm"><span class="entity_def" id="Multiset.subset_mset.le_cSup_finite|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_insert_If|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_insert_If|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_insert|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_insert|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_cInf|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_cSup|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_eq_non_empty|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_eq_non_empty|thm"><span class="entity_def" id="Multiset.subset_mset.le_cInf_iff|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_le_iff|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_eq_minimum|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_eq_maximum|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_superset_mono|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_subset_mono|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_mono|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_mono|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_lower2|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_upper2|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_least|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_upper|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_lower|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_greatest|thm"><span class="entity_def" id="Multiset.subset_mset.cINF_const|thm"><span class="entity_def" id="Multiset.subset_mset.cSUP_const|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_atLeastAtMost|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_atLeastLessThan|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_atLeast|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_atLeastAtMost|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_greaterThanAtMost|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_atMost|thm"><span class="entity_def" id="Multiset.subset_mset.cInf_singleton|thm"><span class="entity_def" id="Multiset.subset_mset.cSup_singleton|thm"><span class="entity_def" id="Multiset.subset_mset.conditionally_complete_lattice_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> subset_mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice|locale"><span>conditionally_complete_lattice</span></a><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>(∩#)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>(⊆#)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>(⊂#)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>(∪#)</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>A</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eqI|fact"><span>mset_subset_eqI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>A</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>INF</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_Inf_multiset_nonempty|fact"><span>count_Inf_multiset_nonempty</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>A</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cInf_lower|fact"><span>cInf_lower</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>A</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_35499..35507">nonempty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_35522..35524">le</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>Y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="bound"><span>Y</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eqI|fact"><span>mset_subset_eqI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_35499..35507"><span>nonempty</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>INF</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cInf_greatest|fact"><span>cInf_greatest</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_count|fact"><span>mset_subset_eq_count</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_35522..35524"><span>le</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_35499..35507"><span>nonempty</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_Inf_multiset_nonempty|fact"><span>count_Inf_multiset_nonempty</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>A</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_35928..35929">X</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_35943..35946">bdd</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above|const"><span>subset_mset.bdd_above</span></a><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eqI|fact"><span>mset_subset_eqI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_35928..35929"><span>X</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SUP</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSUP_upper|fact"><span>cSUP_upper</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_35928..35929"><span>X</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.bdd_above_multiset_imp_bdd_above_count|fact"><span>bdd_above_multiset_imp_bdd_above_count</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_35943..35946"><span>bdd</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_Sup_multiset_nonempty|fact"><span>count_Sup_multiset_nonempty</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_35943..35946"><span>bdd</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>SUP</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>A</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_36404..36412">nonempty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_36427..36429">ge</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>Y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_36427..36429"><span>ge</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_36467..36470">bdd</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above|const"><span>subset_mset.bdd_above</span></a><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eqI|fact"><span>mset_subset_eqI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_Sup_multiset_nonempty|fact"><span>count_Sup_multiset_nonempty</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_36467..36470"><span>bdd</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>SUP</span></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="bound"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_36404..36412"><span>nonempty</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Conditionally_Complete_Lattices.html#Conditionally_Complete_Lattices.conditionally_complete_lattice_class.cSup_least|fact"><span>cSup_least</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_count|fact"><span>mset_subset_eq_count</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_36427..36429"><span>ge</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>FIXME: avoid junk stemming from type class interpretation</span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_36912..36917">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_Inf|fact"><span class="entity_def" id="Multiset.set_mset_Inf|thm"><span>set_mset_Inf</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋂</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span>nonempty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Inf_multiset_empty|fact"><span>Inf_multiset_empty</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="free"><span>A</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.cInf_lower|fact"><span>subset_mset.cInf_lower</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋂</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_37320..37325">hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_37320..37325"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_36912..36917"><span>assms</span></a><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_37320..37325"><span>this</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.cInf_greatest|fact"><span>subset_mset.cInf_greatest</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_37488..37493">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_Inf_multiset_iff|fact"><span class="entity_def" id="Multiset.in_Inf_multiset_iff|thm"><span>in_Inf_multiset_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_37488..37493"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋂</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_Inf|fact"><span>set_mset_Inf</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_Inf_multisetD|fact"><span class="entity_def" id="Multiset.in_Inf_multisetD|thm"><span>in_Inf_multisetD</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span class="quasi_keyword"><span>asm</span></span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_Inf_multiset_iff|fact"><span>in_Inf_multiset_iff</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_37837..37842">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_Sup|fact"><span class="entity_def" id="Multiset.set_mset_Sup|thm"><span>set_mset_Sup</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above|const"><span>subset_mset.bdd_above</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_37990..37998">nonempty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Sup_multiset_empty|fact"><span>Sup_multiset_empty</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ccontr|fact"><span>ccontr</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_38109..38110">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_38141..38145">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>x</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_38141..38145"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_count|fact"><span>mset_subset_eq_count</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.cSup_upper|fact"><span>subset_mset.cSup_upper</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_37837..37842"><span>assms</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_38109..38110"><span>x</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_38284..38288">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>X</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_38284..38288"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.cSup_least|fact"><span>subset_mset.cSup_least</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_37990..37998"><span>nonempty</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_greater_zero_iff|fact"><span>count_greater_zero_iff</span></a><span>
               </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>x</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.cSup_upper|fact"><span>subset_mset.cSup_upper</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_37837..37842"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_38829..38834">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_Sup_multiset_iff|fact"><span class="entity_def" id="Multiset.in_Sup_multiset_iff|thm"><span>in_Sup_multiset_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above|const"><span>subset_mset.bdd_above</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_38829..38834"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_Sup|fact"><span>set_mset_Sup</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="bound"><span>X</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_39096..39101">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_Sup_multisetD|fact"><span class="entity_def" id="Multiset.in_Sup_multisetD|thm"><span>in_Sup_multisetD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>X</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="bound"><span>X</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.bdd_above|const"><span>subset_mset.bdd_above</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ccontr|fact"><span>ccontr</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>insert</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_39096..39101"><span>assms</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Sup_multiset_unbounded|fact"><span>Sup_multiset_unbounded</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_39096..39101"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_Sup_multiset_iff|fact"><span>in_Sup_multiset_iff</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subset_mset.inf_Sup2_distrib|fact"><span class="entity_def" id="Multiset.subset_mset.inf_Sup1_distrib|fact"><span class="entity_def" id="Multiset.subset_mset.sup_Inf2_distrib|fact"><span class="entity_def" id="Multiset.subset_mset.sup_Inf1_distrib|fact"><span class="entity_def" id="Multiset.subset_mset.distrib|fact"><span class="entity_def" id="Multiset.subset_mset.inf_sup_distrib|fact"><span class="entity_def" id="Multiset.subset_mset.sup_inf_distrib|fact"><span class="entity_def" id="Multiset.subset_mset.dual_distrib_lattice|fact"><span class="entity_def" id="Multiset.subset_mset.inf_sup_distrib2|fact"><span class="entity_def" id="Multiset.subset_mset.inf_sup_distrib1|fact"><span class="entity_def" id="Multiset.subset_mset.sup_inf_distrib2|fact"><span class="entity_def" id="Multiset.subset_mset.sup_inf_distrib1|fact"><span class="entity_def" id="Multiset.subset_mset.distrib_lattice_axioms|fact"><span class="entity_def" id="Multiset.subset_mset.inf_Sup2_distrib|thm"><span class="entity_def" id="Multiset.subset_mset.inf_Sup1_distrib|thm"><span class="entity_def" id="Multiset.subset_mset.sup_Inf2_distrib|thm"><span class="entity_def" id="Multiset.subset_mset.sup_Inf1_distrib|thm"><span class="entity_def" id="Multiset.subset_mset.distrib(4)|thm"><span class="entity_def" id="Multiset.subset_mset.distrib(3)|thm"><span class="entity_def" id="Multiset.subset_mset.distrib(2)|thm"><span class="entity_def" id="Multiset.subset_mset.distrib(1)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_distrib(2)|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_distrib(1)|thm"><span class="entity_def" id="Multiset.subset_mset.sup_inf_distrib(2)|thm"><span class="entity_def" id="Multiset.subset_mset.sup_inf_distrib(1)|thm"><span class="entity_def" id="Multiset.subset_mset.dual_distrib_lattice|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_distrib2|thm"><span class="entity_def" id="Multiset.subset_mset.inf_sup_distrib1|thm"><span class="entity_def" id="Multiset.subset_mset.sup_inf_distrib2|thm"><span class="entity_def" id="Multiset.subset_mset.sup_inf_distrib1|thm"><span class="entity_def" id="Multiset.subset_mset.distrib_lattice_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> subset_mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.distrib_lattice|locale"><span>distrib_lattice</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>(∩#)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>(⊆#)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>(⊂#)</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>(∪#)</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="skolem"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>FIXME: avoid junk stemming from type class interpretation</span><span>›</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Filter (with comprehension syntax)</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Multiset comprehension</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.filter_mset.rep_eq|fact"><span class="entity_def" id="Multiset.filter_mset.abs_eq|fact"><span class="entity_def" id="Multiset.filter_mset.transfer|fact"><span class="entity_def" id="Multiset.filter_mset.rsp|fact"><span class="entity_def" id="Multiset.filter_mset_def|fact"><span class="entity_def" id="Multiset.filter_mset.rep_eq|thm"><span class="entity_def" id="Multiset.filter_mset.abs_eq|thm"><span class="entity_def" id="Multiset.filter_mset.transfer|thm"><span class="entity_def" id="Multiset.filter_mset.rsp|thm"><span class="entity_def" id="Multiset.filter_mset_def|thm"><span class="entity_def" id="Multiset.filter_mset_def|axiom"><span>lift_definition</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Multiset.filter_mset|const"><span>filter_mset</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>P</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_preserves_multiset|fact"><span>filter_preserves_multiset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span> </span><span class="main"><span>(</span></span><span>ASCII</span><span class="main"><span>)</span></span><span>
  </span><span class="quoted"><span>"</span><span>_MCollect</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>pttrn</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>    </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(1</span></span><span class="keyword1"><span>{#</span></span><span>_</span><span> </span><span class="keyword1"><span>:#</span></span><span> </span><span>_</span><span class="keyword1"><span>.</span></span><span class="keyword3"><span>/ </span></span><span>_</span><span class="keyword1"><span>#}</span></span><span class="keyword3"><span>)</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span>
  </span><span class="quoted"><span>"</span><span>_MCollect</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>pttrn</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>    </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(1</span></span><span class="keyword1"><span>{#</span></span><span>_</span><span> </span><span class="keyword1"><span>∈#</span></span><span> </span><span>_</span><span class="keyword1"><span>.</span></span><span class="keyword3"><span>/ </span></span><span>_</span><span class="keyword1"><span>#}</span></span><span class="keyword3"><span>)</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>translations</span></span></span><span>
  </span><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>#}</span></span><span>"</span></span><span> </span><span class="main"><span>==</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="free"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_filter_mset|fact"><span class="entity_def" id="Multiset.count_filter_mset|thm"><span>count_filter_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset.rep_eq|fact"><span>filter_mset.rep_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_filter|fact"><span class="entity_def" id="Multiset.set_mset_filter|thm"><span>set_mset_filter</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>a</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_greater_zero_iff|fact"><span>count_greater_zero_iff</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_filter_mset|fact"><span>count_filter_mset</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_empty_mset|fact"><span class="entity_def" id="Multiset.filter_empty_mset|thm"><span>filter_empty_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_single_mset|fact"><span class="entity_def" id="Multiset.filter_single_mset|thm"><span>filter_single_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_union_mset|fact"><span class="entity_def" id="Multiset.filter_union_mset|thm"><span>filter_union_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_diff_mset|fact"><span class="entity_def" id="Multiset.filter_diff_mset|thm"><span>filter_diff_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_inter_mset|fact"><span class="entity_def" id="Multiset.filter_inter_mset|thm"><span>filter_inter_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_sup_mset|fact"><span class="entity_def" id="Multiset.filter_sup_mset|thm"><span>filter_sup_mset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_mset_add_mset|fact"><span class="entity_def" id="Multiset.filter_mset_add_mset|thm"><span>filter_mset_add_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
     </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
   </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_filter_subset|fact"><span class="entity_def" id="Multiset.multiset_filter_subset|thm"><span>multiset_filter_subset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eqI|fact"><span>mset_subset_eqI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_41358..41363">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_filter_mono|fact"><span class="entity_def" id="Multiset.multiset_filter_mono|thm"><span>multiset_filter_mono</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_41358..41363"><span>assms</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_exists_conv|fact"><span>mset_subset_eq_exists_conv</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>C</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_41525..41526">B</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_41525..41526"><span>B</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_mset_eq_conv|fact"><span class="entity_def" id="Multiset.filter_mset_eq_conv|thm"><span>filter_mset_eq_conv</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>b</span></span><span class="main"><span>∈#</span></span><span class="free"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span class="main"><span>∈#</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="var"><span>?Q</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?P</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?Q</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_diff_count|fact"><span>in_diff_count</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?Q</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Q</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_41819..41820">M</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_exists_conv|fact"><span>mset_subset_eq_exists_conv</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_41897..41899">MN</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?P</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="var"><span>?Q</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_41897..41899"><span>MN</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_41991..41992">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="skolem"><span>Q</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_41991..41992"><span>*</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_41819..41820"><span>M</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_41819..41820"><span>M</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_filter_mset|fact"><span class="entity_def" id="Multiset.filter_filter_mset|thm"><span>filter_filter_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>
  </span><span class="entity_def" id="Multiset.filter_mset_True|fact"><span class="entity_def" id="Multiset.filter_mset_True|thm"><span>filter_mset_True</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
  </span><span class="entity_def" id="Multiset.filter_mset_False|fact"><span class="entity_def" id="Multiset.filter_mset_False|thm"><span>filter_mset_False</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_42599..42604">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_mset_cong0|fact"><span class="entity_def" id="Multiset.filter_mset_cong0|thm"><span>filter_mset_cong0</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.antisym|fact"><span>subset_mset.antisym</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>unfold</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.allI|fact"><span>allI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_42599..42604"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_42599..42604"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_43051..43056">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_mset_cong|fact"><span class="entity_def" id="Multiset.filter_mset_cong|thm"><span>filter_mset_cong</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>M'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M'</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_43051..43056"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset_cong0|fact"><span>filter_mset_cong0</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Size</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.wcount_def|fact"><span class="entity_def" id="Multiset.wcount_def|thm"><span class="entity_def" id="Multiset.wcount_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.wcount|const"><span>wcount</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wcount</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.wcount_union|fact"><span class="entity_def" id="Multiset.wcount_union|thm"><span>wcount_union</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount|const"><span>wcount</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount|const"><span>wcount</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount|const"><span>wcount</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount_def|fact"><span>wcount_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.add_mult_distrib|fact"><span>add_mult_distrib</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.wcount_add_mset|fact"><span class="entity_def" id="Multiset.wcount_add_mset|thm"><span>wcount_add_mset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount|const"><span>wcount</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount|const"><span>wcount</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_add_single|fact"><span>add_mset_add_single</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount_union|fact"><span>wcount_union</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount_def|fact"><span>wcount_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.size_multiset_def|fact"><span class="entity_def" id="Multiset.size_multiset_def|thm"><span class="entity_def" id="Multiset.size_multiset_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.size_multiset|const"><span>size_multiset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>size_multiset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum|const"><span>sum</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount|const"><span>wcount</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.size_multiset_eq|fact"><span class="entity_def" id="Multiset.size_multiset_eq|thm"><span>size_multiset_eq</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_def|fact"><span>size_multiset_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount_def|fact"><span>wcount_def</span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.type|class"><span>type</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size|class"><span>size</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.size_multiset_inst.size_multiset|fact"><span class="entity_def" id="Multiset.size_multiset_inst.size_multiset|thm"><span class="entity_def" id="Multiset.size_multiset_inst.size_multiset_def|axiom"><span class="entity_def" id="Multiset.size_multiset_inst.size_multiset|const"><span>definition</span></span></span></span></span></span></span><span> </span><span class="entity"><span class="class_parameter"><span>size_multiset</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="entity_def" id="Multiset.size_multiset_overloaded_def|fact"><span class="entity_def" id="Multiset.size_multiset_overloaded_def|thm"><span class="entity_def" id="Multiset.size_multiset_overloaded_def_raw|axiom"><span>size_multiset_overloaded_def</span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>size_multiset</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset|const"><span>Multiset.size_multiset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.arity_size_multiset|fact"><span class="entity_def" id="Multiset.arity_size_multiset|thm"><span>instance</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.size_multiset_overloaded_eq|fact"><span class="entity_def" id="Multiset.size_multiset_overloaded_eq|thm"><span>size_multiset_overloaded_eq</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_overloaded_def|fact"><span>size_multiset_overloaded_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_cong|fact"><span>fun_cong</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_eq|fact"><span>size_multiset_eq</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_multiset_empty|fact"><span class="entity_def" id="Multiset.size_multiset_empty|thm"><span>size_multiset_empty</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset|const"><span>size_multiset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_def|fact"><span>size_multiset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_empty|fact"><span class="entity_def" id="Multiset.size_empty|thm"><span>size_empty</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_overloaded_def|fact"><span>size_multiset_overloaded_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_multiset_single|fact"><span class="entity_def" id="Multiset.size_multiset_single|thm"><span>size_multiset_single</span></span></span><span> </span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset|const"><span>size_multiset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>b</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_eq|fact"><span>size_multiset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_single|fact"><span class="entity_def" id="Multiset.size_single|thm"><span>size_single</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>{#</span></span><span class="free"><span>b</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_overloaded_def|fact"><span>size_multiset_overloaded_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_single|fact"><span>size_multiset_single</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.sum_wcount_Int|fact"><span class="entity_def" id="Multiset.sum_wcount_Int|thm"><span>sum_wcount_Int</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum|const"><span>sum</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount|const"><span>wcount</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum|const"><span>sum</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount|const"><span>wcount</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_insert_left|fact"><span>Int_insert_left</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount_def|fact"><span>wcount_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_eq_zero_iff|fact"><span>count_eq_zero_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_multiset_union|fact"><span class="entity_def" id="Multiset.size_multiset_union|thm"><span>size_multiset_union</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset|const"><span>size_multiset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset|const"><span>size_multiset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset|const"><span>size_multiset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_def|fact"><span>size_multiset_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.sum_Un_nat|fact"><span>sum_Un_nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.distrib|fact"><span>sum.distrib</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.sum_wcount_Int|fact"><span>sum_wcount_Int</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount_union|fact"><span>wcount_union</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_commute|fact"><span>Int_commute</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.sum_wcount_Int|fact"><span>sum_wcount_Int</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_multiset_add_mset|fact"><span class="entity_def" id="Multiset.size_multiset_add_mset|thm"><span>size_multiset_add_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset|const"><span>size_multiset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset|const"><span>size_multiset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_add_single|fact"><span>add_mset_add_single</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_union|fact"><span>size_multiset_union</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_single|fact"><span>size_multiset_single</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_add_mset|fact"><span class="entity_def" id="Multiset.size_add_mset|thm"><span>size_add_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_overloaded_def|fact"><span>size_multiset_overloaded_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount_add_mset|fact"><span>wcount_add_mset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_union|fact"><span class="entity_def" id="Multiset.size_union|thm"><span>size_union</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_overloaded_def|fact"><span>size_multiset_overloaded_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_multiset_eq_0_iff_empty|fact"><span class="entity_def" id="Multiset.size_multiset_eq_0_iff_empty|thm"><span>size_multiset_eq_0_iff_empty</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset|const"><span>size_multiset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_eq|fact"><span>size_multiset_eq</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_eq_zero_iff|fact"><span>count_eq_zero_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_eq_0_iff_empty|fact"><span class="entity_def" id="Multiset.size_eq_0_iff_empty|thm"><span>size_eq_0_iff_empty</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_overloaded_def|fact"><span>size_multiset_overloaded_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.nonempty_has_size|fact"><span class="entity_def" id="Multiset.nonempty_has_size|thm"><span>nonempty_has_size</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.gr0I|fact"><span>gr0I</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.gr_implies_not0|fact"><span>gr_implies_not0</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_empty|fact"><span>size_empty</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_eq_0_iff_empty|fact"><span>size_eq_0_iff_empty</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_eq_Suc_imp_elem|fact"><span class="entity_def" id="Multiset.size_eq_Suc_imp_elem|thm"><span>size_eq_Suc_imp_elem</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_overloaded_eq|fact"><span>size_multiset_overloaded_eq</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>drule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.sum_SucD|fact"><span>sum_SucD</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_45909..45914">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_eq_Suc_imp_eq_union|fact"><span class="entity_def" id="Multiset.size_eq_Suc_imp_eq_union|thm"><span>size_eq_Suc_imp_eq_union</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>N</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_45909..45914"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_eq_Suc_imp_elem|fact"><span>size_eq_Suc_imp_elem</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exE|fact"><span>exE</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>a</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_46176..46181">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_mset_mono|fact"><span class="entity_def" id="Multiset.size_mset_mono|thm"><span>size_mset_mono</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_46176..46181"><span>assms</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_exists_conv|fact"><span>mset_subset_eq_exists_conv</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>C</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_46347..46348">B</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_46347..46348"><span>B</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>C</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_filter_mset_lesseq|fact"><span class="entity_def" id="Multiset.size_filter_mset_lesseq|thm"><span>size_filter_mset_lesseq</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_mset_mono|fact"><span>size_mset_mono</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_filter_subset|fact"><span>multiset_filter_subset</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_Diff_submset|fact"><span class="entity_def" id="Multiset.size_Diff_submset|thm"><span>size_Diff_submset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>M'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.add_diff_cancel_left&apos;|fact"><span>add_diff_cancel_left'</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_union|fact"><span>size_union</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_exists_conv|fact"><span>mset_subset_eq_exists_conv</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Induction and case splits</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>theorem</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_induct|fact"><span class="entity_def" id="Multiset.multiset_induct|thm"><span>multiset_induct</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>case_names</span></span><span> empty add</span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|attribute"><span class="operator"><span>induct</span></span></a><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>type</span></span></span></span><span class="main"><span class="main"><span class="main"><span class="main"><span>:</span></span></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a></a></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_46825..46830">empty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_46850..46853">add</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span> </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_46825..46830"><span>empty</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_46991..46994">Suc</span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>N</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>N</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="skolem"><span>M</span></span><span>›</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_eq_Suc_imp_eq_union|fact"><span>size_eq_Suc_imp_eq_union</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.fast|method"><span class="operator"><span>fast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_46991..46994"><span>Suc</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_46850..46853"><span>add</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_induct_min|fact"><span class="entity_def" id="Multiset.multiset_induct_min|thm"><span>multiset_induct_min</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>case_names</span></span><span> empty add</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span>
    </span><span class="entity_def" id="offset_47257..47262">empty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_47280..47283">add</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_47388..47392">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_47408..47410">ih</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_47388..47392"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_47425..47435">Sk_eq_sz_M</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_47388..47392"><span>this</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?y</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Min_mset|const"><span>Min_mset</span></a><span> </span><span class="skolem"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?N</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="var"><span>?y</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_47503..47504">M</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="var"><span>?y</span></span><span> </span><span class="var"><span>?N</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_in|fact"><span>Min_in</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_47425..47435"><span>Sk_eq_sz_M</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.finite_set_mset|fact"><span>finite_set_mset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.insert_DiffM|fact"><span>insert_DiffM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.lessI|fact"><span>lessI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.canonically_ordered_monoid_add_class.not_less_zero|fact"><span>not_less_zero</span></a><span>
      </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_eq_empty_iff|fact"><span>set_mset_eq_empty_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_empty|fact"><span>size_empty</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_47503..47504"><span>M</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_47280..47283"><span>add</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_47408..47410"><span>ih</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_47503..47504"><span>M</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_47425..47435"><span>Sk_eq_sz_M</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.inject|fact"><span>nat.inject</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_add_mset|fact"><span>size_add_mset</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Min_le|fact"><span>Min_le</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.finite_set_mset|fact"><span>finite_set_mset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_diffD|fact"><span>in_diffD</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_47257..47262"><span>empty</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_induct_max|fact"><span class="entity_def" id="Multiset.multiset_induct_max|thm"><span>multiset_induct_max</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>case_names</span></span><span> empty add</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span>
    </span><span class="entity_def" id="offset_47910..47915">empty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_47933..47936">add</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_48041..48045">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_48061..48063">ih</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_48041..48045"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_48078..48088">Sk_eq_sz_M</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_48041..48045"><span>this</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?y</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Max_mset|const"><span>Max_mset</span></a><span> </span><span class="skolem"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?N</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="var"><span>?y</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_48156..48157">M</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="var"><span>?y</span></span><span> </span><span class="var"><span>?N</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_in|fact"><span>Max_in</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_48078..48088"><span>Sk_eq_sz_M</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.finite_set_mset|fact"><span>finite_set_mset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.insert_DiffM|fact"><span>insert_DiffM</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.lessI|fact"><span>lessI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.canonically_ordered_monoid_add_class.not_less_zero|fact"><span>not_less_zero</span></a><span>
      </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_eq_empty_iff|fact"><span>set_mset_eq_empty_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_empty|fact"><span>size_empty</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_48156..48157"><span>M</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_47933..47936"><span>add</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_48061..48063"><span>ih</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_48156..48157"><span>M</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_48078..48088"><span>Sk_eq_sz_M</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat.inject|fact"><span>nat.inject</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_add_mset|fact"><span>size_add_mset</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices_Big.html#Lattices_Big.linorder_class.Max_ge|fact"><span>Max_ge</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.finite_set_mset|fact"><span>finite_set_mset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_diffD|fact"><span>in_diffD</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_47910..47915"><span>empty</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multi_nonempty_split|fact"><span class="entity_def" id="Multiset.multi_nonempty_split|thm"><span>multi_nonempty_split</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>A</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>A</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_cases|fact"><span class="entity_def" id="Multiset.multiset_cases|thm"><span>multiset_cases</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|attribute"><span class="operator"><span>cases</span></span></a><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>type</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="main"><span>(</span></span><span>empty</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
    </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>(</span></span><span>add</span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multi_drop_mem_not_eq|fact"><span class="entity_def" id="Multiset.multi_drop_mem_not_eq|thm"><span>multi_drop_mem_not_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>c</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multi_member_split|fact"><span>multi_member_split</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_filter_mset_complement|fact"><span class="entity_def" id="Multiset.union_filter_mset_complement|thm"><span>union_filter_mset_complement</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_partition|fact"><span class="entity_def" id="Multiset.multiset_partition|thm"><span>multiset_partition</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_size|fact"><span class="entity_def" id="Multiset.mset_subset_size|thm"><span>mset_subset_size</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.nonempty_has_size|fact"><span>nonempty_has_size</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_49159..49162">add</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="skolem"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_49159..49162"><span>add.prems</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_49159..49162"><span>add.prems</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.monoid_add_class.add.right_neutral|fact"><span>add.right_neutral</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.add_diff_cancel_left&apos;|fact"><span>add_diff_cancel_left'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.leD|fact"><span>leD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat_neq_iff|fact"><span>nat_neq_iff</span></a><span>
      </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_Diff_submset|fact"><span>size_Diff_submset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_eq_0_iff_empty|fact"><span>size_eq_0_iff_empty</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_mset_mono|fact"><span>size_mset_mono</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.le_iff_add|fact"><span>subset_mset.le_iff_add</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_1_singleton_mset|fact"><span class="entity_def" id="Multiset.size_1_singleton_mset|thm"><span>size_1_singleton_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Strong induction and subset induction for multisets</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Well-foundedness of strict subset relation</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.wf_subset_mset_rel|fact"><span class="entity_def" id="Multiset.wf_subset_mset_rel|thm"><span>wf_subset_mset_rel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf|const"><span>wf</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>M</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf_measure|fact"><span>wf_measure</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf_subset|fact"><span>wf_subset</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> f1</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.measure_def|fact"><span>measure_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.inv_image_def|fact"><span>inv_image_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_size|fact"><span>mset_subset_size</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.full_multiset_induct|fact"><span class="entity_def" id="Multiset.full_multiset_induct|thm"><span>full_multiset_induct</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>case_names</span></span><span> less</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_49894..49896">ih</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>B</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="main"><span>(</span></span><span class="bound"><span>A</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="bound"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wf_subset_mset_rel|fact"><span>wf_subset_mset_rel</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf_induct|fact"><span>wf_induct</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_49894..49896"><span>ih</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multi_subset_induct|fact"><span class="entity_def" id="Multiset.multi_subset_induct|thm"><span>multi_subset_induct</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>consumes</span></span><span> 2</span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>case_names</span></span><span> empty add</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>empty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_50143..50149">insert</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>F</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>F</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>F</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>A</span></span><span>›</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>F</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fact</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_50318..50319">P</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>F</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_50340..50341">i</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_50143..50149"><span>insert</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_50340..50341"><span>i</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_insertD|fact"><span>mset_subset_eq_insertD</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_50340..50341"><span>i</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>F</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_insertD|fact"><span>mset_subset_eq_insertD</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_50318..50319"><span>P</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>F</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Least and greatest elements</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>qualified</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_50660..50665">lemma</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span>
    </span><span class="comment1"><span>(</span><span>*</span><span> FIXME: Replace by transp_on (set_mset M) R if it gets introduced. </span><span>*</span><span>)</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>z</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>z</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.totalp_on|const"><span>totalp_on</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>
    </span><span class="entity_def" id="Multiset.bex_least_element|fact"><span class="entity_def" id="Multiset.bex_least_element|thm"><span>bex_least_element</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>least</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>least</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>least</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="Multiset.bex_greatest_element|fact"><span class="entity_def" id="Multiset.bex_greatest_element|thm"><span>bex_greatest_element</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>greatest</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>greatest</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>greatest</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.atomize_conj|fact"><span>atomize_conj</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_50660..50665"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_induct|fact"><span>multiset_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_51195..51198">add</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_51195..51198"><span>add.prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_51229..51246">transp_on_x_M_raw</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>y</span></span><span class="main"><span>∈#</span></span><span class="skolem"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>z</span></span><span class="main"><span>∈#</span></span><span class="skolem"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>z</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_iff|fact"><span>insert_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_add_mset_insert|fact"><span>set_mset_add_mset_insert</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_51195..51198"><span>add.prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_51363..51376">transp_on_R_M</span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>z</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>z</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subsetD|fact"><span>mset_subsetD</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multi_psub_of_add_self|fact"><span>multi_psub_of_add_self</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_51195..51198"><span>add.prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
    </span><span class="entity_def" id="offset_51538..51555">totalp_on_x_M_raw</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_51598..51611">totalp_on_M_R</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.totalp_on|const"><span>totalp_on</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.totalp_on_def|fact"><span>totalp_on_def</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>least</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>greatest</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="entity_def" id="offset_51821..51831">least_of_M</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>least</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>y</span></span><span class="main"><span>∈#</span></span><span class="skolem"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>least</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>least</span></span><span> </span><span class="bound"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
      </span><span class="entity_def" id="offset_51887..51900">greatest_of_M</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>greatest</span></span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span class="skolem"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>y</span></span><span class="main"><span>∈#</span></span><span class="skolem"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>greatest</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="skolem"><span>greatest</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_51195..51198"><span>add.IH</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_51363..51376"><span>transp_on_R_M</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_51598..51611"><span>totalp_on_M_R</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_51821..51831"><span>least_of_M</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>y</span></span><span class="main"><span>∈#</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>z</span></span><span class="main"><span>∈#</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="bound"><span>z</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_iff|fact"><span>insert_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_add_mset_insert|fact"><span>set_mset_add_mset_insert</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_51538..51555"><span>totalp_on_x_M_raw</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_51229..51246"><span>transp_on_x_M_raw</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_51887..51900"><span>greatest_of_M</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>y</span></span><span class="main"><span>∈#</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>z</span></span><span class="main"><span>∈#</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="bound"><span>y</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_iff|fact"><span>insert_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_add_mset_insert|fact"><span>set_mset_add_mset_insert</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_51538..51555"><span>totalp_on_x_M_raw</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_51229..51246"><span>transp_on_x_M_raw</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>The fold combinator</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.fold_mset_def|fact"><span class="entity_def" id="Multiset.fold_mset_def|thm"><span class="entity_def" id="Multiset.fold_mset_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.fold_mset|const"><span>fold_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>fold_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.fold|const"><span>Finite_Set.fold</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.fold_mset_empty|fact"><span class="entity_def" id="Multiset.fold_mset_empty|thm"><span>fold_mset_empty</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset_def|fact"><span>fold_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|locale"><span>comp_fun_commute</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comp_fun_commute.fold_mset_add_mset|fact"><span class="entity_def" id="Multiset.comp_fun_commute.fold_mset_add_mset|thm"><span>fold_mset_add_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|locale"><span>comp_fun_commute</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><span>comp_fun_commute_funpow</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> mset_union</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|locale"><span>comp_fun_commute</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>y</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><span>comp_fun_commute_funpow</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_53095..53100">False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_53115..53116">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_in_iff|fact"><span>not_in_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_53095..53100"><span>False</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.fold|const"><span>Finite_Set.fold</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.fold|const"><span>Finite_Set.fold</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.fold_cong|fact"><span>Finite_Set.fold_cong</span></a><span> </span><span>comp_fun_commute_on_funpow</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_53095..53100"><span>False</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_53115..53116"><span>*</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset_def|fact"><span>fold_mset_def</span></a><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_add_mset|fact"><span>count_add_mset</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_53503..53507">True</span><span>
    </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_53512..53518">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>N</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_53512..53518"><span>N_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_53503..53507"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_53575..53576">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="skolem"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="skolem"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>N</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.fold|const"><span>Finite_Set.fold</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
      </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.fold|const"><span>Finite_Set.fold</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.compower|const"><span>^^</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="skolem"><span>N</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.fold_cong|fact"><span>Finite_Set.fold_cong</span></a><span> </span><span>comp_fun_commute_on_funpow</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_53575..53576"><span>*</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset_def|fact"><span>fold_mset_def</span></a><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_add_mset|fact"><span>count_add_mset</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>corollary</span></span></span><span> </span><span class="entity_def" id="Multiset.comp_fun_commute.fold_mset_single|fact"><span class="entity_def" id="Multiset.comp_fun_commute.fold_mset_single|thm"><span>fold_mset_single</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comp_fun_commute.fold_mset_fun_left_comm|fact"><span class="entity_def" id="Multiset.comp_fun_commute.fold_mset_fun_left_comm|thm"><span class="entity_def" id="offset_53990..54013">fold_mset_fun_left_comm</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>fun_left_comm</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comp_fun_commute.fold_mset_union|fact"><span class="entity_def" id="Multiset.comp_fun_commute.fold_mset_union|thm"><span>fold_mset_union</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_53990..54013"><span>fold_mset_fun_left_comm</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_54255..54260">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comp_fun_commute.fold_mset_fusion|fact"><span class="entity_def" id="Multiset.comp_fun_commute.fold_mset_fusion|thm"><span>fold_mset_fusion</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|const"><span>comp_fun_commute</span></a><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_54318..54319">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>h</span></span><span> </span><span class="free"><span>w</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|locale"><span>comp_fun_commute</span></a><span> </span><span class="quoted"><span class="free"><span>g</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_54255..54260"><span>assms</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_54318..54319"><span>*</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_fold_mset_add_mset|fact"><span class="entity_def" id="Multiset.union_fold_mset_add_mset|thm"><span>union_fold_mset_add_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|locale"><span>comp_fun_commute</span></a><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>
  </span><span>A note on code generation: When defining some function containing a
</span><span>  subterm </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>F</span></span><span>›</span></span></span><span>, code generation is not automatic. When
</span><span>  interpreting locale </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>left_commutative›</span></span></span><span> with </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>F›</span></span></span><span>, the
</span><span>  would be code thms for </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span>›</span></span><span> become thms like
</span><span>  </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>F</span></span><span> </span><span class="free"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>z</span></span><span>›</span></span></span><span> where </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>F›</span></span></span><span> is not a pattern but
</span><span>  contains defined symbols, i.e.\ is not a code thm. Hence a separate
</span><span>  constant with its own code thms needs to be introduced for </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>F›</span></span></span><span>. See the image operator below.</span><span>
</span><span>›</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Image</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.image_mset_def|fact"><span class="entity_def" id="Multiset.image_mset_def|thm"><span class="entity_def" id="Multiset.image_mset_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.image_mset|const"><span>image_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>image_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comp_fun_commute_mset_image|fact"><span class="entity_def" id="Multiset.comp_fun_commute_mset_image|thm"><span>comp_fun_commute_mset_image</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|const"><span>comp_fun_commute</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_empty|fact"><span class="entity_def" id="Multiset.image_mset_empty|thm"><span>image_mset_empty</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_def|fact"><span>image_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_single|fact"><span class="entity_def" id="Multiset.image_mset_single|thm"><span>image_mset_single</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comp_fun_commute.fold_mset_add_mset|fact"><span>comp_fun_commute.fold_mset_add_mset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comp_fun_commute_mset_image|fact"><span>comp_fun_commute_mset_image</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_def|fact"><span>image_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_union|fact"><span class="entity_def" id="Multiset.image_mset_union|thm"><span>image_mset_union</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|locale"><span>comp_fun_commute</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comp_fun_commute_mset_image|fact"><span>comp_fun_commute_mset_image</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_def|fact"><span>image_mset_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>corollary</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_add_mset|fact"><span class="entity_def" id="Multiset.image_mset_add_mset|thm"><span>image_mset_add_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_union|fact"><span>image_mset_union</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_add_single|fact"><span>add_mset_add_single</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_single|fact"><span>image_mset_single</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_image_mset|fact"><span class="entity_def" id="Multiset.set_image_mset|thm"><span>set_image_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>image</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_image_mset|fact"><span class="entity_def" id="Multiset.size_image_mset|thm"><span>size_image_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_is_empty_iff|fact"><span class="entity_def" id="Multiset.image_mset_is_empty_iff|thm"><span>image_mset_is_empty_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_If|fact"><span class="entity_def" id="Multiset.image_mset_If|thm"><span>image_mset_If</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
     </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_56565..56570">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_Diff|fact"><span class="entity_def" id="Multiset.image_mset_Diff|thm"><span>image_mset_Diff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_56565..56570"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.diff_add|fact"><span>subset_mset.diff_add</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_image_mset|fact"><span class="entity_def" id="Multiset.count_image_mset|thm"><span>count_image_mset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∑</span></span><span class="bound"><span>y</span></span><span class="main"><span>∈</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.vimage|const"><span>-`</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>add</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>n</span></span><span> </span><span class="skolem"><span>y</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.distrib|fact"><span>sum.distrib</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum.mono_neutral_left|fact"><span>sum.mono_neutral_left</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_image_mset&apos;|fact"><span class="entity_def" id="Multiset.count_image_mset&apos;|thm"><span>count_image_mset'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∑</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_image_mset|fact"><span>count_image_mset</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.singleton_conv2|fact"><span>singleton_conv2</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect_conj_eq|fact"><span>Collect_conj_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_subseteq_mono|fact"><span class="entity_def" id="Multiset.image_mset_subseteq_mono|thm"><span>image_mset_subseteq_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_union|fact"><span>image_mset_union</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.le_iff_add|fact"><span>subset_mset.le_iff_add</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_subset_mono|fact"><span class="entity_def" id="Multiset.image_mset_subset_mono|thm"><span>image_mset_subset_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Diff_eq_empty_iff_mset|fact"><span>Diff_eq_empty_iff_mset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_Diff|fact"><span>image_mset_Diff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_is_empty_iff|fact"><span>image_mset_is_empty_iff</span></a><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_subseteq_mono|fact"><span>image_mset_subseteq_mono</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.less_le_not_le|fact"><span>subset_mset.less_le_not_le</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span> </span><span class="main"><span>(</span></span><span>ASCII</span><span class="main"><span>)</span></span><span>
  </span><span class="quoted"><span>"</span><span>_comprehension_mset</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(</span></span><span class="keyword1"><span>{#</span></span><span>_</span><span class="keyword3"><span>/</span></span><span class="keyword1"><span>.</span></span><span> </span><span>_</span><span> </span><span class="keyword1"><span>:#</span></span><span> </span><span>_</span><span class="keyword1"><span>#}</span></span><span class="keyword3"><span>)</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span>
  </span><span class="quoted"><span>"</span><span>_comprehension_mset</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(</span></span><span class="keyword1"><span>{#</span></span><span>_</span><span class="keyword3"><span>/</span></span><span class="keyword1"><span>.</span></span><span> </span><span>_</span><span> </span><span class="keyword1"><span>∈#</span></span><span> </span><span>_</span><span class="keyword1"><span>#}</span></span><span class="keyword3"><span>)</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>translations</span></span></span><span>
  </span><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>e</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>#}</span></span><span>"</span></span><span> </span><span class="main"><span>⇌</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="free"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span> </span><span class="main"><span>(</span></span><span>ASCII</span><span class="main"><span>)</span></span><span>
  </span><span class="quoted"><span>"</span><span>_comprehension_mset'</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(</span></span><span class="keyword1"><span>{#</span></span><span>_</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>|</span></span><span> </span><span>_</span><span> </span><span class="keyword1"><span>:#</span></span><span> </span><span>_</span><span class="keyword1"><span>.</span></span><span class="keyword3"><span>/ </span></span><span>_</span><span class="keyword1"><span>#}</span></span><span class="keyword3"><span>)</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span>
  </span><span class="quoted"><span>"</span><span>_comprehension_mset'</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(</span></span><span class="keyword1"><span>{#</span></span><span>_</span><span class="keyword3"><span>/ </span></span><span class="keyword1"><span>|</span></span><span> </span><span>_</span><span> </span><span class="keyword1"><span>∈#</span></span><span> </span><span>_</span><span class="keyword1"><span>.</span></span><span class="keyword3"><span>/ </span></span><span>_</span><span class="keyword1"><span>#}</span></span><span class="keyword3"><span>)</span></span><span>"</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>translations</span></span></span><span>
  </span><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>e</span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>∈#</span></span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>#}</span></span><span>"</span></span><span> </span><span class="main"><span>⇀</span></span><span> </span><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>e</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>∈#</span></span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>#}</span></span><span class="main"><span>#}</span></span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>
  </span><span>This allows to write not just filters like </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="main"><span>{#</span></span><span class="bound"><span>x</span></span><span class="main"><span>∈#</span></span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span>c</span></span><span class="main"><span>#}</span></span><span>›</span></span></span><span>
</span><span>  but also images like </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="main"><span>{#</span></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>∈#</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>#}</span></span><span>›</span></span></span><span> and </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>term</span></span><span> [</span><span>source</span><span>]
  </span><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="bound"><span>x</span></span><span class="main"><span>|</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span class="main"><span>∈#</span></span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span>c</span></span><span class="main"><span>#}</span></span><span>"</span></span><span class="antiquote"><span>}</span></span></span><span>, where the latter is currently displayed as
</span><span>  </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="main"><span>{#</span></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="bound"><span>x</span></span><span class="main"><span>|</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span class="main"><span>∈#</span></span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span>c</span></span><span class="main"><span>#}</span></span><span>›</span></span></span><span>.</span><span>
</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_image_mset|fact"><span class="entity_def" id="Multiset.in_image_mset|thm"><span>in_image_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.image_mset.identity|fact"><span class="entity_def" id="Multiset.image_mset.compositionality|fact"><span class="entity_def" id="Multiset.image_mset.id|fact"><span class="entity_def" id="Multiset.image_mset.comp|fact"><span class="entity_def" id="Multiset.image_mset.identity|thm"><span class="entity_def" id="Multiset.image_mset.compositionality|thm"><span class="entity_def" id="Multiset.image_mset.id|thm"><span class="entity_def" id="Multiset.image_mset.comp|thm"><span>functor</span></span></span></span></span></span></span></span></span></span></span><span> image_mset</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="skolem"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>A</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="skolem"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="skolem"><span>g</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>A</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset.id|fact"><span>image_mset.id</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset.identity|fact"><span>image_mset.identity</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_id|fact"><span class="entity_def" id="Multiset.image_mset_id|thm"><span>image_mset_id</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id_def|fact"><span>id_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_cong|fact"><span class="entity_def" id="Multiset.image_mset_cong|thm"><span>image_mset_cong</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_cong_pair|fact"><span class="entity_def" id="Multiset.image_mset_cong_pair|thm"><span>image_mset_cong_pair</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_cong|fact"><span>image_mset_cong</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.split_cong|fact"><span>split_cong</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_const_eq|fact"><span class="entity_def" id="Multiset.image_mset_const_eq|thm"><span>image_mset_const_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>c</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_filter_mset_swap|fact"><span class="entity_def" id="Multiset.image_mset_filter_mset_swap|thm"><span>image_mset_filter_mset_swap</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_induct|fact"><span>multiset_induct</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_eq_plusD|fact"><span class="entity_def" id="Multiset.image_mset_eq_plusD|thm"><span>image_mset_eq_plusD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>B'</span></span><span> </span><span class="bound"><span>C'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>B'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>C'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>B'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>C'</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span> </span><span class="quoted"><span class="free"><span>C</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_59851..59854">add</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>B</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_59851..59854"><span>add.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_remove_trivial|fact"><span>add_mset_remove_trivial</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_add_mset|fact"><span>image_mset_add_mset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_single|fact"><span>mset_subset_eq_single</span></a><span>
          </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.add_diff_assoc2|fact"><span>subset_mset.add_diff_assoc2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_59851..59854"><span>add.IH</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_59851..59854"><span>add.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_59851..59854"><span>add.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_single_eq_union|fact"><span>diff_single_eq_union</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_union_single_conv|fact"><span>diff_union_single_conv</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_add_mset|fact"><span>image_mset_add_mset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_iff|fact"><span>union_iff</span></a><span>
          </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_single_eq_member|fact"><span>union_single_eq_member</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_59851..59854"><span>add.IH</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_59851..59854"><span>add.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_60429..60434">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_eq_image_mset_plusD|fact"><span class="entity_def" id="Multiset.image_mset_eq_image_mset_plusD|thm"><span>image_mset_eq_image_mset_plusD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>inj_f</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>C'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>C'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>C'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_60429..60434"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span> </span><span class="quoted"><span class="free"><span>C</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_60707..60710">add</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>B</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_60763..60767">True</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_60707..60710"><span>add.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.left_commute|fact"><span>add.left_commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_comm_monoid_add_class.add_cancel_right_left|fact"><span>add_cancel_right_left</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_union_cancelL|fact"><span>diff_union_cancelL</span></a><span>
          </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_union_single_conv|fact"><span>diff_union_single_conv</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_union|fact"><span>image_mset_union</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset_add_mset_left|fact"><span>union_mset_add_mset_left</span></a><span>
          </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset_add_mset_right|fact"><span>union_mset_add_mset_right</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_60707..60710"><span>add.IH</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M3'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>M3'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>M3'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_60763..60767"><span>True</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_insert_left|fact"><span>Un_insert_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_insert_right|fact"><span>Un_insert_right</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_60707..60710"><span>add.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_insert|fact"><span>inj_on_insert</span></a><span>
          </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.insert_DiffM|fact"><span>insert_DiffM</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_add_mset_insert|fact"><span>set_mset_add_mset_insert</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_60763..60767"><span>True</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_60707..60710"><span>add.prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>B</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_60707..60710"><span>add.prems</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_union_single_conv|fact"><span>diff_union_single_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_eqI|fact"><span>image_eqI</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_Diff|fact"><span>image_mset_Diff</span></a><span>
          </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_single|fact"><span>image_mset_single</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_single|fact"><span>mset_subset_eq_single</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_image_mset|fact"><span>set_image_mset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_iff|fact"><span>union_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_single_eq_diff|fact"><span>union_single_eq_diff</span></a><span>
          </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_single_eq_member|fact"><span>union_single_eq_member</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_60707..60710"><span>add.prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_60707..60710"><span>add.IH</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M3'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>M3'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>M3'</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_60707..60710"><span>add.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.add_diff_cancel_left&apos;|fact"><span>add_diff_cancel_left'</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_Diff|fact"><span>image_mset_Diff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eq_add_left|fact"><span>mset_subset_eq_add_left</span></a><span>
          </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset_add_mset_right|fact"><span>union_mset_add_mset_right</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_eq_plus_image_msetD|fact"><span class="entity_def" id="Multiset.image_mset_eq_plus_image_msetD|thm"><span>image_mset_eq_plus_image_msetD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span>
  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>B'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>B'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>B'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="free"><span>C</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_eq_image_mset_plusD|fact"><span>image_mset_eq_image_mset_plusD</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Further conversions</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.mset.simps|fact"><span class="entity_def" id="Multiset.mset_def|fact"><span class="entity_def" id="Multiset.mset.simps(2)|thm"><span class="entity_def" id="Multiset.mset.simps(1)|thm"><span class="entity_def" id="Multiset.mset_def|thm"><span class="entity_def" id="Multiset.mset_def|axiom"><span>primrec</span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.mset|const"><span>mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mset</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mset</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_multiset_in_set|fact"><span class="entity_def" id="Multiset.in_multiset_in_set|thm"><span>in_multiset_in_set</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_mset|fact"><span class="entity_def" id="Multiset.count_mset|thm"><span>count_mset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_zero_iff|fact"><span class="entity_def" id="Multiset.mset_zero_iff|thm"><span>mset_zero_iff</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_zero_iff_right|fact"><span class="entity_def" id="Multiset.mset_zero_iff_right|thm"><span>mset_zero_iff_right</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_mset_gt_0|fact"><span class="entity_def" id="Multiset.count_mset_gt_0|thm"><span>count_mset_gt_0</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_mset_0_iff|fact"><span class="entity_def" id="Multiset.count_mset_0_iff|thm"><span>count_mset_0_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_single_iff|fact"><span class="entity_def" id="Multiset.mset_single_iff|thm"><span>mset_single_iff</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_single_iff_right|fact"><span class="entity_def" id="Multiset.mset_single_iff_right|thm"><span>mset_single_iff_right</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_mset|fact"><span class="entity_def" id="Multiset.set_mset_mset|thm"><span>set_mset_mset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_comp_mset|fact"><span class="entity_def" id="Multiset.set_mset_comp_mset|thm"><span>set_mset_comp_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_mset|fact"><span class="entity_def" id="Multiset.size_mset|thm"><span>size_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_append|fact"><span class="entity_def" id="Multiset.mset_append|thm"><span>mset_append</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_filter|fact"><span class="entity_def" id="Multiset.mset_filter|thm"><span>mset_filter</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_rev|fact"><span class="entity_def" id="Multiset.mset_rev|thm"><span>mset_rev</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.rev|const"><span>rev</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.surj_mset|fact"><span class="entity_def" id="Multiset.surj_mset|thm"><span>surj_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.surj|const"><span>surj</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.surj_def|fact"><span>surj_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.allI|fact"><span>allI</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span> M </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="improper"><span>y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_induct|fact"><span>multiset_induct</span></a><span class="main"><span>)</span></span><span>
 </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span> x </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="improper"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="improper"><span>xa</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.distinct_count_atmost_1|fact"><span class="entity_def" id="Multiset.distinct_count_atmost_1|thm"><span>distinct_count_atmost_1</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct|const"><span>distinct</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_63899..63903">Cons</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?lhs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?lhs</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?rhs</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_63899..63903"><span>Cons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?rhs</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>xs</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="var"><span>?rhs</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
       </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_eq_zero_iff|fact"><span>count_eq_zero_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?lhs</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_63899..63903"><span>Cons</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_64288..64293">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_eq_setD|fact"><span class="entity_def" id="Multiset.mset_eq_setD|thm"><span>mset_eq_setD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_64288..64293"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_eq_iff_mset_eq_distinct|fact"><span class="entity_def" id="Multiset.set_eq_iff_mset_eq_distinct|thm"><span>set_eq_iff_mset_eq_distinct</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct|const"><span>distinct</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct|const"><span>distinct</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>y</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.distinct_count_atmost_1|fact"><span>distinct_count_atmost_1</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_eq_iff_mset_remdups_eq|fact"><span class="entity_def" id="Multiset.set_eq_iff_mset_remdups_eq|thm"><span>set_eq_iff_mset_remdups_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remdups|const"><span>remdups</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remdups|const"><span>remdups</span></a><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffI|fact"><span>iffI</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_eq_iff_mset_eq_distinct|fact"><span>set_eq_iff_mset_eq_distinct</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffD1|fact"><span>iffD1</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>drule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct_remdups|fact"><span>distinct_remdups</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct_remdups|fact"><span>distinct_remdups</span></a><span>
      </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_eq_iff_mset_eq_distinct|fact"><span>set_eq_iff_mset_eq_distinct</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffD2|fact"><span>iffD2</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_64925..64930">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_eq_imp_distinct_iff|fact"><span class="entity_def" id="Multiset.mset_eq_imp_distinct_iff|thm"><span>mset_eq_imp_distinct_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct|const"><span>distinct</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct|const"><span>distinct</span></a><span> </span><span class="free"><span>ys</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_64925..64930"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.distinct_count_atmost_1|fact"><span>distinct_count_atmost_1</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_eq_setD|fact"><span>mset_eq_setD</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.nth_mem_mset|fact"><span class="entity_def" id="Multiset.nth_mem_mset|thm"><span>nth_mem_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>ls</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ls</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ls</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>ls</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Cons</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>i</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_remove1|fact"><span class="entity_def" id="Multiset.mset_remove1|thm"><span>mset_remove1</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remove1|const"><span>remove1</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_65388..65393">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_eq_length|fact"><span class="entity_def" id="Multiset.mset_eq_length|thm"><span>mset_eq_length</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_65388..65393"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_mset|fact"><span>size_mset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_65508..65513">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_eq_length_filter|fact"><span class="entity_def" id="Multiset.mset_eq_length_filter|thm"><span>mset_eq_length_filter</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_65508..65513"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_mset|fact"><span>count_mset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.fold_multiset_equiv|fact"><span class="entity_def" id="Multiset.fold_multiset_equiv|thm"><span>fold_multiset_equiv</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>List.fold</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>List.fold</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>ys</span></span><span>›</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity_def" id="offset_65748..65749">f</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span>›</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_65748..65749"><span>f</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>›</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_65960..65964">Cons</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_65983..65984">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_eq_setD|fact"><span>mset_eq_setD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_65960..65964"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_65983..65984"><span>*</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_65983..65984"><span>*</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>ys</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>List.fold</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>List.fold</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remove1|const"><span>remove1</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>x</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold_remove1_split|fact"><span>fold_remove1_split</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_65960..65964"><span>Cons.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>List.fold</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>List.fold</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remove1|const"><span>remove1</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_65960..65964"><span>Cons.IH</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.fold_permuted_eq|fact"><span class="entity_def" id="Multiset.fold_permuted_eq|thm"><span>fold_permuted_eq</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>List.fold</span></a><span> </span><span class="main"><span class="free"><span>(⊙)</span></span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>List.fold</span></a><span> </span><span class="main"><span class="free"><span>(⊙)</span></span></span><span> </span><span class="free"><span>ys</span></span><span> </span><span class="free"><span>z</span></span><span>›</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>›</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>z</span></span><span>›</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_66565..66566">P</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_66613..66614">f</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infixl</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="keyword1"><span>⊙</span></span><span>›</span></span><span> 70</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>z</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_66565..66566"><span>P</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_66613..66614"><span>f</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>›</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span> </span><span class="quoted"><span class="free"><span>z</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_66843..66847">Cons</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_66866..66867">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_eq_setD|fact"><span>mset_eq_setD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>z</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_66843..66847"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_66843..66847"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_66866..66867"><span>*</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_66843..66847"><span>Cons.prems</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_66866..66867"><span>*</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_66866..66867"><span>*</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>ys</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><span class="main"><span class="free"><span>(⊙)</span></span></span><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="skolem"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><span class="main"><span class="free"><span>(⊙)</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remove1|const"><span>remove1</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="skolem"><span>z</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>ys</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>z</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_66843..66847"><span>Cons.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><span class="main"><span class="free"><span>(⊙)</span></span></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="skolem"><span>z</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><span class="main"><span class="free"><span>(⊙)</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remove1|const"><span>remove1</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span class="free"><span>⊙</span></span></span><span> </span><span class="skolem"><span>z</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_66843..66847"><span>Cons.IH</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_shuffles|fact"><span class="entity_def" id="Multiset.mset_shuffles|thm"><span>mset_shuffles</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>zs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.shuffles|const"><span>shuffles</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>zs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>zs</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.shuffles.induct|fact"><span>shuffles.induct</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_insort|fact"><span class="entity_def" id="Multiset.mset_insort|thm"><span>mset_insort</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.insort|const"><span>insort</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_map|fact"><span class="entity_def" id="Multiset.mset_map|thm"><span>mset_map</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.mset_set.comp_fun_commute|fact"><span class="entity_def" id="Multiset.mset_set.folding_axioms|fact"><span class="entity_def" id="Multiset.mset_set.insert_remove|fact"><span class="entity_def" id="Multiset.mset_set.remove|fact"><span class="entity_def" id="Multiset.mset_set.insert|fact"><span class="entity_def" id="Multiset.mset_set.infinite|fact"><span class="entity_def" id="Multiset.mset_set.empty|fact"><span class="entity_def" id="Multiset.mset_set.eq_fold|fact"><span class="entity_def" id="Multiset.mset_set.comp_fun_commute_on|fact"><span class="entity_def" id="Multiset.mset_set.folding_on_axioms|fact"><span class="entity_def" id="Multiset.mset_set_def|fact"><span class="entity_def" id="Multiset.mset_set.comp_fun_commute|thm"><span class="entity_def" id="Multiset.mset_set.insert_remove|thm"><span class="entity_def" id="Multiset.mset_set.remove|thm"><span class="entity_def" id="Multiset.mset_set.eq_fold|thm"><span class="entity_def" id="Multiset.mset_set.comp_fun_commute_on|thm"><span class="entity_def" id="Multiset.mset_set.folding_axioms|thm"><span class="entity_def" id="Multiset.mset_set.insert|thm"><span class="entity_def" id="Multiset.mset_set.infinite|thm"><span class="entity_def" id="Multiset.mset_set.empty|thm"><span class="entity_def" id="Multiset.mset_set.folding_on_axioms|thm"><span class="entity_def" id="Multiset.mset_set_def|thm"><span class="entity_def" id="Multiset.mset_set_def|axiom"><span class="entity_def" id="Multiset.mset_set.F|const"><span>global_interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> mset_set</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.folding|locale"><span>folding</span></a><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_set|const"><span>mset_set</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.folding_on.F|const"><span>folding_on.F</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.sum_multiset_singleton|fact"><span class="entity_def" id="Multiset.sum_multiset_singleton|thm"><span>sum_multiset_singleton</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum|const"><span>sum</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>n</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite_finite_induct|fact"><span>infinite_finite_induct</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_mset_set|fact"><span class="entity_def" id="Multiset.count_mset_set(3)|thm"><span class="entity_def" id="Multiset.count_mset_set(2)|thm"><span class="entity_def" id="Multiset.count_mset_set(1)|thm"><span>count_mset_set</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="var"><span>?P</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="var"><span>?Q</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="var"><span>?R</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>A</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_68451..68455">True</span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_68451..68455"><span>True</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="skolem"><span>A</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="var"><span>?P</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="var"><span>?Q</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>PROP</span></span><span> </span><span class="var"><span>?R</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_insert|fact"><span>Set.set_insert</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="comment1"><span>― ‹</span><span>TODO: maybe define </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span>›</span></span><span> also in terms of </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.Abs_multiset|const"><span>Abs_multiset</span></a><span>›</span></span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.elem_mset_set|fact"><span class="entity_def" id="Multiset.elem_mset_set|thm"><span>elem_mset_set</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.intro|attribute"><span class="operator"><span>intro</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_set_Union|fact"><span class="entity_def" id="Multiset.mset_set_Union|thm"><span>mset_set_Union</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_mset_mset_set|fact"><span class="entity_def" id="Multiset.filter_mset_mset_set|thm"><span>filter_mset_mset_set</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_69074..69080">insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_69074..69080"><span>insert.hyps</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
      </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span class="main"><span>∈</span></span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_69074..69080"><span>insert.IH</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_69074..69080"><span>insert.hyps</span></a><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
            </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>x</span></span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>{</span></span><span class="skolem"><span>x</span></span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="var"><span>?A</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set_Union|fact"><span>mset_set_Union</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_69074..69080"><span>insert.hyps</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span class="bound"><span>y</span></span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_69637..69642">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_set_Diff|fact"><span class="entity_def" id="Multiset.mset_set_Diff|thm"><span>mset_set_Diff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_69637..69642"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set_Union|fact"><span>mset_set_Union</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_69637..69642"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_set_set|fact"><span class="entity_def" id="Multiset.mset_set_set|thm"><span>mset_set_set</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct|const"><span>distinct</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_mset_set&apos;|fact"><span class="entity_def" id="Multiset.count_mset_set&apos;|thm"><span>count_mset_set'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_70154..70159">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.subset_imp_msubset_mset_set|fact"><span class="entity_def" id="Multiset.subset_imp_msubset_mset_set|thm"><span>subset_imp_msubset_mset_set</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eqI|fact"><span>mset_subset_eqI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span class="quoted"><span class="tfree"><span>'a</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_70154..70159"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_70154..70159"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_set_set_mset_msubset|fact"><span class="entity_def" id="Multiset.mset_set_set_mset_msubset|thm"><span>mset_set_set_mset_msubset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eqI|fact"><span>mset_subset_eqI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_set_upto_eq_mset_upto|fact"><span class="entity_def" id="Multiset.mset_set_upto_eq_mset_upto|thm"><span>mset_set_upto_eq_mset_upto</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>{..&lt;</span></a></span><span class="free"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.lessThan|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.upt|const"><span>[</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.upt|const"><span>..&lt;</span></a></span><span class="free"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.upt|const"><span>]</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.lessThan_Suc|fact"><span>lessThan_Suc</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|locale"><span>linorder</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.linorder_class.sorted_list_of_multiset_def|fact"><span class="entity_def" id="Multiset.linorder.sorted_list_of_multiset_def|fact"><span class="entity_def" id="Multiset.linorder_class.sorted_list_of_multiset_def|thm"><span class="entity_def" id="Multiset.linorder.sorted_list_of_multiset_def|thm"><span class="entity_def" id="Multiset.linorder.sorted_list_of_multiset_def_raw|axiom"><span class="entity_def" id="offset_70800..70810">definition</span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.linorder_class.sorted_list_of_multiset_dict|fact"><span class="entity_def" id="Multiset.linorder.sorted_list_of_multiset.cong|fact"><span class="entity_def" id="Multiset.linorder_class.sorted_list_of_multiset_dict|thm"><span class="entity_def" id="Multiset.linorder.sorted_list_of_multiset.cong|thm"><span class="entity_def" id="Multiset.linorder_class.sorted_list_of_multiset_dict|axiom"><span class="entity_def" id="Multiset.linorder_class.sorted_list_of_multiset|const"><span class="entity_def" id="Multiset.linorder.sorted_list_of_multiset|const"><span>sorted_list_of_multiset</span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>sorted_list_of_multiset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.insort|const"><span>insort</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.sorted_list_of_multiset_empty|fact"><span class="entity_def" id="Multiset.linorder.sorted_list_of_multiset_empty|fact"><span class="entity_def" id="Multiset.linorder_class.sorted_list_of_multiset_empty|thm"><span class="entity_def" id="Multiset.linorder.sorted_list_of_multiset_empty|thm"><span>sorted_list_of_multiset_empty</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.sorted_list_of_multiset|const"><span>sorted_list_of_multiset</span></a><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_70800..70810"><span>sorted_list_of_multiset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.sorted_list_of_multiset_singleton|fact"><span class="entity_def" id="Multiset.linorder.sorted_list_of_multiset_singleton|fact"><span class="entity_def" id="Multiset.linorder_class.sorted_list_of_multiset_singleton|thm"><span class="entity_def" id="Multiset.linorder.sorted_list_of_multiset_singleton|thm"><span>sorted_list_of_multiset_singleton</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.sorted_list_of_multiset|const"><span>sorted_list_of_multiset</span></a><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|locale"><span>comp_fun_commute</span></a><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.insort|const"><span>insort</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><span>comp_fun_commute_insort</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_70800..70810"><span>sorted_list_of_multiset_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.sorted_list_of_multiset_insert|fact"><span class="entity_def" id="Multiset.linorder.sorted_list_of_multiset_insert|fact"><span class="entity_def" id="Multiset.linorder_class.sorted_list_of_multiset_insert|thm"><span class="entity_def" id="Multiset.linorder.sorted_list_of_multiset_insert|thm"><span>sorted_list_of_multiset_insert</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.sorted_list_of_multiset|const"><span>sorted_list_of_multiset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.insort|const"><span>List.insort</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.sorted_list_of_multiset|const"><span>sorted_list_of_multiset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|locale"><span>comp_fun_commute</span></a><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.insort|const"><span>insort</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><span>comp_fun_commute_insort</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_70800..70810"><span>sorted_list_of_multiset_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_sorted_list_of_multiset|fact"><span class="entity_def" id="Multiset.mset_sorted_list_of_multiset|thm"><span>mset_sorted_list_of_multiset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.sorted_list_of_multiset|const"><span>sorted_list_of_multiset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.sorted_list_of_multiset_mset|fact"><span class="entity_def" id="Multiset.sorted_list_of_multiset_mset|thm"><span>sorted_list_of_multiset_mset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.sorted_list_of_multiset|const"><span>sorted_list_of_multiset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort|const"><span>sort</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.finite_set_mset_mset_set|fact"><span class="entity_def" id="Multiset.finite_set_mset_mset_set|thm"><span>finite_set_mset_mset_set</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_set_empty_iff|fact"><span class="entity_def" id="Multiset.mset_set_empty_iff|thm"><span>mset_set_empty_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.finite_set_mset_mset_set|fact"><span>finite_set_mset_mset_set</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.infinite_set_mset_mset_set|fact"><span class="entity_def" id="Multiset.infinite_set_mset_mset_set|thm"><span>infinite_set_mset_mset_set</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_sorted_list_of_multiset|fact"><span class="entity_def" id="Multiset.set_sorted_list_of_multiset|thm"><span>set_sorted_list_of_multiset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.sorted_list_of_multiset|const"><span>sorted_list_of_multiset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.set_insort_key|fact"><span>set_insort_key</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.sorted_list_of_mset_set|fact"><span class="entity_def" id="Multiset.sorted_list_of_mset_set|thm"><span>sorted_list_of_mset_set</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.sorted_list_of_multiset|const"><span>sorted_list_of_multiset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_upt|fact"><span class="entity_def" id="Multiset.mset_upt|thm"><span>mset_upt</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.upt|const"><span>[</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.upt|const"><span>..&lt;</span></a></span><span class="free"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.upt|const"><span>]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="free"><span>m</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="free"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.atLeastLessThanSuc|fact"><span>atLeastLessThanSuc</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_map_of|fact"><span class="entity_def" id="Multiset.image_mset_map_of|thm"><span>image_mset_map_of</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct|const"><span>distinct</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>{#</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map_of|const"><span>map_of</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_72631..72635">Cons</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map_of|const"><span>map_of</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
          </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>{#</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map_of|const"><span>map_of</span></a><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span>
             </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="var"><span>?A</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_72631..72635"><span>Cons.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map_of|const"><span>map_of</span></a><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>:#</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>x</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_cong|fact"><span>image_mset_cong</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_multiset_in_set|fact"><span>in_multiset_in_set</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_72631..72635"><span>Cons.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_72631..72635"><span>Cons.IH</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_73142..73147">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.msubset_mset_set_iff|fact"><span class="entity_def" id="Multiset.msubset_mset_set_iff|thm"><span>msubset_mset_set_iff</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_73142..73147"><span>assms</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_mono|fact"><span>set_mset_mono</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_imp_msubset_mset_set|fact"><span>subset_imp_msubset_mset_set</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_73321..73326">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_set_eq_iff|fact"><span class="entity_def" id="Multiset.mset_set_eq_iff|thm"><span>mset_set_eq_iff</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_73321..73326"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.finite_set_mset_mset_set|fact"><span>finite_set_mset_mset_set</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_mset_mset_set|fact"><span class="entity_def" id="Multiset.image_mset_mset_set|thm"><span>image_mset_mset_set</span></span></span><span class="main"><span>:</span></span><span> </span><span class="comment1"><span>✐</span><span class="quoted"><span class="quoted"><span>‹</span><span>contributor</span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span>Lukas Bulwahn</span><span>›</span></span></span><span>›</span></span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_73635..73641">assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_73635..73641"><span>this</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_73721..73727">assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_73721..73727"><span>this</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_imageD|fact"><span>finite_imageD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><span class="free"><span>A</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite|const"><span>infinite</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>More properties of the replicate and repeat operations</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_replicate_mset|fact"><span class="entity_def" id="Multiset.in_replicate_mset|thm"><span>in_replicate_mset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset_def|fact"><span>replicate_mset_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_replicate_mset_subset|fact"><span class="entity_def" id="Multiset.set_mset_replicate_mset_subset|thm"><span>set_mset_replicate_mset_subset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_replicate_mset|fact"><span class="entity_def" id="Multiset.size_replicate_mset|thm"><span>size_replicate_mset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_le_replicate_mset_subset_eq|fact"><span class="entity_def" id="Multiset.count_le_replicate_mset_subset_eq|thm"><span>count_le_replicate_mset_subset_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_subset_eqI|fact"><span>mset_subset_eqI</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_replicate_mset|fact"><span>count_replicate_mset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.filter_eq_replicate_mset|fact"><span class="entity_def" id="Multiset.filter_eq_replicate_mset|thm"><span>filter_eq_replicate_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>D</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>D</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.replicate_count_mset_eq_filter_eq|fact"><span class="entity_def" id="Multiset.replicate_count_mset_eq_filter_eq|thm"><span>replicate_count_mset_eq_filter_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.replicate|const"><span>replicate</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>HOL.eq</span></a><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.replicate_mset_eq_empty_iff|fact"><span class="entity_def" id="Multiset.replicate_mset_eq_empty_iff|thm"><span>replicate_mset_eq_empty_iff</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.replicate_mset_eq_iff|fact"><span class="entity_def" id="Multiset.replicate_mset_eq_iff|thm"><span>replicate_mset_eq_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset_cancel1|fact"><span class="entity_def" id="Multiset.repeat_mset_cancel1|thm"><span>repeat_mset_cancel1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset_cancel2|fact"><span class="entity_def" id="Multiset.repeat_mset_cancel2|thm"><span>repeat_mset_cancel2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.repeat_mset_eq_empty_iff|fact"><span class="entity_def" id="Multiset.repeat_mset_eq_empty_iff|thm"><span>repeat_mset_eq_empty_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.repeat_mset|const"><span>repeat_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.image_replicate_mset|fact"><span class="entity_def" id="Multiset.image_replicate_mset|thm"><span>image_replicate_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.replicate_mset_msubseteq_iff|fact"><span class="entity_def" id="Multiset.replicate_mset_msubseteq_iff|thm"><span>replicate_mset_msubseteq_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.insert_subset_eq_iff|fact"><span>insert_subset_eq_iff</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_le_replicate_mset_subset_eq|fact"><span>count_le_replicate_mset_subset_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_75609..75614">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.msubseteq_replicate_msetE|fact"><span class="entity_def" id="Multiset.msubseteq_replicate_msetE|thm"><span>msubseteq_replicate_msetE</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_75609..75614"><span>assms</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_75609..75614"><span>that</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="free"><span>thesis</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_75821..75826">False</span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_75609..75614"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_mono|fact"><span>set_mset_mono</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_75821..75826"><span>False</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span class="free"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>m</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="bound"><span>m</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_76096..76099">add</span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>m</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76096..76099"><span>add.prems</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>m</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>m</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_76268..76269">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="skolem"><span>m</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_75609..75614"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset_msubseteq_iff|fact"><span>replicate_mset_msubseteq_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="free"><span>thesis</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76268..76269"><span>A</span></a><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Big operators</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.comm_monoid_mset.axioms|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.intro|fact"><span class="entity_def" id="Multiset.comm_monoid_mset_def|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.axioms|thm"><span class="entity_def" id="Multiset.comm_monoid_mset.intro|thm"><span class="entity_def" id="Multiset.comm_monoid_mset_def|thm"><span class="entity_def" id="Multiset.comm_monoid_mset_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset|locale"><span class="entity_def" id="Multiset.comm_monoid_mset|const"><span>comm_monoid_mset</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid|locale"><span>comm_monoid</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_76487..76501">interpretation</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|locale"><span>comp_fun_commute</span></a><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><span>left_commute</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>interpretation</span></span></span><span> comp</span><span class="main"><span>?</span></span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|locale"><span>comp_fun_commute</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>g</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76487..76501"><span>comp_comp_fun_commute</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.comm_monoid_mset.F.cong|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.F.cong|thm"><span class="entity_def" id="Multiset.comm_monoid_mset.F|const"><span class="entity_def" id="offset_76680..76681">F</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.eq_fold|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.eq_fold|thm"><span class="entity_def" id="Multiset.comm_monoid_mset.eq_fold_raw|axiom"><span class="entity_def" id="offset_76712..76719">eq_fold</span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>F</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>1</b></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.empty|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.empty|thm"><span>empty</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>1</b></span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76712..76719"><span>eq_fold</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.singleton|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.singleton|thm"><span>singleton</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|locale"><span>comp_fun_commute</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><span>left_commute</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76712..76719"><span>eq_fold</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.union|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.union|thm"><span class="entity_def" id="offset_76982..76987">union</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>*</b></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|locale"><span>comp_fun_commute</span></a><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><span>left_commute</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>left_commute</span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76712..76719"><span>eq_fold</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.add_mset|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.add_mset|thm"><span>add_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>*</b></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_add_single|fact"><span>add_mset_add_single</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76982..76987"><span>union</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.insert|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.insert|thm"><span>insert</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>*</b></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76712..76719"><span>eq_fold</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_77428..77433">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.remove|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.remove|thm"><span>remove</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>*</b></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multi_member_split|fact"><span>multi_member_split</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_77428..77433"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.neutral|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.neutral|thm"><span class="entity_def" id="offset_77548..77555">neutral</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span class="main"><span>∈#</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>1</b></span></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>1</b></span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.neutral_const|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.neutral_const|thm"><span>neutral_const</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>1</b></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>1</b></span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_77548..77555"><span>neutral</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span> </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.F_image_mset_product|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.F_image_mset_product|thm"><span class="entity_def" id="offset_77715..77735">F_image_mset_product</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>{#</span></span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>*</b></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>{#</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>#}</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>*</b></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>{#</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>{#</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>#}</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>left_commute</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.semigroup.assoc|fact"><span>semigroup.assoc</span></a><span> </span><span>semigroup_axioms</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.swap|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.swap|thm"><span>swap</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_77715..77735"><span>F_image_mset_product</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.distrib|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.distrib|thm"><span>distrib</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>*</b></span></span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>*</b></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mset.union_disjoint|fact"><span class="entity_def" id="Multiset.comm_monoid_mset.union_disjoint|thm"><span>union_disjoint</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>*</b></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>F</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comp_fun_commute_plus_mset|fact"><span class="entity_def" id="Multiset.comp_fun_commute_plus_mset|thm"><span>comp_fun_commute_plus_mset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.comp_fun_commute|const"><span>comp_fun_commute</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>(+)</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.add_ac|fact"><span>add_ac</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><span>comp_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comp_fun_commute.fold_mset_add_mset|fact"><span>comp_fun_commute.fold_mset_add_mset</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comp_fun_commute_plus_mset|fact"><span>comp_fun_commute_plus_mset</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_mset_fold_plus_iff|fact"><span class="entity_def" id="Multiset.in_mset_fold_plus_iff|thm"><span>in_mset_fold_plus_iff</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset|const"><span>fold_mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>(+)</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>NN</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>N</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>NN</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>NN</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_add|locale"><span>comm_monoid_add</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.union_disjoint|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.distrib|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.swap|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.F_image_mset_product|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.neutral_const|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.neutral|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.remove|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.insert|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.add_mset|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.union|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.singleton|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.empty|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.eq_fold|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.comm_monoid_mset_axioms|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset_def|fact"><span class="entity_def" id="Multiset.comm_monoid_add.sum_mset_def|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.union_disjoint|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.distrib|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.F_image_mset_product|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.neutral|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.remove|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.eq_fold|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset_def|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.swap|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.neutral_const|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.insert|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.add_mset|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.union|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.singleton|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.empty|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.comm_monoid_mset_axioms|thm"><span class="entity_def" id="Multiset.comm_monoid_add.sum_mset_def|thm"><span class="entity_def" id="Multiset.comm_monoid_add.sum_mset_def|axiom"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset.F|const"><span>sublocale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> sum_mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mset|locale"><span>comm_monoid_mset</span></a><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>plus</span></a></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset_dict|fact"><span class="entity_def" id="Multiset.comm_monoid_add.sum_mset.cong|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset_dict|thm"><span class="entity_def" id="Multiset.comm_monoid_add.sum_mset.cong|thm"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset_dict|axiom"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset|const"><span class="entity_def" id="Multiset.comm_monoid_add.sum_mset|const"><span>sum_mset</span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>sum_mset.F</span></a></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_unfold_sum_mset|fact"><span class="entity_def" id="Multiset.comm_monoid_add.sum_unfold_sum_mset|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_unfold_sum_mset|thm"><span class="entity_def" id="Multiset.comm_monoid_add.sum_unfold_sum_mset|thm"><span>sum_unfold_sum_mset</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum|const"><span>sum</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>∑<span class="hidden">⇩</span><sub>#</sub></span></span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span> </span><span class="main"><span>(</span></span><span>ASCII</span><span class="main"><span>)</span></span><span>
  </span><span class="quoted"><span>"</span><span>_sum_mset_image</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>pttrn</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_add|class"><span>comm_monoid_add</span></a><span>"</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(3</span></span><span class="keyword1"><span>SUM</span></span><span> </span><span>_</span><span class="keyword1"><span>:#</span></span><span>_</span><span class="keyword1"><span>.</span></span><span> </span><span>_</span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>,</span></span><span> 10</span><span class="main"><span>]</span></span><span> 10</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span>
  </span><span class="quoted"><span>"</span><span>_sum_mset_image</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>pttrn</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_add|class"><span>comm_monoid_add</span></a><span>"</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(3</span></span><span class="keyword1"><span>∑</span></span><span>_</span><span class="keyword1"><span>∈#</span></span><span>_</span><span class="keyword1"><span>.</span></span><span> </span><span>_</span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>,</span></span><span> 10</span><span class="main"><span>]</span></span><span> 10</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>translations</span></span></span><span>
  </span><span class="quoted"><span>"</span><span class="main"><span>∑</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span><span> </span><span class="main"><span>⇌</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="free"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_add|locale"><span>comm_monoid_add</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset_sum_list|fact"><span class="entity_def" id="Multiset.comm_monoid_add.sum_mset_sum_list|fact"><span class="entity_def" id="Multiset.comm_monoid_add_class.sum_mset_sum_list|thm"><span class="entity_def" id="Multiset.comm_monoid_add.sum_mset_sum_list|thm"><span>sum_mset_sum_list</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_List.html#Groups_List.monoid_add_class.sum_list|const"><span>sum_list</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.canonically_ordered_monoid_add|locale"><span>canonically_ordered_monoid_add</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.canonically_ordered_monoid_add_class.sum_mset_0_iff|fact"><span class="entity_def" id="Multiset.subset_mset.sum_mset_0_iff|fact"><span class="entity_def" id="Multiset.canonically_ordered_monoid_add.sum_mset_0_iff|fact"><span class="entity_def" id="Multiset.canonically_ordered_monoid_add_class.sum_mset_0_iff|thm"><span class="entity_def" id="Multiset.subset_mset.sum_mset_0_iff|thm"><span class="entity_def" id="Multiset.canonically_ordered_monoid_add.sum_mset_0_iff|thm"><span>sum_mset_0_iff</span></span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_comm_monoid_add|locale"><span>ordered_comm_monoid_add</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_79685..79690">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.ordered_comm_monoid_add_class.sum_mset_mono|fact"><span class="entity_def" id="Multiset.subset_mset.sum_mset_mono|fact"><span class="entity_def" id="Multiset.ordered_comm_monoid_add.sum_mset_mono|fact"><span class="entity_def" id="Multiset.ordered_comm_monoid_add_class.sum_mset_mono|thm"><span class="entity_def" id="Multiset.subset_mset.sum_mset_mono|thm"><span class="entity_def" id="Multiset.ordered_comm_monoid_add.sum_mset_mono|thm"><span>sum_mset_mono</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_79685..79690"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>add_mono</span><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_comm_monoid_add|locale"><span>cancel_comm_monoid_add</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_79893..79898">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.cancel_comm_monoid_add_class.sum_mset_diff|fact"><span class="entity_def" id="Multiset.cancel_comm_monoid_add.sum_mset_diff|fact"><span class="entity_def" id="Multiset.cancel_comm_monoid_add_class.sum_mset_diff|thm"><span class="entity_def" id="Multiset.cancel_comm_monoid_add.sum_mset_diff|thm"><span>sum_mset_diff</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_79893..79898"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.le_iff_add|fact"><span>subset_mset.le_iff_add</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.semiring_0|locale"><span>semiring_0</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.semiring_0_class.sum_mset_distrib_left|fact"><span class="entity_def" id="Multiset.semiring_0.sum_mset_distrib_left|fact"><span class="entity_def" id="Multiset.semiring_0_class.sum_mset_distrib_left|thm"><span class="entity_def" id="Multiset.semiring_0.sum_mset_distrib_left|thm"><span>sum_mset_distrib_left</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∑</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∑</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.semiring_0_class.sum_mset_distrib_right|fact"><span class="entity_def" id="Multiset.semiring_0.sum_mset_distrib_right|fact"><span class="entity_def" id="Multiset.semiring_0_class.sum_mset_distrib_right|thm"><span class="entity_def" id="Multiset.semiring_0.sum_mset_distrib_right|thm"><span>sum_mset_distrib_right</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>∑</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∑</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.sum_mset_product|fact"><span class="entity_def" id="Multiset.sum_mset_product|thm"><span>sum_mset_product</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_add|class"><span>comm_monoid_add</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times|class"><span>times</span></a><span class="main"><span>}</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.semiring_0|class"><span>semiring_0</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>∑</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∑</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∑</span></span><span class="bound"><span>i</span></span><span class="main"><span>∈#</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∑</span></span><span class="bound"><span>j</span></span><span class="main"><span>∈#</span></span><span class="free"><span>B</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset.swap|fact"><span>sum_mset.swap</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.semiring_0_class.sum_mset_distrib_left|fact"><span>sum_mset_distrib_left</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.semiring_0_class.sum_mset_distrib_right|fact"><span>sum_mset_distrib_right</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.semiring_1|locale"><span>semiring_1</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.semiring_1_class.sum_mset_replicate_mset|fact"><span class="entity_def" id="Multiset.semiring_1.sum_mset_replicate_mset|fact"><span class="entity_def" id="Multiset.semiring_1_class.sum_mset_replicate_mset|thm"><span class="entity_def" id="Multiset.semiring_1.sum_mset_replicate_mset|thm"><span>sum_mset_replicate_mset</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.semiring_1_class.of_nat|const"><span>of_nat</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.semiring_1_class.sum_mset_delta|fact"><span class="entity_def" id="Multiset.semiring_1.sum_mset_delta|fact"><span class="entity_def" id="Multiset.semiring_1_class.sum_mset_delta|thm"><span class="entity_def" id="Multiset.semiring_1.sum_mset_delta|thm"><span>sum_mset_delta</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.semiring_1_class.of_nat|const"><span>of_nat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.semiring_1_class.sum_mset_delta&apos;|fact"><span class="entity_def" id="Multiset.semiring_1.sum_mset_delta&apos;|fact"><span class="entity_def" id="Multiset.semiring_1_class.sum_mset_delta&apos;|thm"><span class="entity_def" id="Multiset.semiring_1.sum_mset_delta&apos;|thm"><span>sum_mset_delta'</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.semiring_1_class.of_nat|const"><span>of_nat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.of_nat_sum_mset|fact"><span class="entity_def" id="Multiset.of_nat_sum_mset|thm"><span>of_nat_sum_mset</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.semiring_1_class.of_nat|const"><span>of_nat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>sum_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.semiring_1_class.of_nat|const"><span>of_nat</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_eq_sum_mset|fact"><span class="entity_def" id="Multiset.size_eq_sum_mset|thm"><span>size_eq_sum_mset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∑</span></span><span class="bound"><span>a</span></span><span class="main"><span>∈#</span></span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_const_eq|fact"><span>image_mset_const_eq</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_mset_set|fact"><span class="entity_def" id="Multiset.size_mset_set|thm"><span>size_mset_set</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_eq_sum_mset|fact"><span>size_eq_sum_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.card_eq_sum|fact"><span>card_eq_sum</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_unfold_sum_mset|fact"><span>sum_unfold_sum_mset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.sum_mset_constant|fact"><span class="entity_def" id="Multiset.sum_mset_constant|thm"><span>sum_mset_constant</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.semiring_1|class"><span>semiring_1</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="main"><span>∑</span></span><span class="bound"><span>x</span></span><span class="main"><span>∈#</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.semiring_1_class.of_nat|const"><span>of_nat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="free"><span>y</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.set_mset_Union_mset|fact"><span class="entity_def" id="Multiset.set_mset_Union_mset|thm"><span>set_mset_Union_mset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>∑<span class="hidden">⇩</span><sub>#</sub></span></a></span><span> </span><span class="free"><span>MM</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋃</span></span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>MM</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>MM</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.in_Union_mset_iff|fact"><span class="entity_def" id="Multiset.in_Union_mset_iff|thm"><span>in_Union_mset_iff</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>∑<span class="hidden">⇩</span><sub>#</sub></span></a></span><span> </span><span class="free"><span>MM</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>MM</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>MM</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.count_sum|fact"><span class="entity_def" id="Multiset.count_sum|thm"><span>count_sum</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum|const"><span>sum</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum|const"><span>sum</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.infinite_finite_induct|fact"><span>infinite_finite_induct</span></a><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_81870..81875">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.sum_eq_empty_iff|fact"><span class="entity_def" id="Multiset.sum_eq_empty_iff|thm"><span>sum_eq_empty_iff</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_add_class.sum|const"><span>sum</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span class="main"><span>∈</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_81870..81875"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.Union_mset_empty_conv|fact"><span class="entity_def" id="Multiset.Union_mset_empty_conv|thm"><span>Union_mset_empty_conv</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>∑<span class="hidden">⇩</span><sub>#</sub></span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>i</span></span><span class="main"><span>∈#</span></span><span class="free"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.Union_image_single_mset|fact"><span class="entity_def" id="Multiset.Union_image_single_mset|thm"><span>Union_image_single_mset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset|const"><span>∑<span class="hidden">⇩</span><sub>#</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_mult|locale"><span>comm_monoid_mult</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.union_disjoint|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.distrib|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.swap|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.F_image_mset_product|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.neutral_const|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.neutral|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.remove|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.insert|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.add_mset|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.union|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.singleton|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.empty|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.eq_fold|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.comm_monoid_mset_axioms|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_def|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_def|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.union_disjoint|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.distrib|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.swap|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.F_image_mset_product|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.neutral|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.remove|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.eq_fold|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_def|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.neutral_const|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.insert|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.add_mset|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.union|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.singleton|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.empty|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.comm_monoid_mset_axioms|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_def|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_def|axiom"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset.F|const"><span class="entity_def" id="offset_82215..82224">sublocale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> prod_mset</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mset|locale"><span>comm_monoid_mset</span></a><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>times</span></a></span><span> </span><span class="quoted"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_dict|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset.cong|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_dict|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset.cong|thm"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_dict|axiom"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset|const"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset|const"><span>prod_mset</span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Library.Multiset.html#offset_76680..76681"><span>prod_mset.F</span></a></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_empty|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_empty|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_empty|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_empty|thm"><span>prod_mset_empty</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_82215..82224"><span>prod_mset.empty</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_singleton|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_singleton|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_singleton|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_singleton|thm"><span>prod_mset_singleton</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_82215..82224"><span>prod_mset.singleton</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_Un|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_Un|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_Un|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_Un|thm"><span>prod_mset_Un</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_82215..82224"><span>prod_mset.union</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_prod_list|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_prod_list|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_prod_list|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_prod_list|thm"><span>prod_mset_prod_list</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_List.html#Groups_List.monoid_mult_class.prod_list|const"><span>prod_list</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_replicate_mset|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_replicate_mset|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_replicate_mset|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_replicate_mset|thm"><span>prod_mset_replicate_mset</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_mset|const"><span>replicate_mset</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><span class="free"><span>n</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>n</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_unfold_prod_mset|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_unfold_prod_mset|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_unfold_prod_mset|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_unfold_prod_mset|thm"><span>prod_unfold_prod_mset</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_mult_class.prod|const"><span>prod</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_multiplicity|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_multiplicity|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_multiplicity|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_multiplicity|thm"><span>prod_mset_multiplicity</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups_Big.html#Groups_Big.comm_monoid_mult_class.prod|const"><span>prod</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.fold_mset_def|fact"><span>fold_mset_def</span></a><span> </span><span>prod.eq_fold</span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_82215..82224"><span>prod_mset.eq_fold</span></a><span> </span><span>funpow_times_power</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><span>comp_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_delta|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_delta|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_delta|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_delta|thm"><span>prod_mset_delta</span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_delta&apos;|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_delta&apos;|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_delta&apos;|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_delta&apos;|thm"><span>prod_mset_delta'</span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_83327..83332">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_subset_imp_dvd|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_subset_imp_dvd|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.prod_mset_subset_imp_dvd|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.prod_mset_subset_imp_dvd|thm"><span class="entity_def" id="offset_83333..83357">prod_mset_subset_imp_dvd</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>   </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.dvd_class.dvd|const"><span>dvd</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_83327..83332"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.diff_add|fact"><span>subset_mset.diff_add</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.dvd_class.dvd|const"><span>dvd</span></a></span><span> </span><span class="main"><span>…</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_83636..83641">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.comm_monoid_mult_class.dvd_prod_mset|fact"><span class="entity_def" id="Multiset.comm_monoid_mult.dvd_prod_mset|fact"><span class="entity_def" id="Multiset.comm_monoid_mult_class.dvd_prod_mset|thm"><span class="entity_def" id="Multiset.comm_monoid_mult.dvd_prod_mset|thm"><span>dvd_prod_mset</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.dvd_class.dvd|const"><span>dvd</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_83636..83641"><span>assms</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_83333..83357"><span>prod_mset_subset_imp_dvd</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>notation</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword1"><span>∏<span class="hidden">⇩</span><sub>#</sub></span></span><span>"</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span> </span><span class="main"><span>(</span></span><span>ASCII</span><span class="main"><span>)</span></span><span>
  </span><span class="quoted"><span>"</span><span>_prod_mset_image</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>pttrn</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_mult|class"><span>comm_monoid_mult</span></a><span>"</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(3</span></span><span class="keyword1"><span>PROD</span></span><span> </span><span>_</span><span class="keyword1"><span>:#</span></span><span>_</span><span class="keyword1"><span>.</span></span><span> </span><span>_</span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>,</span></span><span> 10</span><span class="main"><span>]</span></span><span> 10</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>syntax</span></span></span><span>
  </span><span class="quoted"><span>"</span><span>_prod_mset_image</span><span>"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span>pttrn</span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_mult|class"><span>comm_monoid_mult</span></a><span>"</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="quoted"><span>"</span><span class="keyword3"><span>(3</span></span><span class="keyword1"><span>∏</span></span><span>_</span><span class="keyword1"><span>∈#</span></span><span>_</span><span class="keyword1"><span>.</span></span><span> </span><span>_</span><span class="keyword3"><span>)</span></span><span>"</span></span><span> </span><span class="main"><span>[</span></span><span>0</span><span class="main"><span>,</span></span><span> 51</span><span class="main"><span>,</span></span><span> 10</span><span class="main"><span>]</span></span><span> 10</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>translations</span></span></span><span>
  </span><span class="quoted"><span>"</span><span class="main"><span>∏</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span><span> </span><span class="main"><span>⇌</span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>CONST</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="free"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.prod_mset_constant|fact"><span class="entity_def" id="Multiset.prod_mset_constant|thm"><span>prod_mset_constant</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>∏</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>∈#</span></span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_const_eq|fact"><span>image_mset_const_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.semidom|locale"><span>semidom</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Multiset.semidom_class.prod_mset_zero_iff|fact"><span class="entity_def" id="Multiset.semidom.prod_mset_zero_iff|fact"><span class="entity_def" id="Multiset.semidom_class.prod_mset_zero_iff|thm"><span class="entity_def" id="Multiset.semidom.prod_mset_zero_iff|thm"><span>prod_mset_zero_iff</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_84299..84304">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.semidom_divide|locale"><span>semidom_divide</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Multiset.semidom_divide_class.prod_mset_diff|fact"><span class="entity_def" id="Multiset.semidom_divide.prod_mset_diff|fact"><span class="entity_def" id="Multiset.semidom_divide_class.prod_mset_diff|thm"><span class="entity_def" id="Multiset.semidom_divide.prod_mset_diff|thm"><span class="entity_def" id="offset_84325..84339">prod_mset_diff</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_84299..84304"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>C</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>C</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.add_diff_inverse|fact"><span>subset_mset.add_diff_inverse</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_84299..84304"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_84562..84567">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.semidom_divide|locale"><span>semidom_divide</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Multiset.semidom_divide_class.prod_mset_minus|fact"><span class="entity_def" id="Multiset.semidom_divide.prod_mset_minus|fact"><span class="entity_def" id="Multiset.semidom_divide_class.prod_mset_minus|thm"><span class="entity_def" id="Multiset.semidom_divide.prod_mset_minus|thm"><span>prod_mset_minus</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_84562..84567"><span>assms</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_84325..84339"><span>prod_mset_diff</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="free"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom|locale"><span>normalization_semidom</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Multiset.normalization_semidom_class.normalize_prod_mset_normalize|fact"><span class="entity_def" id="Multiset.normalization_semidom.normalize_prod_mset_normalize|fact"><span class="entity_def" id="Multiset.normalization_semidom_class.normalize_prod_mset_normalize|thm"><span class="entity_def" id="Multiset.normalization_semidom.normalize_prod_mset_normalize|thm"><span>normalize_prod_mset_normalize</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_84910..84913">add</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
          </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_84910..84913"><span>add.IH</span></a><span>
  </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.algebraic_semidom|locale"><span>algebraic_semidom</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Multiset.algebraic_semidom_class.is_unit_prod_mset_iff|fact"><span class="entity_def" id="Multiset.algebraic_semidom.is_unit_prod_mset_iff|fact"><span class="entity_def" id="Multiset.algebraic_semidom_class.is_unit_prod_mset_iff|thm"><span class="entity_def" id="Multiset.algebraic_semidom.is_unit_prod_mset_iff|thm"><span>is_unit_prod_mset_iff</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.algebraic_semidom_class.is_unit|const"><span>is_unit</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.algebraic_semidom_class.is_unit|const"><span>is_unit</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>is_unit_mult_iff</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_multiplicative|locale"><span>normalization_semidom_multiplicative</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Multiset.normalization_semidom_multiplicative_class.normalize_prod_mset|fact"><span class="entity_def" id="Multiset.normalization_semidom_multiplicative.normalize_prod_mset|fact"><span class="entity_def" id="Multiset.normalization_semidom_multiplicative_class.normalize_prod_mset|thm"><span class="entity_def" id="Multiset.normalization_semidom_multiplicative.normalize_prod_mset|thm"><span class="entity_def" id="offset_85329..85348">normalize_prod_mset</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>normalize_mult</span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_85463..85468">lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_multiplicative|locale"><span>normalization_semidom_multiplicative</span></a><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Multiset.normalization_semidom_multiplicative_class.normalized_prod_msetI|fact"><span class="entity_def" id="Multiset.normalization_semidom_multiplicative.normalized_prod_msetI|fact"><span class="entity_def" id="Multiset.normalization_semidom_multiplicative_class.normalized_prod_msetI|thm"><span class="entity_def" id="Multiset.normalization_semidom_multiplicative.normalized_prod_msetI|thm"><span>normalized_prod_msetI</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_85463..85468"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.normalization_semidom_class.normalize|const"><span>normalize</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_85329..85348"><span>normalize_prod_mset</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Multiset as order-ignorant lists</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|locale"><span>linorder</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.mset_insort|fact"><span class="entity_def" id="Multiset.linorder.mset_insort|fact"><span class="entity_def" id="Multiset.linorder_class.mset_insort|thm"><span class="entity_def" id="Multiset.linorder.mset_insort|thm"><span>mset_insort</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.insort_key|const"><span>insort_key</span></a><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.mset_sort|fact"><span class="entity_def" id="Multiset.linorder.mset_sort|fact"><span class="entity_def" id="Multiset.linorder_class.mset_sort|thm"><span class="entity_def" id="Multiset.linorder.mset_sort|thm"><span>mset_sort</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>k</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>
  </span><span>This lemma shows which properties suffice to show that a function
</span><span>  </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>f›</span></span></span><span> with </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>f xs = ys›</span></span></span><span> behaves like sort.</span><span>
</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_86148..86153">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.properties_for_sort_key|fact"><span class="entity_def" id="Multiset.linorder.properties_for_sort_key|fact"><span class="entity_def" id="Multiset.linorder_class.properties_for_sort_key|thm"><span class="entity_def" id="Multiset.linorder.properties_for_sort_key|thm"><span class="entity_def" id="offset_86154..86177">properties_for_sort_key</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_86148..86153"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_86441..86445">Cons</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_86441..86445"><span>Cons.prems</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remove1|const"><span>remove1</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>xs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter_remove1|fact"><span>filter_remove1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_86441..86445"><span>Cons.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remove1|const"><span>remove1</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>ys</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_86441..86445"><span>Cons.hyps</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sorted_map_remove1</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_86441..86445"><span>Cons.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="skolem"><span>ys</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>ys</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_86441..86445"><span>Cons.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>insort_key_remove1</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.properties_for_sort|fact"><span class="entity_def" id="Multiset.linorder.properties_for_sort|fact"><span class="entity_def" id="Multiset.linorder_class.properties_for_sort|thm"><span class="entity_def" id="Multiset.linorder.properties_for_sort|thm"><span>properties_for_sort</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_86925..86933">multiset</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort|const"><span>sort</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_86154..86177"><span>properties_for_sort_key</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_86925..86933"><span>multiset</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="free"><span>ys</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_86925..86933"><span>multiset</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>k</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_eq_length_filter|fact"><span>mset_eq_length_filter</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.replicate|const"><span>replicate</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.replicate|const"><span>replicate</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>k</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>k</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.replicate_length_filter|fact"><span>replicate_length_filter</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.sort_key_inj_key_eq|fact"><span class="entity_def" id="Multiset.linorder.sort_key_inj_key_eq|fact"><span class="entity_def" id="Multiset.linorder_class.sort_key_inj_key_eq|thm"><span class="entity_def" id="Multiset.linorder.sort_key_inj_key_eq|thm"><span class="entity_def" id="offset_87526..87545">sort_key_inj_key_eq</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_87557..87567">mset_equal</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_86154..86177"><span>properties_for_sort_key</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_87557..87567"><span>mset_equal</span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_87822..87826">show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>ys</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>k</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_87557..87567"><span>mset_equal</span></a><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_87930..87939">set_equal</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_eq_setD|fact"><span>mset_eq_setD</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_87822..87826"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_88072..88075">inj</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_87930..87939"><span>set_equal</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_88072..88075"><span>inj</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>ys</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>HOL.eq</span></a><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.inj_on_filter_key_eq|fact"><span>inj_on_filter_key_eq</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.replicate|const"><span>replicate</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_count_mset_eq_filter_eq|fact"><span>replicate_count_mset_eq_filter_eq</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.replicate|const"><span>replicate</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_87557..87567"><span>mset_equal</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>HOL.eq</span></a><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.replicate_count_mset_eq_filter_eq|fact"><span>replicate_count_mset_eq_filter_eq</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_88072..88075"><span>inj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.inj_on_filter_key_eq|fact"><span>inj_on_filter_key_eq</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_87930..87939"><span>set_equal</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_88696..88701">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.sort_key_eq_sort_key|fact"><span class="entity_def" id="Multiset.linorder.sort_key_eq_sort_key|fact"><span class="entity_def" id="Multiset.linorder_class.sort_key_eq_sort_key|thm"><span class="entity_def" id="Multiset.linorder.sort_key_eq_sort_key|thm"><span>sort_key_eq_sort_key</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_87526..87545"><span>sort_key_inj_key_eq</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_88696..88701"><span>assms</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.sort_key_by_quicksort|fact"><span class="entity_def" id="Multiset.linorder.sort_key_by_quicksort|fact"><span class="entity_def" id="Multiset.linorder_class.sort_key_by_quicksort|thm"><span class="entity_def" id="Multiset.linorder.sort_key_by_quicksort|thm"><span class="entity_def" id="offset_88883..88904">sort_key_by_quicksort</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="var"><span>?lhs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_86154..86177"><span>properties_for_sort_key</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="var"><span>?rhs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="var"><span>?lhs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eqI|fact"><span>multiset_eqI</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="var"><span>?rhs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sorted_append</span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sorted_map_same</span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>l</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?pivot</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_89391..89392">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><span>filter_sort</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_86154..86177"><span>properties_for_sort_key</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>sorted_map_same</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_89391..89392"><span>*</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_89597..89599">**</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>P</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?pivot</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?pivot</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_89751..89755">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>P</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?pivot</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>P</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="var"><span>?pivot</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_89880..89883">***</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_89751..89755"><span>this</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_89751..89755"><span>this</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>(&gt;)</span></a></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_89751..89755"><span>this</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>(=)</span></a></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="var"><span>?rhs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="var"><span>?lhs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?pivot</span></span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>linorder_cases</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_90048..90052">less</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="var"><span>?pivot</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="var"><span>?pivot</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_90048..90052"><span>less</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>filter_sort</span><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_89597..89599"><span>**</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_89880..89883"><span>***</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>equal</span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_89391..89392"><span>*</span></a><span> </span><span>less_le</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_90277..90284">greater</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="var"><span>?pivot</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="var"><span>?pivot</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_90277..90284"><span>greater</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span>filter_sort</span><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_89597..89599"><span>**</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_89880..89883"><span>***</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.sort_by_quicksort|fact"><span class="entity_def" id="Multiset.linorder.sort_by_quicksort|fact"><span class="entity_def" id="Multiset.linorder_class.sort_by_quicksort|thm"><span class="entity_def" id="Multiset.linorder.sort_by_quicksort|thm"><span>sort_by_quicksort</span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort|const"><span>sort</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort|const"><span>sort</span></a><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort|const"><span>sort</span></a><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort|const"><span>sort</span></a><span> </span><span class="var"><span>?lhs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?rhs</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_88883..88904"><span>sort_key_by_quicksort</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>A stable parameterized quicksort</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.linorder_class.part_def|fact"><span class="entity_def" id="Multiset.linorder.part_def|fact"><span class="entity_def" id="Multiset.linorder_class.part_def|thm"><span class="entity_def" id="Multiset.linorder.part_def|thm"><span class="entity_def" id="Multiset.linorder.part_def_raw|axiom"><span class="entity_def" id="offset_90730..90740">definition</span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.linorder_class.part_dict|fact"><span class="entity_def" id="Multiset.linorder.part.cong|fact"><span class="entity_def" id="Multiset.linorder_class.part_dict|thm"><span class="entity_def" id="Multiset.linorder.part.cong|thm"><span class="entity_def" id="Multiset.linorder_class.part_dict|axiom"><span class="entity_def" id="Multiset.linorder_class.part|const"><span class="entity_def" id="Multiset.linorder.part|const"><span>part</span></span></span></span></span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>part</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>pivot</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>pivot</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>pivot</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>pivot</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.part_code|fact"><span class="entity_def" id="Multiset.linorder.part_code|fact"><span class="entity_def" id="Multiset.linorder_class.part_code(2)|thm"><span class="entity_def" id="Multiset.linorder_class.part_code(1)|thm"><span class="entity_def" id="Multiset.linorder.part_code(2)|thm"><span class="entity_def" id="Multiset.linorder.part_code(1)|thm"><span>part_code</span></span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.part|const"><span>part</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>pivot</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>,</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>,</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.part|const"><span>part</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>pivot</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>lts</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>eqs</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>gts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.part|const"><span>part</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>pivot</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>;</span></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>in</span></span><span>
     </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>pivot</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="bound"><span>lts</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>eqs</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>gts</span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="free"><span>pivot</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>lts</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>eqs</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="bound"><span>gts</span></span><span class="main"><span>)</span></span><span>
     </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>lts</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="bound"><span>eqs</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>gts</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_90730..90740"><span>part_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.split_def|fact"><span>split_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.linorder_class.sort_key_by_quicksort_code|fact"><span class="entity_def" id="Multiset.linorder.sort_key_by_quicksort_code|fact"><span class="entity_def" id="Multiset.linorder_class.sort_key_by_quicksort_code|thm"><span class="entity_def" id="Multiset.linorder.sort_key_by_quicksort_code|thm"><span>sort_key_by_quicksort_code</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="keyword1"><span>of</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>
    </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span>xs</span></span><span>
    </span><span class="main"><span>|</span></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><span>[</span></span><span class="bound"><span>y</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>|</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>⇒</span></span><span>
        </span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>lts</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>eqs</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>gts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.part|const"><span>part</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span>
        </span><span class="keyword1"><span>in</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>lts</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="bound"><span>eqs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>gts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_91570..91574">Cons</span><span> _ </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_91586..91590">hyps</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_91570..91574"><span>Cons</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>ys</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span> </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_91586..91590"><span>hyps</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_91691..91695">Cons</span><span> _ </span><span class="skolem"><span>zs</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_91707..91711">hyps</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_91586..91590"><span>hyps</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_91691..91695"><span>Cons</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>zs</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span> </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_91707..91711"><span>hyps</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_91824..91828">Cons</span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_88883..88904"><span>sort_key_by_quicksort</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>lts</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>eqs</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>gts</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.part|const"><span>part</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span>
        </span><span class="keyword1"><span>in</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>lts</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="bound"><span>eqs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sort_key|const"><span>sort_key</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>gts</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.split_def|fact"><span>split_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_90730..90740"><span>part_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.fst_conv|fact"><span>fst_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.snd_conv|fact"><span>snd_conv</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_91707..91711"><span>hyps</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_91824..91828"><span>Cons</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.cases|fact"><span>list.cases</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>hide_const</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>open</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.linorder_class.part|const"><span>part</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_remdups_subset_eq|fact"><span class="entity_def" id="Multiset.mset_remdups_subset_eq|thm"><span>mset_remdups_subset_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remdups|const"><span>remdups</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.order_trans|fact"><span>subset_mset.order_trans</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_update|fact"><span class="entity_def" id="Multiset.mset_update|thm"><span>mset_update</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>ls</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>ls</span></span><span class="main"><span>[</span></span><span class="free"><span>i</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ls</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>ls</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>ls</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_92478..92482">Cons</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>i</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Suc</span><span> </span><span class="skolem"><span>i'</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_92478..92482"><span>Cons</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="skolem"><span>i'</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_swap|fact"><span class="entity_def" id="Multiset.mset_swap|thm"><span>mset_swap</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>ls</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>ls</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>ls</span></span><span class="main"><span>[</span></span><span class="free"><span>j</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span>ls</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ls</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_update|fact"><span>mset_update</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.nth_mem_mset|fact"><span>nth_mem_mset</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_eq_finite|fact"><span class="entity_def" id="Multiset.mset_eq_finite|thm"><span>mset_eq_finite</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>ys</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="bound"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{</span></span><span class="bound"><span>ys</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="bound"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>ys</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_eq_setD|fact"><span>mset_eq_setD</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_eq_length|fact"><span>mset_eq_length</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>ys</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>}</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.finite_lists_length_le|fact"><span>finite_lists_length_le</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_subset|fact"><span>finite_subset</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>The multiset order</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.mult1_def|fact"><span class="entity_def" id="Multiset.mult1_def|thm"><span class="entity_def" id="Multiset.mult1_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.mult1|const"><span>mult1</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mult1</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>N</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>M0</span></span><span> </span><span class="bound"><span>K</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span>
      </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="bound"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.mult_def|fact"><span class="entity_def" id="Multiset.mult_def|thm"><span class="entity_def" id="Multiset.mult_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.mult|const"><span>mult</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mult</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl|const"><span><span class="hidden">⇧</span><sup>+</sup></span></a></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.multp_def|fact"><span class="entity_def" id="Multiset.multp_def|thm"><span class="entity_def" id="Multiset.multp_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.multp|const"><span>multp</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>multp</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_93637..93642">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mult1I|fact"><span class="entity_def" id="Multiset.mult1I|thm"><span>mult1I</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_93637..93642"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1_def|fact"><span>mult1_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_93799..93804">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mult1E|fact"><span class="entity_def" id="Multiset.mult1E|thm"><span>mult1E</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M0</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_93799..93804"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1_def|fact"><span>mult1_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_93968..93973">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mono_mult1|fact"><span class="entity_def" id="Multiset.mono_mult1|thm"><span>mono_mult1</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>r'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span>r'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1_def|fact"><span>mult1_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_93968..93973"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_94076..94081">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mono_mult|fact"><span class="entity_def" id="Multiset.mono_mult|thm"><span>mono_mult</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>r'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>r'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_def|fact"><span>mult_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mono_mult1|fact"><span>mono_mult1</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_94076..94081"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl_mono|fact"><span>trancl_mono</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mono_multp|fact"><span class="entity_def" id="Multiset.mono_multp|thm"><span>mono_multp</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/inductive.ML.html#Inductive.mono|attribute"><span class="operator"><span>mono</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>r'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>r'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.le_fun_def|fact"><span>le_fun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.le_bool_def|fact"><span>le_bool_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.allI|fact"><span>allI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.impI|fact"><span>impI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>xa</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>xa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>r'</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>xa</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r'</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>r'</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>N</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mono_mult|fact"><span>mono_mult</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetD|fact"><span>subsetD</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>rotated</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.not_less_empty|fact"><span class="entity_def" id="Multiset.not_less_empty|thm"><span>not_less_empty</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1_def|fact"><span>mult1_def</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Well-foundedness</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.less_add|fact"><span class="entity_def" id="Multiset.less_add|thm"><span>less_add</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_94690..94695">mult1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>M</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>M0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span>
     </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>K</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="bound"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>K</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?r</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>K</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="bound"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?R</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>N</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>M0</span></span><span> </span><span class="bound"><span>K</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="var"><span>?r</span></span><span> </span><span class="bound"><span>K</span></span><span> </span><span class="bound"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M0'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_94980..94982">M0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a'</span></span><span> </span><span class="skolem"><span>M0'</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_95026..95027">N</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>M0'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_95051..95052">r</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?r</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="skolem"><span>a'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_94690..94695"><span>mult1</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1_def|fact"><span>mult1_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?case1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="var"><span>?case2</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_94980..94982"><span>M0</span></a><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>M0'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>a'</span></span><span>"</span></span></span><span>
      </span><span class="main"><span>|</span></span><span> </span><span class="skolem"><span>K'</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a'</span></span><span> </span><span class="skolem"><span>K'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M0'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="skolem"><span>K'</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/atomize_elim.ML.html#HOL.atomize_elim|method"><span class="operator"><span>atomize_elim</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_eq_conv_ex|fact"><span>add_eq_conv_ex</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_95026..95027"><span>N</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_95051..95052"><span>r</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?r</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case2</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_95482..95483">2</span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_95026..95027"><span>N</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_95482..95483"><span>2</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_95507..95508">n</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>K'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_95051..95052"><span>r</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_95482..95483"><span>2</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?R</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>K'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>M0</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_95507..95508"><span>n</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case1</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1_def|fact"><span>mult1_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.all_accessible|fact"><span class="entity_def" id="Multiset.all_accessible|thm"><span>all_accessible</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf|const"><span>wf</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.acc|const"><span>Wellfounded.acc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?R</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?W</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.acc|const"><span>Wellfounded.acc</span></a><span> </span><span class="var"><span>?R</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>M0</span></span><span> </span><span class="skolem"><span>a</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_95861..95863">M0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_95885..95891">wf_hyp</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="var"><span>?W</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_95951..95958">acc_hyp</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>M</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>M</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>M0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.acc.accI|fact"><span>accI</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a></a><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M0</span></span></span><span>"</span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>N</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>N</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?R</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>M</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>M0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?R</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M</span></span><span>"</span></span></span><span>
        </span><span class="main"><span>|</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/atomize_elim.ML.html#HOL.atomize_elim|method"><span class="operator"><span>atomize_elim</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.less_add|fact"><span>less_add</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
        </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_95951..95958"><span>acc_hyp</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_96361..96365">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>M</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>M0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_96361..96365"><span>this</span></a><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="skolem"><span>M</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>M0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?R</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_96550..96554">case</span></span></span><span> </span><span class="entity_def" id="offset_96555..96556">2</span><span>
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_96550..96554"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>K</span></span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span>
          </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_95861..95863"><span>M0</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
          </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_96719..96722">add</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_96719..96722"><span>add.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
          </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_95885..95891"><span>wf_hyp</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="var"><span>?W</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_96719..96722"><span>add</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
          </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>only</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_96555..96556"><span>2</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_97090..97091">}</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_97097..97114">tedious_reasoning</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_97090..97091"><span>this</span></a><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>M</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>M</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.acc.accI|fact"><span>accI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?R</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_less_empty|fact"><span>not_less_empty</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.contradiction|method"><span class="operator"><span>contradiction</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf|const"><span>wf</span></a><span> </span><span class="free"><span>r</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_97351..97355">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="var"><span>?W</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span>
      </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_97427..97428">r</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="var"><span>?W</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><span class="var"><span>?W</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.acc_induct|fact"><span>acc_induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_97097..97114"><span>tedious_reasoning</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_97427..97428"><span>r</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_97351..97355"><span>this</span></a><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>›</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="var"><span>?W</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.wf_mult1|fact"><span class="entity_def" id="Multiset.wf_mult1|thm"><span>wf_mult1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf|const"><span>wf</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf|const"><span>wf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.acc_wfI|fact"><span>acc_wfI</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.all_accessible|fact"><span>all_accessible</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.wf_mult|fact"><span class="entity_def" id="Multiset.wf_mult|thm"><span>wf_mult</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf|const"><span>wf</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf|const"><span>wf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_def|fact"><span>mult_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf_trancl|fact"><span>wf_trancl</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wf_mult1|fact"><span>wf_mult1</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.wfP_multp|fact"><span class="entity_def" id="Multiset.wfP_multp|thm"><span>wfP_multp</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wfP|const"><span>wfP</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wfP|const"><span>wfP</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wfP_def|fact"><span>wfP_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wf_mult|fact"><span>wf_mult</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Closure-free presentation</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>One direction.</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mult_implies_one_step|fact"><span class="entity_def" id="Multiset.mult_implies_one_step|thm"><span>mult_implies_one_step</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span>
    </span><span class="entity_def" id="offset_98128..98133">trans</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_98153..98155">MN</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>I</span></span><span> </span><span class="bound"><span>J</span></span><span> </span><span class="bound"><span>K</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>J</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98153..98155"><span>MN</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_def|fact"><span>mult_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1_def|fact"><span>mult1_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.converse_trancl_induct|fact"><span>converse_trancl_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>base</span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_98411..98415">case</span></span></span><span> </span><span class="main"><span>(</span></span><span>step</span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>z</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_98432..98434">yz</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98411..98415"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>zN</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98411..98415"><span>this</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_98466..98474">N_decomp</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98411..98415"><span>this</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>I</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>J</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="entity_def" id="offset_98510..98511">N</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>k</span></span><span class="main"><span>∈#</span></span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>j</span></span><span class="main"><span>∈#</span></span><span class="skolem"><span>J</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98466..98474"><span>N_decomp</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M0</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="entity_def" id="offset_98629..98630">z</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M0</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_98656..98657">y</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_98677..98678">K</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>K'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>b</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98432..98434"><span>yz</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_98776..98780">True</span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_98794..98798">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>j</span></span><span class="main"><span>∈#</span></span><span class="skolem"><span>J</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>K'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>k</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98677..98678"><span>K</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98510..98511"><span>N</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98128..98133"><span>trans</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98776..98780"><span>True</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98794..98798"><span>that</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transE|fact"><span>transE</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span> x </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>I</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule_tac</span></span><span> x </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>J</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule_tac</span></span><span> x </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>a</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98629..98630"><span>z</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98656..98657"><span>y</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98510..98511"><span>N</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.add_diff_assoc2|fact"><span>subset_mset.add_diff_assoc2</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_diffD|fact"><span>in_diffD</span></a><span>›</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_99111..99116">False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>I</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98510..98511"><span>N</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_iff|fact"><span>union_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_single_eq_member|fact"><span>union_single_eq_member</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98629..98630"><span>z</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98510..98511"><span>N</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98629..98630"><span>z</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span> x </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>a</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>rule_tac</span></span><span> x </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span>
          </span><span class="operator"><span>rule_tac</span></span><span> x </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="operator"><span>use</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98629..98630"><span>z</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98656..98657"><span>y</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98510..98511"><span>N</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_99111..99116"><span>False</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_98677..98678"><span>K</span></a><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.semigroup_add_class.add.assoc|fact"><span>add.assoc</span></a><span>›</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.multp_implies_one_step|fact"><span class="entity_def" id="Multiset.multp_implies_one_step|thm"><span>multp_implies_one_step</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_implies_one_step|fact"><span>mult_implies_one_step</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp_trans|fact"><span>transp_trans</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_99598..99603">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.one_step_implies_mult|fact"><span class="entity_def" id="Multiset.one_step_implies_mult|thm"><span>one_step_implies_mult</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>J</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>J</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_99598..99603"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>J</span></span><span>"</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>I</span></span></span><span> </span><span class="quoted"><span class="free"><span>J</span></span></span><span> </span><span class="quoted"><span class="free"><span>K</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>0</span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_99840..99844">case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_99846..99849">Suc</span><span> </span><span class="skolem"><span>n</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_99858..99860">IH</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_99840..99844"><span>this</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_99875..99881">size_J</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_99840..99844"><span>this</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.sym|fact"><span>sym</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>J'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_99922..99923">J</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>J'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_99875..99881"><span>size_J</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_eq_Suc_imp_eq_union|fact"><span>size_eq_Suc_imp_eq_union</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_99922..99923"><span>J</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_99846..99849"><span>Suc</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_def|fact"><span>mult_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1_def|fact"><span>mult1_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_100181..100182">K</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>J'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_99858..99860"><span>IH</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>J'</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
        </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_99922..99923"><span>J</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_99846..99849"><span>Suc.prems</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_100181..100182"><span>K</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_99875..99881"><span>size_J</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈#</span></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>J'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_99922..99923"><span>J</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1_def|fact"><span>mult1_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_def|fact"><span>mult_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_def|fact"><span>mult_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.one_step_implies_multp|fact"><span class="entity_def" id="Multiset.one_step_implies_multp|thm"><span>one_step_implies_multp</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.one_step_implies_mult|fact"><span>one_step_implies_mult</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.subset_implies_mult|fact"><span class="entity_def" id="Multiset.subset_implies_mult|thm"><span>subset_implies_mult</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_100795..100798">sub</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_100850..100855">ApBmA</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_100795..100798"><span>sub</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>BmA</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_100795..100798"><span>sub</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Diff_eq_empty_iff_mset|fact"><span>Diff_eq_empty_iff_mset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.less_le_not_le|fact"><span>subset_mset.less_le_not_le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.one_step_implies_mult|fact"><span>one_step_implies_mult</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="free"><span class="free"><span>B</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span></a></span></a></span><span> </span><span class="free"><span class="free"><span class="free"><span>A</span></span></span></span><span>"</span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span></a></span></a></span><span>"</span></span></span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>A</span></span></span></span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_100850..100855"><span>ApBmA</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.subset_implies_multp|fact"><span class="entity_def" id="Multiset.subset_implies_multp|thm"><span>subset_implies_multp</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_implies_mult|fact"><span>subset_implies_mult</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Monotonicity</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.monotone_on_multp_multp_image_mset|fact"><span class="entity_def" id="Multiset.monotone_on_multp_multp_image_mset|thm"><span>monotone_on_multp_multp_image_mset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.monotone_on|const"><span>monotone_on</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>orda</span></span><span> </span><span class="free"><span>ordb</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp|const"><span>transp</span></a><span> </span><span class="free"><span>orda</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.monotone_on|const"><span>monotone_on</span></a><span> </span><span class="main"><span>{</span></span><span class="bound"><span>M</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>orda</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>ordb</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.monotone_onI|fact"><span>monotone_onI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>M1</span></span><span> </span><span class="skolem"><span>M2</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span>
    </span><span class="entity_def" id="offset_101472..101477">M1_in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>M</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_101514..101519">M2_in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>M</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_101556..101564">M1_lt_M2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>orda</span></span><span> </span><span class="skolem"><span>M1</span></span><span> </span><span class="skolem"><span>M2</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_implies_one_step|fact"><span>multp_implies_one_step</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp|const"><span>transp</span></a><span> </span><span class="free"><span>orda</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_101556..101564"><span>M1_lt_M2</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>I</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>J</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="entity_def" id="offset_101666..101671">M2_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_101694..101699">M1_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_101722..101734">J_neq_mempty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_101754..101765">ball_K_less</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>k</span></span><span class="main"><span>∈#</span></span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>x</span></span><span class="main"><span>∈#</span></span><span class="skolem"><span>J</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>orda</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>ordb</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.one_step_implies_multp|fact"><span>one_step_implies_multp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.ballI|fact"><span>ballI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_101722..101734"><span>J_neq_mempty</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>k'</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k'</span></span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>k</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_102089..102093">k_in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_102142..102146">j_in</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>orda</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="skolem"><span>j</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_101754..101765"><span>ball_K_less</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ordb</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.monotone_on|const"><span>monotone_on</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>orda</span></span><span> </span><span class="free"><span>ordb</span></span><span> </span><span class="free"><span>f</span></span><span>›</span></span></span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.monotone_onD|fact"><span>monotone_onD</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>OF</span></span><span> _ _ </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>orda</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="skolem"><span>j</span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_101694..101699"><span>M1_eq</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_101472..101477"><span>M1_in</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_102089..102093"><span>k_in</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_101666..101671"><span>M2_eq</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_101514..101519"><span>M2_in</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_102142..102146"><span>j_in</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>j</span></span><span class="main"><span>∈#</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>ordb</span></span><span> </span><span class="skolem"><span>k'</span></span><span> </span><span class="bound"><span>j</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>J</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>k'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>ordb</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>M1</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>M2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_101694..101699"><span>M1_eq</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_101666..101671"><span>M2_eq</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_102626..102631">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.monotone_multp_multp_image_mset|fact"><span class="entity_def" id="Multiset.monotone_multp_multp_image_mset|thm"><span>monotone_multp_multp_image_mset</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.monotone|const"><span>monotone</span></a><span> </span><span class="free"><span>orda</span></span><span> </span><span class="free"><span>ordb</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp|const"><span>transp</span></a><span> </span><span class="free"><span>orda</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.monotone|const"><span>monotone</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>orda</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>ordb</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.monotone_on_multp_multp_image_mset|fact"><span>monotone_on_multp_multp_image_mset</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_102626..102631"><span>assms</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_102846..102851">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multp_image_mset_image_msetD|fact"><span class="entity_def" id="Multiset.multp_image_mset_image_msetD|thm"><span>multp_image_mset_image_msetD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp|const"><span>transp</span></a><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_102967..102975">inj_on_f</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_102846..102851"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>I</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>J</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="entity_def" id="offset_103105..103111">f_B_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_103146..103152">f_A_eq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_103187..103199">J_neq_mempty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_103219..103230">ball_K_less</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>k</span></span><span class="main"><span>∈#</span></span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>x</span></span><span class="main"><span>∈#</span></span><span class="skolem"><span>J</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_implies_one_step|fact"><span>multp_implies_one_step</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_103105..103111"><span>f_B_eq</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>I'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>J'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="entity_def" id="offset_103335..103340">B_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>J'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_103360..103365">I_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>I'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_103393..103398">J_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>J'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_eq_plusD|fact"><span>image_mset_eq_plusD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_102967..102975"><span>inj_on_f</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_103483..103492">inj_on_f'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on|const"><span>inj_on</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>I'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.inj_on_subset|fact"><span>inj_on_subset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_103335..103340"><span>B_def</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_103146..103152"><span>f_A_eq</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="entity_def" id="offset_103618..103623">A_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_103643..103648">K_def</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>K'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_103360..103365"><span>I_def</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset_eq_image_mset_plusD|fact"><span>image_mset_eq_image_mset_plusD</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_103483..103492"><span>inj_on_f'</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_103618..103623"><span>A_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_103335..103340"><span>B_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.one_step_implies_multp|fact"><span>one_step_implies_multp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.ballI|fact"><span>ballI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_103187..103199"><span>J_neq_mempty</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_103393..103398"><span>J_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>K'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_103219..103230"><span>ball_K_less</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j'</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>j'</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_103643..103648"><span>K_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span>then</span></span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>J'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>j'</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_103393..103398"><span>J_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∃</span></span><span class="bound"><span>j</span></span><span class="main"><span>∈#</span></span><span class="skolem"><span>J'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>The multiset extension is cancellative for multiset union</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mult_cancel|fact"><span class="entity_def" id="Multiset.mult_cancel|thm"><span>mult_cancel</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irrefl|const"><span>irrefl</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>Z</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>Z</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?L</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="var"><span>?R</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?L</span></span></span></span><span> </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?R</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>Z</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_104433..104436">add</span><span> </span><span class="skolem"><span>z</span></span><span> </span><span class="skolem"><span>Z</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>X'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Y'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Z'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_104468..104469">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>z</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>Z'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>X'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>z</span></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>Z'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>Y'</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Y'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>X'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>Y'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_implies_one_step|fact"><span>mult_implies_one_step</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="free"><span>s</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_104433..104436"><span>add</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span> </span><span class="skolem"><span>Z2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Z'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>z</span></span><span> </span><span class="skolem"><span>Z2</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="skolem"><span>X2</span></span><span> </span><span class="skolem"><span>Y2</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>z</span></span><span> </span><span class="skolem"><span>X2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Y'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>z</span></span><span> </span><span class="skolem"><span>Y2</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_104468..104469"><span>*</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>,</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_remove_trivial_If|fact"><span>add_mset_remove_trivial_If</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert_iff|fact"><span>insert_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_add_mset_insert|fact"><span>set_mset_add_mset_insert</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_iff|fact"><span>union_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span> </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_104468..104469"><span>*</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.one_step_implies_mult|fact"><span>one_step_implies_mult</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>Y'</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>X'</span></span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Z2</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="main"><span>_</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.semigroup_add_class.add.assoc|fact"><span>add.assoc</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_104433..104436"><span>add</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_105058..105059">2</span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>Y2</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>z</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_104468..104469"><span>*</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irrefl|const"><span>irrefl</span></a><span> </span><span class="free"><span>s</span></span><span>›</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irrefl_def|fact"><span>irrefl_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_105174..105182">moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_105174..105182"><span>this</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transD|fact"><span>transD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="free"><span>s</span></span><span>›</span></span></span><span> _ </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_105174..105182"><span>this</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>X2</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>Y2</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x'</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x'</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_105058..105059"><span>2</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_104468..104469"><span>*</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span class="main"><span>[</span></span><span class="operator"><span>rule_format</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>x'</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_104468..104469"><span>*</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.one_step_implies_mult|fact"><span>one_step_implies_mult</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>Y2</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>X2</span></span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>Z'</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_105058..105059"><span>2</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="main"><span>_</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.semigroup_add_class.add.assoc|fact"><span>add.assoc</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_104433..104436"><span>add</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?R</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>I</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>J</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_implies_one_step|fact"><span>mult_implies_one_step</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="free"><span>s</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?L</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.one_step_implies_mult|fact"><span>one_step_implies_mult</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>J</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>K</span></span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>Z</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.multp_cancel|fact"><span class="entity_def" id="Multiset.multp_cancel|thm"><span>multp_cancel</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_cancel|fact"><span>mult_cancel</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>,</span></span><span>
    </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp_trans|fact"><span>transp_trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflp_irrefl_eq|fact"><span>irreflp_irrefl_eq</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.mult_cancel_add_mset|fact"><span class="entity_def" id="Multiset.mult_cancel_add_mset|thm"><span>mult_cancel_add_mset</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_cancel|fact"><span>mult_cancel</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="main"><span>_</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset_add_mset_right|fact"><span>union_mset_add_mset_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.comm_monoid_add_class.add.comm_neutral|fact"><span>add.comm_neutral</span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.multp_cancel_add_mset|fact"><span class="entity_def" id="Multiset.multp_cancel_add_mset|thm"><span>multp_cancel_add_mset</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_cancel_add_mset|fact"><span>mult_cancel_add_mset</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>,</span></span><span>
    </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp_trans|fact"><span>transp_trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflp_irrefl_eq|fact"><span>irreflp_irrefl_eq</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_106182..106187">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mult_cancel_max0|fact"><span class="entity_def" id="Multiset.mult_cancel_max0|thm"><span>mult_cancel_max0</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irrefl|const"><span>irrefl</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>Y</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>Y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?L</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="var"><span>?R</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count_inject|fact"><span>count_inject</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_cancel|fact"><span>mult_cancel</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_106182..106187"><span>assms</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>Y</span></span><span>"</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>Y</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>Y</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.mult_cancel_max|fact"><span class="entity_def" id="Multiset.mult_cancel_max|thm"><span>mult_cancel_max</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_cancel_max0|fact"><span>mult_cancel_max0</span></a><span class="main"><span>[</span></span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.multp_cancel_max|fact"><span class="entity_def" id="Multiset.multp_cancel_max|thm"><span>multp_cancel_max</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_cancel_max|fact"><span>mult_cancel_max</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>,</span></span><span>
    </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp_trans|fact"><span>transp_trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflp_irrefl_eq|fact"><span>irreflp_irrefl_eq</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Partial-order properties</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_106751..106756">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mult1_lessE|fact"><span class="entity_def" id="Multiset.mult1_lessE|thm"><span>mult1_lessE</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.asymp|const"><span>asymp</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M0</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="free"><span>K</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_106751..106756"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M0</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M0</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>M0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
    </span><span class="entity_def" id="offset_106999..107000">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1E|fact"><span>mult1E</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_106999..107000"><span>*</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>a</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.not_member_mset|const"><span>∉#</span></a></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.asymp|const"><span>asymp</span></a><span> </span><span class="free"><span>r</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.asymp.cases|fact"><span>asymp.cases</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="free"><span>thesis</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_106751..106756"><span>that</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.trans_mult|fact"><span class="entity_def" id="Multiset.trans_mult|thm"><span>trans_mult</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_def|fact"><span>mult_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.transp_multp|fact"><span class="entity_def" id="Multiset.transp_multp|thm"><span>transp_multp</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp|const"><span>transp</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp|const"><span>transp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp_trans_eq|fact"><span>transp_trans_eq</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.trans_mult|fact"><span>trans_mult</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="main"><span class="main"><span>{</span></span></span></span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="bound"><span class="bound"><span class="bound"><span>x</span></span></span></span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span> </span><span class="bound"><span class="bound"><span class="bound"><span>y</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span class="main"><span class="main"><span class="main"><span>.</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>r</span></span></span></span><span> </span><span class="bound"><span class="bound"><span class="bound"><span>x</span></span></span></span><span> </span><span class="bound"><span class="bound"><span class="bound"><span>y</span></span></span></span><span class="main"><span class="main"><span class="main"><span>}</span></span></span></span><span>"</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>for</span></span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>r</span></span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp_trans|fact"><span>transp_trans</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.irrefl_mult|fact"><span class="entity_def" id="Multiset.irrefl_mult|thm"><span>irrefl_mult</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irrefl|const"><span>irrefl</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irrefl|const"><span>irrefl</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflI|fact"><span>irreflI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.notI|fact"><span>notI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>M</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>M</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>I</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>J</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>J</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>J</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>k</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>j</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_implies_one_step|fact"><span>mult_implies_one_step</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="free"><span>r</span></span><span>›</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_107742..107743">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_107759..107761">**</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>k</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>j</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_107759..107761"><span>**</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>empty</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_107985..107991">insert</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>F</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irrefl|const"><span>irrefl</span></a><span> </span><span class="free"><span>r</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irrefl_def|fact"><span>irrefl_def</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>rule_format</span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="free"><span>r</span></span><span>›</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transD|fact"><span>transD</span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.equals0D|fact"><span>equals0D</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_107985..107991"><span>insert.IH</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_107985..107991"><span>insert.prems</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insertE|fact"><span>insertE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insertI1|fact"><span>insertI1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insertI2|fact"><span>insertI2</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_107742..107743"><span>*</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.irreflp_multp|fact"><span class="entity_def" id="Multiset.irreflp_multp|thm"><span>irreflp_multp</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.irrefl_mult|fact"><span>irrefl_mult</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>r</span></span><span class="main"><span>,</span></span><span>
    </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp_trans_eq|fact"><span>transp_trans_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflp_irrefl_eq|fact"><span>irreflp_irrefl_eq</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder|class"><span>preorder</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order|class"><span>order</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.less_multiset_def|fact"><span class="entity_def" id="Multiset.ord_multiset_inst.less_multiset|fact"><span class="entity_def" id="Multiset.less_multiset_def|thm"><span class="entity_def" id="Multiset.ord_multiset_inst.less_multiset|thm"><span class="entity_def" id="Multiset.less_multiset_def_raw|axiom"><span class="entity_def" id="Multiset.ord_multiset_inst.less_multiset_def|axiom"><span class="entity_def" id="Multiset.ord_multiset_inst.less_multiset|const"><span class="entity_def" id="offset_108428..108438">definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="class_parameter"><span>less_multiset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.less_eq_multiset_def|fact"><span class="entity_def" id="Multiset.ord_multiset_inst.less_eq_multiset|fact"><span class="entity_def" id="Multiset.less_eq_multiset_def|thm"><span class="entity_def" id="Multiset.ord_multiset_inst.less_eq_multiset|thm"><span class="entity_def" id="Multiset.less_eq_multiset_def_raw|axiom"><span class="entity_def" id="Multiset.ord_multiset_inst.less_eq_multiset_def|axiom"><span class="entity_def" id="Multiset.ord_multiset_inst.less_eq_multiset|const"><span class="entity_def" id="offset_108524..108534">definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="class_parameter"><span>less_eq_multiset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>less_eq_multiset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.arity_order_multiset|fact"><span class="entity_def" id="Multiset.arity_order_multiset|thm"><span>instance</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>intro_classes</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="skolem"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_108524..108534"><span>less_eq_multiset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_108428..108438"><span>less_multiset_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflp_def|fact"><span>irreflp_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.preorder_class.irreflp_less|fact"><span>irreflp_less</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.irreflp_multp|fact"><span>irreflp_multp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transpE|fact"><span>transpE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.preorder_class.transp_less|fact"><span>transp_less</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.transp_multp|fact"><span>transp_multp</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="skolem"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_108524..108534"><span>less_eq_multiset_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>M1</span></span><span> </span><span class="skolem"><span>M2</span></span><span> </span><span class="skolem"><span>M3</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="skolem"><span>M2</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>M2</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="skolem"><span>M3</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>M1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="skolem"><span>M3</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_108524..108534"><span>less_eq_multiset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_108428..108438"><span>less_multiset_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.transp_multp|fact"><span>transp_multp</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.preorder_class.transp_less|fact"><span>transp_less</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transpD|fact"><span>transpD</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>N</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_108524..108534"><span>less_eq_multiset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_108428..108438"><span>less_multiset_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.transp_multp|fact"><span>transp_multp</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.preorder_class.transp_less|fact"><span>transp_less</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transpD|fact"><span>transpD</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.irreflp_multp|fact"><span>irreflp_multp</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.preorder_class.transp_less|fact"><span>transp_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.preorder_class.irreflp_less|fact"><span>irreflp_less</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflp_def|fact"><span>irreflp_def</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>rule_format</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_le_irrefl|fact"><span class="entity_def" id="Multiset.mset_le_irrefl|thm"><span>mset_le_irrefl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.elim|attribute"><span class="operator"><span>elim</span></span></a><span class="main"><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder|class"><span>preorder</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.wfP_less_multiset|fact"><span class="entity_def" id="Multiset.wfP_less_multiset|thm"><span>wfP_less_multiset</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_109575..109583">wfP_less</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wfP|const"><span>wfP</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder|class"><span>preorder</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wfP|const"><span>wfP</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wfP_multp|fact"><span>wfP_multp</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_109575..109583"><span>wfP_less</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.less_multiset_def|fact"><span>less_multiset_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wfPUNIVI|fact"><span>wfPUNIVI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wfP_induct|fact"><span>wfP_induct</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Quasi-executable version of the multiset extension</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>
  </span><span>Predicate variants of </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>mult›</span></span></span><span> and the reflexive closure of </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>mult›</span></span></span><span>, which are
</span><span>  executable whenever the given predicate </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>P›</span></span></span><span> is. Together with the standard
</span><span>  code equations for </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>(∩#›</span></span></span><span>) and </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>(-›</span></span></span><span>) this should yield quadratic
</span><span>  (with respect to calls to </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>P›</span></span></span><span>) implementations of </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>multp_code›</span></span></span><span> and </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>multeqp_code›</span></span></span><span>.</span><span>
</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.multp_code_def|fact"><span class="entity_def" id="Multiset.multp_code_def|thm"><span class="entity_def" id="Multiset.multp_code_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.multp_code|const"><span>multp_code</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>multp_code</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>Z</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>;</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>Z</span></span><span> </span><span class="keyword1"><span>in</span></span><span>
    </span><span class="bound"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>Y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>Z</span></span><span> </span><span class="keyword1"><span>in</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>Y</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.multeqp_code_def|fact"><span class="entity_def" id="Multiset.multeqp_code_def|thm"><span class="entity_def" id="Multiset.multeqp_code_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.multeqp_code|const"><span>multeqp_code</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>multeqp_code</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>Z</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>;</span></span><span> </span><span class="bound"><span>X</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>Z</span></span><span class="main"><span>;</span></span><span> </span><span class="bound"><span>Y</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>Z</span></span><span> </span><span class="keyword1"><span>in</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>y</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>Y</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∃</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>∈</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>X</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_110574..110579">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multp_code_iff_mult|fact"><span class="entity_def" id="Multiset.multp_code_iff_mult|thm"><span>multp_code_iff_mult</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irrefl|const"><span>irrefl</span></a><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_code|const"><span>multp_code</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?L</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="var"><span>?R</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_110750..110751">*</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count_inject|fact"><span>count_inject</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?L</span></span></span></span><span> </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?R</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.one_step_implies_mult|fact"><span>one_step_implies_mult</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>R</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_110750..110751"><span>*</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_code_def|fact"><span>multp_code_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>I</span></span><span> </span><span class="skolem"><span>J</span></span><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>J</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>I</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_union_distrib_right|fact"><span>inter_union_distrib_right</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_eq_empty|fact"><span>union_eq_empty</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_111207..111208">}</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.dest|attribute"><span class="operator"><span>dest</span></span></a><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_111207..111208"><span>this</span></a><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?R</span></span></span></span><span> </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?L</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_implies_one_step|fact"><span>mult_implies_one_step</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_110574..110579"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
        </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_cancel_max|fact"><span>mult_cancel_max</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_110574..110579"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>,</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_110750..110751"><span>*</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_code_def|fact"><span>multp_code_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multp_code_eq_multp|fact"><span class="entity_def" id="Multiset.multp_code_eq_multp|thm"><span>multp_code_eq_multp</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflp|const"><span>irreflp</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp|const"><span>transp</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_code|const"><span>multp_code</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_code_iff_mult|fact"><span>multp_code_iff_mult</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>r</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>,</span></span><span>
    </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflp_irrefl_eq|fact"><span>irreflp_irrefl_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp_trans|fact"><span>transp_trans</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_111633..111638">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multeqp_code_iff_reflcl_mult|fact"><span class="entity_def" id="Multiset.multeqp_code_iff_reflcl_mult|thm"><span>multeqp_code_iff_reflcl_mult</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irrefl|const"><span>irrefl</span></a><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.trans|const"><span>trans</span></a><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multeqp_code|const"><span>multeqp_code</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.reflcl|const"><span><span class="hidden">⇧</span><sup>=</sup></span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span> </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count_inject|fact"><span>count_inject</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>y</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="bound"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count_inject|fact"><span>count_inject</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_neq_implies_less|fact"><span>le_neq_implies_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_cong|fact"><span>fun_cong</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>y</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multeqp_code|const"><span>multeqp_code</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_code|const"><span>multp_code</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multeqp_code_def|fact"><span>multeqp_code_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_code_def|fact"><span>multp_code_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_diff_count|fact"><span>in_diff_count</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_code_iff_mult|fact"><span>multp_code_iff_mult</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_111633..111638"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multeqp_code_eq_reflclp_multp|fact"><span class="entity_def" id="Multiset.multeqp_code_eq_reflclp_multp|thm"><span>multeqp_code_eq_reflclp_multp</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflp|const"><span>irreflp</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp|const"><span>transp</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multeqp_code|const"><span>multeqp_code</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp|const"><span>multp</span></a><span> </span><span class="free"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.reflclp|const"><span><span class="hidden">⇧</span><sup>=</sup><span class="hidden">⇧</span><sup>=</sup></span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multeqp_code_iff_reflcl_mult|fact"><span>multeqp_code_iff_reflcl_mult</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>r</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>,</span></span><span>
    </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflp_irrefl_eq|fact"><span>irreflp_irrefl_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp_trans|fact"><span>transp_trans</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Monotonicity of multiset union</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mult1_union|fact"><span class="entity_def" id="Multiset.mult1_union|thm"><span>mult1_union</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span>r</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>D</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1|const"><span>mult1</span></a><span> </span><span class="free"><span>r</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1_def|fact"><span>mult1_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_le_mono2|fact"><span class="entity_def" id="Multiset.union_le_mono2|thm"><span>union_le_mono2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>D</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder|class"><span>preorder</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.less_multiset_def|fact"><span>less_multiset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multp_def|fact"><span>multp_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_def|fact"><span>mult_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl_induct|fact"><span>trancl_induct</span></a><span class="main"><span>)</span></span><span>
 </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1_union|fact"><span>mult1_union</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult1_union|fact"><span>mult1_union</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.trancl_trans|fact"><span>trancl_trans</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_le_mono1|fact"><span class="entity_def" id="Multiset.union_le_mono1|thm"><span>union_le_mono1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>C</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder|class"><span>preorder</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>B</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>C</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>D</span></span></span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>C</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_le_mono2|fact"><span>union_le_mono2</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_less_mono|fact"><span class="entity_def" id="Multiset.union_less_mono|thm"><span>union_less_mono</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder|class"><span>preorder</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>D</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>D</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_le_mono1|fact"><span>union_le_mono1</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_le_mono2|fact"><span>union_le_mono2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_trans|fact"><span>less_trans</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder|class"><span>preorder</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_semigroup_add|class"><span>ordered_ab_semigroup_add</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.arity_ordered_ab_semigroup_add_multiset|fact"><span class="entity_def" id="Multiset.arity_ordered_ab_semigroup_add_multiset|thm"><span>instance</span></span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.less_eq_multiset_def|fact"><span>less_eq_multiset_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_le_mono2|fact"><span>union_le_mono2</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Termination proofs with multiset orders</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multi_member_skip|fact"><span class="entity_def" id="Multiset.multi_member_skip|thm"><span>multi_member_skip</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>XS</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>XS</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Multiset.multi_member_this|fact"><span class="entity_def" id="Multiset.multi_member_this|thm"><span>multi_member_this</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>XS</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Multiset.multi_member_last|fact"><span class="entity_def" id="Multiset.multi_member_last|thm"><span>multi_member_last</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="main"><span>{#</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.ms_strict_def|fact"><span class="entity_def" id="Multiset.ms_strict_def|thm"><span class="entity_def" id="Multiset.ms_strict_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Multiset.ms_strict|const"><span>ms_strict</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult|const"><span>mult</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.pair_less|const"><span>pair_less</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.ms_weak_def|fact"><span class="entity_def" id="Multiset.ms_weak_def|thm"><span class="entity_def" id="Multiset.ms_weak_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Multiset.ms_weak|const"><span>ms_weak</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_strict|const"><span>ms_strict</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.ms_reduction_pair|fact"><span class="entity_def" id="Multiset.ms_reduction_pair|thm"><span>ms_reduction_pair</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.reduction_pair|const"><span>reduction_pair</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_strict|const"><span>ms_strict</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_weak|const"><span>ms_weak</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.reduction_pair_def|fact"><span>reduction_pair_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_strict_def|fact"><span>ms_strict_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_weak_def|fact"><span>ms_weak_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.pair_less_def|fact"><span>pair_less_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wf_mult1|fact"><span>wf_mult1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf_trancl|fact"><span>wf_trancl</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mult_def|fact"><span>mult_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.smsI|fact"><span class="entity_def" id="Multiset.smsI|thm"><span>smsI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict|const"><span>max_strict</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_strict|const"><span>ms_strict</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_strict_def|fact"><span>ms_strict_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.one_step_implies_mult|fact"><span>one_step_implies_mult</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict_def|fact"><span>max_strict_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.pair_less_def|fact"><span>pair_less_def</span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.max_ext.cases|fact"><span>max_ext.cases</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.wmsI|fact"><span class="entity_def" id="Multiset.wmsI|thm"><span>wmsI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict|const"><span>max_strict</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>
  </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_weak|const"><span>ms_weak</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_weak_def|fact"><span>ms_weak_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_strict_def|fact"><span>ms_strict_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.pair_less_def|fact"><span>pair_less_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict_def|fact"><span>max_strict_def</span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.max_ext.cases|fact"><span>max_ext.cases</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.one_step_implies_mult|fact"><span>one_step_implies_mult</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.pw_leq.inducts|fact"><span class="entity_def" id="Multiset.pw_leq.simps|fact"><span class="entity_def" id="Multiset.pw_leq.induct|fact"><span class="entity_def" id="Multiset.pw_leq.cases|fact"><span class="entity_def" id="Multiset.pw_leq.intros|fact"><span class="entity_def" id="Multiset.pw_leq.inducts|thm"><span class="entity_def" id="Multiset.pw_leq.simps|thm"><span class="entity_def" id="Multiset.pw_leq.induct|thm"><span class="entity_def" id="Multiset.pw_leq.cases|thm"><span class="entity_def" id="Multiset.pw_leq.intros(2)|thm"><span class="entity_def" id="Multiset.pw_leq.intros(1)|thm"><span class="entity_def" id="Multiset.pw_leq_def|axiom"><span>inductive</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.pw_leq|const"><span>pw_leq</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="entity_def" id="Multiset.pw_leq.pw_leq_empty|fact"><span class="entity_def" id="Multiset.pw_leq.pw_leq_empty|thm"><span>pw_leq_empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pw_leq</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="entity_def" id="Multiset.pw_leq.pw_leq_step|fact"><span class="entity_def" id="Multiset.pw_leq.pw_leq_step|thm"><span>pw_leq_step</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.pair_leq|const"><span>pair_leq</span></a><span class="main"><span>;</span></span><span> </span><span class="free"><span>pw_leq</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Y</span></span></span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>pw_leq</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{#</span></span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{#</span></span><span class="free"><span class="bound"><span class="entity"><span>y</span></span></span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Y</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.pw_leq_lstep|fact"><span class="entity_def" id="Multiset.pw_leq_lstep|thm"><span>pw_leq_lstep</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.pair_leq|const"><span>pair_leq</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pw_leq|const"><span>pw_leq</span></a><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>y</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>drule</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pw_leq.pw_leq_step|fact"><span>pw_leq_step</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pw_leq.pw_leq_empty|fact"><span>pw_leq_empty</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_114567..114572">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.pw_leq_split|fact"><span class="entity_def" id="Multiset.pw_leq_split|thm"><span>pw_leq_split</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pw_leq|const"><span>pw_leq</span></a><span> </span><span class="free"><span>X</span></span><span> </span><span class="free"><span>Y</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>A</span></span><span> </span><span class="bound"><span>B</span></span><span> </span><span class="bound"><span>Z</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict|const"><span>max_strict</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_114567..114572"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>pw_leq_empty</span><span> </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_114793..114804">pw_leq_step</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="skolem"><span>Y</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>A</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>B</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Z</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>Z</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>Z</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_114886..114887">1</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict|const"><span>max_strict</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_114793..114804"><span>pw_leq_step</span></a><span> </span><span class="keyword1"><span class="command"><span>consider</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>y</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.pair_less|const"><span>pair_less</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.pair_leq_def|fact"><span>pair_leq_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span>1</span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{#</span></span><span class="skolem"><span>y</span></span><span class="main"><span>#}</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>Z</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>y</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>{#</span></span><span class="skolem"><span>y</span></span><span class="main"><span>#}</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>Z</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span>
      </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>A</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict|const"><span>max_strict</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_115300..115301">2</span><span>
    </span><span class="keyword1"><span class="command"><span>let</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?A'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?B'</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="skolem"><span>y</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>B</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>Z</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span class="skolem"><span>y</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?B'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>Z</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="var"><span>?A'</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="var"><span>?B'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict|const"><span>max_strict</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_114886..114887"><span>1</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_115300..115301"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict_def|fact"><span>max_strict_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.max_ext.cases|fact"><span>max_ext.cases</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_115633..115638">pwleq</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pw_leq|const"><span>pw_leq</span></a><span> </span><span class="free"><span>Z</span></span><span> </span><span class="free"><span>Z'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="entity_def" id="Multiset.ms_strictI|fact"><span class="entity_def" id="Multiset.ms_strictI|thm"><span>ms_strictI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict|const"><span>max_strict</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Z'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_strict|const"><span>ms_strict</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Multiset.ms_weakI1|fact"><span class="entity_def" id="Multiset.ms_weakI1|thm"><span>ms_weakI1</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict|const"><span>max_strict</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Z'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_weak|const"><span>ms_weak</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Multiset.ms_weakI2|fact"><span class="entity_def" id="Multiset.ms_weakI2|thm"><span>ms_weakI2</span></span></span><span class="main"><span>:</span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Z'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_weak|const"><span>ms_weak</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pw_leq_split|fact"><span>pw_leq_split</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_115633..115638"><span>pwleq</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>A'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>B'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>Z''</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>Z''</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Z'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>B'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>Z''</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_115998..116009">mx_or_empty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>B'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict|const"><span>max_strict</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>B'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_116105..116108">max</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict|const"><span>max_strict</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_115998..116009"><span>mx_or_empty</span></a><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>Z''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>Z''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>B'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_strict|const"><span>ms_strict</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span>max'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>B'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict|const"><span>max_strict</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_116105..116108"><span>max</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>B'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict|const"><span>max_strict</span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.max_strict_def|fact"><span>max_strict_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.max_ext_additive|fact"><span>max_ext_additive</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.smsI|fact"><span>smsI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="skolem"><span>B'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.smsI|fact"><span>smsI</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_116105..116108"><span>max</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Z'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_strict|const"><span>ms_strict</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Z'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_weak|const"><span>ms_weak</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_weak_def|fact"><span>ms_weak_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_115998..116009"><span>mx_or_empty</span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>Z''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>A'</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>Z''</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>B'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_weak|const"><span>ms_weak</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wmsI|fact"><span>wmsI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>Z'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_weak|const"><span>ms_weak</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.empty_neutral|fact"><span class="entity_def" id="Multiset.empty_neutral(2)|thm"><span class="entity_def" id="Multiset.empty_neutral(1)|thm"><span>empty_neutral</span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Multiset.nonempty_plus|fact"><span class="entity_def" id="Multiset.nonempty_plus|thm"><span>nonempty_plus</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>rs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Multiset.nonempty_single|fact"><span class="entity_def" id="Multiset.nonempty_single|thm"><span>nonempty_single</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>{#</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>setup</span></span></span><span> </span><span class="quoted"><span>‹</span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>msetT</span></span><span> </span><span class="entity"><span>T</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">Type</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="entity"><span>T</span></span><span>›</span></span><span class="main"><span>;</span></span><span>

    </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>mk_mset</span></span><span> </span><span class="entity"><span>T</span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">instantiate</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>T</span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="keyword1"><span class="command"><span>term</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>›</span></span></span><span>›</span></span></span><span>
      </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>mk_mset</span></span><span> </span><span class="entity"><span>T</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>x</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">instantiate</span><span class="hidden">&gt;</span></span></span><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>T</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span class="entity"><span>x</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="keyword1"><span class="command"><span>term</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span>›</span></span></span><span>›</span></span></span><span>
      </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>mk_mset</span></span><span> </span><span class="entity"><span>T</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>x</span></span><span> </span><span>::</span><span> </span><span class="entity"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">Const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>plus</span></a><span> </span><span class="quoted"><span>‹</span><span class="entity"><span class="entity"><span class="entity"><span>msetT</span></span></span></span><span> </span><span class="entity"><span class="entity"><span class="entity"><span>T</span></span></span></span><span>›</span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="entity"><span>mk_mset</span></span><span> </span><span class="entity"><span>T</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>x</span></span><span class="main"><span>]</span></span><span>›</span></span><span> </span><span class="quoted"><span>‹</span><span class="entity"><span>mk_mset</span></span><span> </span><span class="entity"><span>T</span></span><span> </span><span class="entity"><span>xs</span></span><span>›</span></span><span>›</span></span><span>

    </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>mset_member_tac</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>m</span></span><span> </span><span class="entity"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>m</span></span><span> </span><span>&lt;=</span><span> </span><span class="inner_numeral"><span>0</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span>
        </span><span>resolve_tac</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multi_member_this|fact"><span>multi_member_this</span></a><span class="antiquote"><span>}</span></span></span></span><span> </span><span class="entity"><span>i</span></span><span> </span><span>ORELSE</span><span>
        </span><span>resolve_tac</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multi_member_last|fact"><span>multi_member_last</span></a><span class="antiquote"><span>}</span></span></span></span><span> </span><span class="entity"><span>i</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span>
        </span><span>resolve_tac</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multi_member_skip|fact"><span>multi_member_skip</span></a><span class="antiquote"><span>}</span></span></span></span><span> </span><span class="entity"><span>i</span></span><span> </span><span>THEN</span><span> </span><span class="entity"><span>mset_member_tac</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>m</span></span><span> </span><span>-</span><span> </span><span class="inner_numeral"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>i</span></span><span>

    </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>mset_nonempty_tac</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=</span></span><span>
      </span><span>resolve_tac</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.nonempty_plus|fact"><span>nonempty_plus</span></a><span class="antiquote"><span>}</span></span></span></span><span> </span><span>ORELSE'</span><span>
      </span><span>resolve_tac</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.nonempty_single|fact"><span>nonempty_single</span></a><span class="antiquote"><span>}</span></span></span></span><span>

    </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>regroup_munion_conv</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=</span></span><span>
      </span><span class="entity"><span>Function_Lib.regroup_conv</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_abbrev</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>empty_mset</span></a><span>›</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>plus</span></a><span>›</span></span><span>
        </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>t</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>t</span></span><span> </span><span>RS</span><span> </span><span class="entity"><span>eq_reflection</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="antiquote"><span>}</span></span></span></span><span> </span><span>@</span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_neutral|fact"><span>empty_neutral</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>unfold_pwleq_tac</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="entity"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span>
      </span><span class="main"><span>(</span></span><span>resolve_tac</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pw_leq.pw_leq_step|fact"><span>pw_leq_step</span></a><span class="antiquote"><span>}</span></span></span></span><span> </span><span class="entity"><span>i</span></span><span> </span><span>THEN</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>st</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="entity"><span>unfold_pwleq_tac</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>i</span></span><span> </span><span>+</span><span> </span><span class="inner_numeral"><span>1</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>st</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
        </span><span>ORELSE</span><span> </span><span class="main"><span>(</span></span><span>resolve_tac</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pw_leq_lstep|fact"><span>pw_leq_lstep</span></a><span class="antiquote"><span>}</span></span></span></span><span> </span><span class="entity"><span>i</span></span><span class="main"><span>)</span></span><span>
        </span><span>ORELSE</span><span> </span><span class="main"><span>(</span></span><span>resolve_tac</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pw_leq.pw_leq_empty|fact"><span>pw_leq_empty</span></a><span class="antiquote"><span>}</span></span></span></span><span> </span><span class="entity"><span>i</span></span><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>set_mset_simps</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="main"><span>[</span></span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_empty|fact"><span>set_mset_empty</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_single|fact"><span>set_mset_single</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_union|fact"><span>set_mset_union</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
                        </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_insert_left|fact"><span>Un_insert_left</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_empty_left|fact"><span>Un_empty_left</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
    </span><span class="entity"><span>ScnpReconstruct.multiset_setup</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>ScnpReconstruct.Multiset</span></span><span>
    </span><span class="main"><span>{</span></span><span>
      </span><span>msetT</span><span class="main"><span>=</span></span><span class="entity"><span>msetT</span></span><span class="main"><span>,</span></span><span> </span><span>mk_mset</span><span class="main"><span>=</span></span><span class="entity"><span>mk_mset</span></span><span class="main"><span>,</span></span><span> </span><span>mset_regroup_conv</span><span class="main"><span>=</span></span><span class="entity"><span>regroup_munion_conv</span></span><span class="main"><span>,</span></span><span>
      </span><span>mset_member_tac</span><span class="main"><span>=</span></span><span class="entity"><span>mset_member_tac</span></span><span class="main"><span>,</span></span><span> </span><span>mset_nonempty_tac</span><span class="main"><span>=</span></span><span class="entity"><span>mset_nonempty_tac</span></span><span class="main"><span>,</span></span><span>
      </span><span>mset_pwleq_tac</span><span class="main"><span>=</span></span><span class="entity"><span>unfold_pwleq_tac</span></span><span class="main"><span>,</span></span><span> </span><span>set_of_simps</span><span class="main"><span>=</span></span><span class="entity"><span>set_mset_simps</span></span><span class="main"><span>,</span></span><span>
      </span><span>smsI'</span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_strictI|fact"><span>ms_strictI</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span>wmsI2''</span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_weakI2|fact"><span>ms_weakI2</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span> </span><span>wmsI1</span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_weakI1|fact"><span>ms_weakI1</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
      </span><span>reduction_pair</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ms_reduction_pair|fact"><span>ms_reduction_pair</span></a><span class="antiquote"><span>}</span></span></span></span><span>
    </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span>›</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Legacy theorem bindings</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.multi_count_eq|fact"><span class="entity_def" id="Multiset.multi_count_eq|thm"><span>multi_count_eq</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_commute|fact"><span class="entity_def" id="Multiset.union_commute|thm"><span>union_commute</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.commute|fact"><span>add.commute</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_assoc|fact"><span class="entity_def" id="Multiset.union_assoc|thm"><span>union_assoc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.semigroup_add_class.add.assoc|fact"><span>add.assoc</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_lcomm|fact"><span class="entity_def" id="Multiset.union_lcomm|thm"><span>union_lcomm</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>K</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>K</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_add_class.add.left_commute|fact"><span>add.left_commute</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.union_ac|fact"><span class="entity_def" id="Multiset.union_ac(4)|thm"><span class="entity_def" id="Multiset.union_ac(3)|thm"><span class="entity_def" id="Multiset.union_ac(2)|thm"><span class="entity_def" id="Multiset.union_ac(1)|thm"><span>union_ac</span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_assoc|fact"><span>union_assoc</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_commute|fact"><span>union_commute</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_lcomm|fact"><span>union_lcomm</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_commute|fact"><span>add_mset_commute</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_right_cancel|fact"><span class="entity_def" id="Multiset.union_right_cancel|thm"><span>union_right_cancel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_semigroup_add_class.add_right_cancel|fact"><span>add_right_cancel</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_left_cancel|fact"><span class="entity_def" id="Multiset.union_left_cancel|thm"><span>union_left_cancel</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_semigroup_add_class.add_left_cancel|fact"><span>add_left_cancel</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multi_union_self_other_eq|fact"><span class="entity_def" id="Multiset.multi_union_self_other_eq|thm"><span>multi_union_self_other_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>Y</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_semigroup_add_class.add_left_imp_eq|fact"><span>add_left_imp_eq</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_subset_trans|fact"><span class="entity_def" id="Multiset.mset_subset_trans|thm"><span>mset_subset_trans</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.less_trans|fact"><span>subset_mset.less_trans</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_inter_commute|fact"><span class="entity_def" id="Multiset.multiset_inter_commute|thm"><span>multiset_inter_commute</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.inf.commute|fact"><span>subset_mset.inf.commute</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_inter_assoc|fact"><span class="entity_def" id="Multiset.multiset_inter_assoc|thm"><span>multiset_inter_assoc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.inf.assoc|fact"><span>subset_mset.inf.assoc</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_inter_left_commute|fact"><span class="entity_def" id="Multiset.multiset_inter_left_commute|thm"><span>multiset_inter_left_commute</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.inf.left_commute|fact"><span>subset_mset.inf.left_commute</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_inter_ac|fact"><span class="entity_def" id="Multiset.multiset_inter_ac(3)|thm"><span class="entity_def" id="Multiset.multiset_inter_ac(2)|thm"><span class="entity_def" id="Multiset.multiset_inter_ac(1)|thm"><span>multiset_inter_ac</span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_inter_commute|fact"><span>multiset_inter_commute</span></a><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_inter_assoc|fact"><span>multiset_inter_assoc</span></a><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_inter_left_commute|fact"><span>multiset_inter_left_commute</span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_le_not_refl|fact"><span class="entity_def" id="Multiset.mset_le_not_refl|thm"><span>mset_le_not_refl</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder|class"><span>preorder</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_irrefl|fact"><span>less_irrefl</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_le_trans|fact"><span class="entity_def" id="Multiset.mset_le_trans|thm"><span>mset_le_trans</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>N</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder|class"><span>preorder</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_trans|fact"><span>less_trans</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_le_not_sym|fact"><span class="entity_def" id="Multiset.mset_le_not_sym|thm"><span>mset_le_not_sym</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder|class"><span>preorder</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_not_sym|fact"><span>less_not_sym</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_le_asym|fact"><span class="entity_def" id="Multiset.mset_le_asym|thm"><span>mset_le_asym</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder|class"><span>preorder</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fact</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_asym|fact"><span>less_asym</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>declaration</span></span></span><span> </span><span class="quoted"><span>‹</span><span>
  </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>multiset_postproc</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="entity"><span>maybe_name</span></span><span> </span><span class="entity"><span>all_values</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>T</span></span><span> </span><span class="keyword1"><span class="keyword"><span>as</span></span></span><span> </span><span>Type</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>_</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><span>[</span></span><span class="entity"><span>elem_T</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span>Const</span><span> </span><span class="main"><span>_</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>t'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
          </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
            </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>maybe_opt</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>ps</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span>
              </span><span class="entity"><span>Nitpick_Model.dest_plain_fun</span></span><span> </span><span class="entity"><span>t'</span></span><span>
              </span><span>||&gt;</span><span> </span><span class="main"><span>(</span></span><span>~~</span><span class="main"><span>)</span></span><span>
              </span><span>||&gt;</span><span> </span><span>map</span><span> </span><span class="main"><span>(</span></span><span>apsnd</span><span> </span><span class="main"><span>(</span></span><span>snd</span><span> </span><span>o</span><span> </span><span class="entity"><span>HOLogic.dest_number</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
            </span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>elems_for</span></span><span> </span><span class="entity"><span>t</span></span><span> </span><span class="main"><span>=</span></span><span>
              </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>case</span></span></span><span> </span><span>AList.lookup</span><span> </span><span class="main"><span>(</span></span><span class="main"><span>=</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>ps</span></span><span> </span><span class="entity"><span>t</span></span><span> </span><span class="keyword2"><span class="keyword"><span>of</span></span></span><span>
                </span><span>SOME</span><span> </span><span class="entity"><span>n</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>replicate</span><span> </span><span class="entity"><span>n</span></span><span> </span><span class="entity"><span>t</span></span><span>
              </span><span class="main"><span>|</span></span><span> </span><span>NONE</span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>[</span></span><span>Const</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>maybe_name</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>elem_T</span></span><span> </span><span>--&gt;</span><span> </span><span class="entity"><span>elem_T</span></span><span class="main"><span>)</span></span><span> </span><span>$</span><span> </span><span class="entity"><span>t</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
            </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>case</span></span></span><span> </span><span>maps</span><span> </span><span class="entity"><span>elems_for</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>all_values</span></span><span> </span><span class="entity"><span>elem_T</span></span><span class="main"><span>)</span></span><span> </span><span>@</span><span>
                 </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="entity"><span>maybe_opt</span></span><span> </span><span class="keyword2"><span class="keyword"><span>then</span></span></span><span> </span><span class="main"><span>[</span></span><span>Const</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Nitpick_Model.unrep_mixfix</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>elem_T</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>else</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>of</span></span></span><span>
              </span><span class="main"><span>[</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">Const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>Groups.zero</span></a><span> </span><span class="entity"><span>T</span></span><span>›</span></span><span>
            </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>ts</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>foldl1</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>s</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>t</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">Const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="entity"><span class="entity"><span class="entity"><span>elem_T</span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="entity"><span>s</span></span><span> </span><span class="entity"><span>t</span></span><span>›</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>ts</span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
      </span><span class="main"><span>|</span></span><span> </span><span class="entity"><span>multiset_postproc</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="entity"><span>t</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>t</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="entity"><span>Nitpick_Model.register_term_postprocessor</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>›</span></span></span><span> </span><span class="entity"><span>multiset_postproc</span></span><span> </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span><span>›</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Naive implementation using lists</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.arity_partial_term_of_multiset|fact"><span class="entity_def" id="Multiset.partial_term_of_multiset_triv|fact"><span class="entity_def" id="Multiset.partial_term_of_multiset_inst.partial_term_of_multiset|fact"><span class="entity_def" id="Multiset.arity_partial_term_of_multiset|thm"><span class="entity_def" id="Multiset.partial_term_of_multiset_triv|thm"><span class="entity_def" id="Multiset.partial_term_of_multiset_inst.partial_term_of_multiset|thm"><span class="entity_def" id="Multiset.partial_term_of_multiset_triv_raw|axiom"><span class="entity_def" id="Multiset.partial_term_of_multiset_inst.partial_term_of_multiset_def|axiom"><span class="entity_def" id="Multiset.partial_term_of_multiset_inst.partial_term_of_multiset|const"><span>code_datatype</span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.is_empty|const"><span>Multiset.is_empty</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.null|const"><span>List.null</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.is_empty_def|fact"><span>Multiset.is_empty_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.null_def|fact"><span>List.null_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.union_code|fact"><span class="entity_def" id="Multiset.union_code|thm"><span>union_code</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.filter_mset|const"><span>filter_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.filter|const"><span>filter</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remove1|const"><span>remove1</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.sym|fact"><span>sym</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_add|fact"><span>diff_add</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_right_commute|fact"><span>diff_right_commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.diff_diff_add|fact"><span>diff_diff_add</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>zs</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>ys</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remove1|const"><span>remove1</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="bound"><span>zs</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>zs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>zs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>zs</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>ys</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remove1|const"><span>remove1</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="bound"><span>zs</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>zs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>zs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="bound"><span>zs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_add_right1|fact"><span>inter_add_right1</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_add_right2|fact"><span>inter_add_right2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>append</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>zs</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remove1|const"><span>remove1</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="bound"><span>zs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>zs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_prod|const"><span>case_prod</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>append</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>zs</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.remove1|const"><span>remove1</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="bound"><span>zs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>ys</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>zs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="bound"><span>zs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_eq_iff|fact"><span>multiset_eq_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.in_multiset_in_set|fact"><span>in_multiset_in_set</span></a><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/Code/code_preproc.ML.html#Code_Generator.code_unfold|attribute"><span class="operator"><span>code_unfold</span></span></a><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>n</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>y</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="bound"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>n</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_mset|fact"><span>set_mset_mset</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.sorted_list_of_multiset_mset|fact"><span>sorted_list_of_multiset_mset</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="comment1"><span>― ‹</span><span>not very efficient, but representation-ignorant!</span><span>›</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_set|const"><span>mset_set</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted_list_of_set|const"><span>sorted_list_of_set</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite_induct|fact"><span>finite_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_mset|fact"><span>size_mset</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.subset_eq_mset_impl.elims|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl.induct|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl.simps|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl.pelims|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl.cases|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl.termination|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl.pinduct|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl.psimps|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl_rel.inducts|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl_rel.simps|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl_rel.induct|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl_rel.cases|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl_rel.intros|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph.inducts|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph.simps|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph.induct|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph.cases|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph.intros|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl.elims|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl.induct|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl.simps(2)|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl.simps(1)|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl.pelims|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl.cases|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl.termination|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl.pinduct|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl.psimps(2)|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl.psimps(1)|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl_rel.inducts|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl_rel.simps|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl_rel.induct|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl_rel.cases|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl_rel.intros|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph.inducts|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph.simps|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph.induct|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph.cases|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph.intros(2)|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph.intros(1)|thm"><span class="entity_def" id="Multiset.subset_eq_mset_impl_def|axiom"><span class="entity_def" id="Multiset.subset_eq_mset_impl_rel_def|axiom"><span class="entity_def" id="Multiset.subset_eq_mset_impl_sumC_def|axiom"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph_def|axiom"><span class="entity_def" id="Multiset.subset_eq_mset_impl_dom|const"><span class="entity_def" id="Multiset.subset_eq_mset_impl_rel|const"><span class="entity_def" id="Multiset.subset_eq_mset_impl_sumC|const"><span class="entity_def" id="Multiset.subset_eq_mset_impl_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.subset_eq_mset_impl|const"><span>subset_eq_mset_impl</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>subset_eq_mset_impl</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ys</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>ys</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>subset_eq_mset_impl</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>Cons</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ys</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.extract|const"><span>List.extract</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>(=)</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ys</span></span></span></span><span> </span><span class="keyword1"><span>of</span></span><span>
     None </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span>
   </span><span class="main"><span>|</span></span><span> Some </span><span class="main"><span>(</span></span><span class="bound"><span>ys1</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="bound"><span>ys2</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span>subset_eq_mset_impl</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ys1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="bound"><span>ys2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.subset_eq_mset_impl|fact"><span class="entity_def" id="Multiset.subset_eq_mset_impl|thm"><span>subset_eq_mset_impl</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl|const"><span>subset_eq_mset_impl</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span>
  </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl|const"><span>subset_eq_mset_impl</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span>
  </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl|const"><span>subset_eq_mset_impl</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span>Nil</span><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.zero_less_iff_neq_zero|fact"><span>subset_mset.zero_less_iff_neq_zero</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_123798..123802">Cons</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.extract|const"><span>List.extract</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>(=)</span></a></span><span> </span><span class="skolem"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>ys</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_123876..123880">None</span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_123891..123892">x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>ys</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.extract_None_iff|fact"><span>extract_None_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_123951..123957">assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="skolem"><span>ys</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset_mono|fact"><span>set_mset_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_123951..123957"><span>this</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_123891..123892"><span>x</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_124044..124045">}</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_124051..124054">nle</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_124044..124045"><span>this</span></a><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="skolem"><span>ys</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_124127..124132">hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="skolem"><span>ys</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_124051..124054"><span>nle</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_124127..124132"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_123876..123880"><span>None</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_124275..124279">Some</span><span> </span><span class="skolem"><span>res</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ys1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>y</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ys2</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_124312..124315">res</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>res</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>ys1</span></span><span class="main"><span>,</span></span><span class="skolem"><span>y</span></span><span class="main"><span>,</span></span><span class="skolem"><span>ys2</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>res</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_124367..124371">Some</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_124275..124279"><span>Some</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_124312..124315"><span>res</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.extract_SomeE|fact"><span>extract_SomeE</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_124367..124371"><span>Some</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>ys1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>ys2</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_124469..124471">id</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>ys1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>ys2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl.simps|fact"><span>subset_eq_mset_impl.simps</span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_124367..124371"><span>Some</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.simps|fact"><span>option.simps</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.split|fact"><span>split</span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_124469..124471"><span>id</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_123798..123802"><span>Cons</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ys1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>ys2</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset_def|fact"><span>subseteq_mset_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl|const"><span>subset_eq_mset_impl</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl|fact"><span>subset_eq_mset_impl</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl|const"><span>subset_eq_mset_impl</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl|const"><span>subset_eq_mset_impl</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl|fact"><span>subset_eq_mset_impl</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl|const"><span>subset_eq_mset_impl</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.equal|class"><span>equal</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.equal|class"><span>equal</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.equal_multiset_def|fact"><span class="entity_def" id="Multiset.equal_multiset_inst.equal_multiset|fact"><span class="entity_def" id="Multiset.equal_multiset_def|thm"><span class="entity_def" id="Multiset.equal_multiset_inst.equal_multiset|thm"><span class="entity_def" id="Multiset.equal_multiset_def_raw|axiom"><span class="entity_def" id="Multiset.equal_multiset_inst.equal_multiset_def|axiom"><span class="entity_def" id="Multiset.equal_multiset_inst.equal_multiset|const"><span class="entity_def" id="offset_125103..125113">definition</span></span></span></span></span></span></span></span></span></span><span>
  </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span> </span><span class="quasi_keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>del</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.equal_class.equal|const"><span>HOL.equal</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>B</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.equal_class.equal|const"><span>HOL.equal</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl|const"><span>subset_eq_mset_impl</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_125103..125113"><span>equal_multiset_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl|fact"><span>subset_eq_mset_impl</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_eq_mset_impl|const"><span>subset_eq_mset_impl</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.arity_equal_multiset|fact"><span class="entity_def" id="Multiset.arity_equal_multiset|thm"><span>instance</span></span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_125103..125113"><span>equal_multiset_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_add_class.sum_mset_sum_list|fact"><span>sum_mset_sum_list</span></a><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>code</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>times</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.fold|const"><span>fold</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>times</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.comm_monoid_mult_class.prod_mset|const"><span>prod_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>
  </span><span>Exercise for the casual reader: add implementations for </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(≤)</span></a></span><span>›</span></span></span><span>
</span><span>  and </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">term</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span>›</span></span></span><span> (multiset order).</span><span>
</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Quickcheck generators</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>includes</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Code_Evaluation.html#Code_Evaluation.term_syntax|bundle"><span>term_syntax</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.msetify_def|fact"><span class="entity_def" id="Multiset.msetify_def|thm"><span class="entity_def" id="Multiset.msetify_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="entity"><span class="entity_def" id="Multiset.msetify|const"><span>msetify</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Typerep.html#Typerep.typerep|class"><span>typerep</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.unit|type"><span>unit</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Code_Evaluation.html#Code_Evaluation.term|type"><span>Code_Evaluation.term</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.unit|type"><span>unit</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Code_Evaluation.html#Code_Evaluation.term|type"><span>Code_Evaluation.term</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/Code/code_preproc.ML.html#Code_Generator.code_unfold|attribute"><span class="operator"><span>code_unfold</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>msetify</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Code_Evaluation.html#Code_Evaluation.valtermify|const"><span>Code_Evaluation.valtermify</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Code_Evaluation.html#Code_Evaluation.valapp|const"><span>{⋅}</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Quickcheck_Random.html#Quickcheck_Random.random|class"><span>random</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Quickcheck_Random.html#Quickcheck_Random.random|class"><span>random</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>includes</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.state_combinator_syntax|bundle"><span>state_combinator_syntax</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.random_multiset_def|fact"><span class="entity_def" id="Multiset.random_multiset_inst.random_multiset|fact"><span class="entity_def" id="Multiset.random_multiset_def|thm"><span class="entity_def" id="Multiset.random_multiset_inst.random_multiset|thm"><span class="entity_def" id="Multiset.random_multiset_def_raw|axiom"><span class="entity_def" id="Multiset.random_multiset_inst.random_multiset_def|axiom"><span class="entity_def" id="Multiset.random_multiset_inst.random_multiset|const"><span>definition</span></span></span></span></span></span></span></span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Quickcheck_Random.html#Quickcheck_Random.random_class.random|const"><span>Quickcheck_Random.random</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Quickcheck_Random.html#Quickcheck_Random.random_class.random|const"><span>Quickcheck_Random.random</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.scomp|const"><span>∘→</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Pair|const"><span>Pair</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.msetify|const"><span>msetify</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.arity_random_multiset|fact"><span class="entity_def" id="Multiset.arity_random_multiset|thm"><span>instance</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>instantiation</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>(</span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Quickcheck_Exhaustive.html#Quickcheck_Exhaustive.full_exhaustive|class"><span>full_exhaustive</span></a></span><span class="main"><span>)</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Quickcheck_Exhaustive.html#Quickcheck_Exhaustive.full_exhaustive|class"><span>full_exhaustive</span></a></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.full_exhaustive_multiset_def|fact"><span class="entity_def" id="Multiset.full_exhaustive_multiset_inst.full_exhaustive_multiset|fact"><span class="entity_def" id="Multiset.full_exhaustive_multiset_def|thm"><span class="entity_def" id="Multiset.full_exhaustive_multiset_inst.full_exhaustive_multiset|thm"><span class="entity_def" id="Multiset.full_exhaustive_multiset_def_raw|axiom"><span class="entity_def" id="Multiset.full_exhaustive_multiset_inst.full_exhaustive_multiset_def|axiom"><span class="entity_def" id="Multiset.full_exhaustive_multiset_inst.full_exhaustive_multiset|const"><span>definition</span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="class_parameter"><span>full_exhaustive_multiset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.unit|type"><span>unit</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Code_Evaluation.html#Code_Evaluation.term|type"><span>term</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Code_Evaluation.html#Code_Evaluation.term|type"><span>term</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Code_Numeral.html#Code_Numeral.natural|type"><span>natural</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Code_Evaluation.html#Code_Evaluation.term|type"><span>term</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>full_exhaustive_multiset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Quickcheck_Exhaustive.html#Quickcheck_Exhaustive.full_exhaustive_class.full_exhaustive|const"><span>Quickcheck_Exhaustive.full_exhaustive</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.msetify|const"><span>msetify</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.arity_full_exhaustive_multiset|fact"><span class="entity_def" id="Multiset.arity_full_exhaustive_multiset|thm"><span>instance</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>hide_const</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>open</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.msetify|const"><span>msetify</span></a><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>BNF setup</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.rel_mset_def|fact"><span class="entity_def" id="Multiset.rel_mset_def|thm"><span class="entity_def" id="Multiset.rel_mset_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.rel_mset|const"><span>rel_mset</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>rel_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Y</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>ys</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>X</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="bound"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Y</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.list_all2|const"><span>list_all2</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_126745..126750">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.mset_zip_take_Cons_drop_twice|fact"><span class="entity_def" id="Multiset.mset_zip_take_Cons_drop_twice|thm"><span>mset_zip_take_Cons_drop_twice</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.take|const"><span>take</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.drop|const"><span>drop</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.take|const"><span>take</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.drop|const"><span>drop</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>x</span></span><span class="main"><span>,</span></span><span class="free"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_126745..126750"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>x</span></span></span><span> </span><span class="quoted"><span class="free"><span>y</span></span></span><span> </span><span class="quoted"><span class="free"><span>j</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list_induct2|fact"><span>list_induct2</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_127069..127073">Cons</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>True</span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>k</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_127213..127214">k</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>j</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>xs</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127069..127073"><span>Cons.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.take|const"><span>take</span></a><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.drop|const"><span>drop</span></a><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.take|const"><span>take</span></a><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.drop|const"><span>drop</span></a><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
      </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span class="main"><span>,</span></span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127069..127073"><span>Cons.hyps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127213..127214"><span>k</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_127513..127518">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.ex_mset_zip_left|fact"><span class="entity_def" id="Multiset.ex_mset_zip_left|thm"><span>ex_mset_zip_left</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>ys'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>ys'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="bound"><span>ys'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127513..127518"><span>assms</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quoted"><span class="free"><span>ys</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>xs'</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list_induct2|fact"><span>list_induct2</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>Nil</span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_127788..127792">Cons</span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="skolem"><span>ys</span></span><span> </span><span class="skolem"><span>xs'</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>j</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_127825..127830">j_len</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>xs'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_127853..127858">nth_j</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127788..127792"><span>Cons.prems</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.in_set_conv_nth|fact"><span>in_set_conv_nth</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set_intros|fact"><span>list.set_intros</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_eq_setD|fact"><span>mset_eq_setD</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_127951..127957">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>xsa</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xsa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.take|const"><span>take</span></a><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="skolem"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.drop|const"><span>drop</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>xs'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="skolem"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="skolem"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="skolem"><span>xsa</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127951..127957"><span>xsa_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127825..127830"><span>j_len</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127853..127858"><span>nth_j</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.Cons_nth_drop_Suc|fact"><span>Cons_nth_drop_Suc</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset_add_mset_right|fact"><span>union_mset_add_mset_right</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset_remove_trivial|fact"><span>add_mset_remove_trivial</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.cancel_ab_semigroup_add_class.add_diff_cancel_left&apos;|fact"><span>add_diff_cancel_left'</span></a><span>
        </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append_take_drop_id|fact"><span>append_take_drop_id</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset.simps|fact"><span>mset.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_append|fact"><span>mset_append</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="entity_def" id="offset_128250..128254">ms_x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="skolem"><span>xsa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="skolem"><span>xs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127788..127792"><span>Cons.prems</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ysa</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="entity_def" id="offset_128335..128340">len_a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>ysa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>xsa</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_128372..128376">ms_a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="skolem"><span>xsa</span></span><span> </span><span class="skolem"><span>ysa</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127788..127792"><span>Cons.hyps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

  </span><span class="keyword3"><span class="command"><span class="entity_def" id="offset_128453..128459">define</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ys'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>ys'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.take|const"><span>take</span></a><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="skolem"><span>ysa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.drop|const"><span>drop</span></a><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="skolem"><span>ysa</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_128513..128516">xs'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.take|const"><span>take</span></a><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="skolem"><span>xsa</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.drop|const"><span>drop</span></a><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="skolem"><span>xsa</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_128250..128254"><span>ms_x</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127825..127830"><span>j_len</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127853..127858"><span>nth_j</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127788..127792"><span>Cons.prems</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127951..127957"><span>xsa_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append_eq_append_conv|fact"><span>append_eq_append_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append_take_drop_id|fact"><span>append_take_drop_id</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.diff_Suc_Suc|fact"><span>diff_Suc_Suc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.Cons_nth_drop_Suc|fact"><span>Cons_nth_drop_Suc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Greatest_Fixpoint.html#BNF_Greatest_Fixpoint.length_Cons|fact"><span>length_Cons</span></a><span>
      </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length_drop|fact"><span>length_drop</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_mset|fact"><span>size_mset</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_128735..128741">j_len'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>xsa</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127825..127830"><span>j_len</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_128513..128516"><span>xs'</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127951..127957"><span>xsa_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.add_Suc_right|fact"><span>add_Suc_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append_take_drop_id|fact"><span>append_take_drop_id</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Greatest_Fixpoint.html#BNF_Greatest_Fixpoint.length_Cons|fact"><span>length_Cons</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length_append|fact"><span>length_append</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_eq_Suc_le|fact"><span>less_eq_Suc_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less|fact"><span>not_less</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>ys'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>xs'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_128453..128459"><span>ys'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_127788..127792"><span>Cons.prems</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_128335..128340"><span>len_a</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_128250..128254"><span>ms_x</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.add_Suc_right|fact"><span>add_Suc_right</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.append_take_drop_id|fact"><span>append_take_drop_id</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Greatest_Fixpoint.html#BNF_Greatest_Fixpoint.length_Cons|fact"><span>length_Cons</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length_append|fact"><span>length_append</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_eq_length|fact"><span>mset_eq_length</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="skolem"><span>xs'</span></span><span> </span><span class="skolem"><span>ys'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Cons|const"><span>#</span></a></span><span> </span><span class="skolem"><span>ys</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_128513..128516"><span>xs'</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_128453..128459"><span>ys'_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.trans|fact"><span>trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_zip_take_Cons_drop_twice|fact"><span>mset_zip_take_Cons_drop_twice</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_128335..128340"><span>len_a</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_128372..128376"><span>ms_a</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_128735..128741"><span>j_len'</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_129287..129292">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.list_all2_reorder_left_invariance|fact"><span class="entity_def" id="Multiset.list_all2_reorder_left_invariance|thm"><span>list_all2_reorder_left_invariance</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_129338..129341">rel</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.list_all2|const"><span>list_all2</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_129367..129371">ms_x</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>ys'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.list_all2|const"><span>list_all2</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="bound"><span>ys'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="bound"><span>ys'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_129466..129469">len</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_129338..129341"><span>rel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list_all2_conv_all_nth|fact"><span>list_all2_conv_all_nth</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ys'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="entity_def" id="offset_129563..129567">len'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>ys'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_129599..129604">ms_xy</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="skolem"><span>ys'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_129466..129469"><span>len</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_129367..129371"><span>ms_x</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ex_mset_zip_left|fact"><span>ex_mset_zip_left</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.list_all2|const"><span>list_all2</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="skolem"><span>ys'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_129287..129292"><span>assms</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_129563..129567"><span>len'</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_129599..129604"><span>ms_xy</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list_all2_iff|fact"><span>list_all2_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_eq_setD|fact"><span>mset_eq_setD</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="skolem"><span>ys'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_129466..129469"><span>len</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_129563..129567"><span>len'</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_129599..129604"><span>ms_xy</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.map_snd_zip|fact"><span>map_snd_zip</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_map|fact"><span>mset_map</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.ex_mset|fact"><span class="entity_def" id="Multiset.ex_mset|thm"><span>ex_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>X</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>X</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset.simps|fact"><span>mset.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.pred_mset.inducts|fact"><span class="entity_def" id="Multiset.pred_mset.simps|fact"><span class="entity_def" id="Multiset.pred_mset.induct|fact"><span class="entity_def" id="Multiset.pred_mset.cases|fact"><span class="entity_def" id="Multiset.pred_mset.intros|fact"><span class="entity_def" id="Multiset.pred_mset.inducts|thm"><span class="entity_def" id="Multiset.pred_mset.simps|thm"><span class="entity_def" id="Multiset.pred_mset.induct|thm"><span class="entity_def" id="Multiset.pred_mset.cases|thm"><span class="entity_def" id="Multiset.pred_mset.intros(2)|thm"><span class="entity_def" id="Multiset.pred_mset.intros(1)|thm"><span class="entity_def" id="Multiset.pred_mset_def|axiom"><span>inductive</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.pred_mset|const"><span>pred_mset</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> 
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pred_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>pred_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>pred_mset</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.pred_mset_iff|fact"><span class="entity_def" id="Multiset.pred_mset_iff|thm"><span>pred_mset_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="comment1"><span>― ‹</span><span>TODO: alias for </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Ball|const"><span>Multiset.Ball</span></a><span>›</span></span><span>›</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pred_mset|const"><span>pred_mset</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Ball|const"><span>Multiset.Ball</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>P</span></span><span>›</span></span></span><span>  </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="var"><span>?P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="var"><span>?Q</span></span><span>›</span></span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?P</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?Q</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="operator"><span>simp_all</span></span><span>
</span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?Q</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?P</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pred_mset.intros|fact"><span>pred_mset.intros</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.multiset.Quotient|fact"><span class="entity_def" id="Multiset.multiset.Domainp_rel|fact"><span class="entity_def" id="Multiset.multiset.right_unique_rel|fact"><span class="entity_def" id="Multiset.multiset.left_unique_rel|fact"><span class="entity_def" id="Multiset.multiset.right_total_rel|fact"><span class="entity_def" id="Multiset.multiset.left_total_rel|fact"><span class="entity_def" id="Multiset.multiset.bi_unique_rel|fact"><span class="entity_def" id="Multiset.multiset.bi_total_rel|fact"><span class="entity_def" id="Multiset.Multiset.multiset.set_transfer|fact"><span class="entity_def" id="Multiset.Multiset.multiset.set_map|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_transfer|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_transp|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_symp|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_reflp|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_refl_strong|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_refl|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_cong_simp|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_cong|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_mono_strong|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_mono|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_map|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_Grp|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_flip|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_eq_onp|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_eq|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_conversep|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_compp_Grp|fact"><span class="entity_def" id="Multiset.Multiset.multiset.rel_compp|fact"><span class="entity_def" id="Multiset.Multiset.multiset.pred_set|fact"><span class="entity_def" id="Multiset.Multiset.multiset.pred_True|fact"><span class="entity_def" id="Multiset.Multiset.multiset.pred_transfer|fact"><span class="entity_def" id="Multiset.Multiset.multiset.pred_rel|fact"><span class="entity_def" id="Multiset.Multiset.multiset.pred_map|fact"><span class="entity_def" id="Multiset.Multiset.multiset.pred_cong_simp|fact"><span class="entity_def" id="Multiset.Multiset.multiset.pred_cong|fact"><span class="entity_def" id="Multiset.Multiset.multiset.pred_mono_strong|fact"><span class="entity_def" id="Multiset.Multiset.multiset.pred_mono|fact"><span class="entity_def" id="Multiset.Multiset.multiset.map_ident_strong|fact"><span class="entity_def" id="Multiset.Multiset.multiset.map_ident|fact"><span class="entity_def" id="Multiset.Multiset.multiset.map_transfer|fact"><span class="entity_def" id="Multiset.Multiset.multiset.map_id0|fact"><span class="entity_def" id="Multiset.Multiset.multiset.map_id|fact"><span class="entity_def" id="Multiset.Multiset.multiset.map_cong_pred|fact"><span class="entity_def" id="Multiset.Multiset.multiset.map_cong_simp|fact"><span class="entity_def" id="Multiset.Multiset.multiset.map_cong|fact"><span class="entity_def" id="Multiset.Multiset.multiset.map_cong0|fact"><span class="entity_def" id="Multiset.Multiset.multiset.map_comp|fact"><span class="entity_def" id="Multiset.Multiset.multiset.inj_map_strong|fact"><span class="entity_def" id="Multiset.Multiset.multiset.inj_map|fact"><span class="entity_def" id="Multiset.Multiset.multiset.in_rel|fact"><span class="entity_def" id="Multiset.multiset.Quotient|thm"><span class="entity_def" id="Multiset.multiset.Domainp_rel|thm"><span class="entity_def" id="Multiset.multiset.right_unique_rel|thm"><span class="entity_def" id="Multiset.multiset.left_unique_rel|thm"><span class="entity_def" id="Multiset.multiset.right_total_rel|thm"><span class="entity_def" id="Multiset.multiset.left_total_rel|thm"><span class="entity_def" id="Multiset.multiset.bi_unique_rel|thm"><span class="entity_def" id="Multiset.multiset.bi_total_rel|thm"><span class="entity_def" id="Multiset.Multiset.multiset.set_transfer|thm"><span class="entity_def" id="Multiset.Multiset.multiset.set_map|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_transfer|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_transp|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_symp|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_reflp|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_refl_strong|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_refl|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_cong_simp|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_cong|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_mono_strong|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_mono|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_map(2)|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_map(1)|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_Grp|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_flip|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_eq_onp|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_eq|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_conversep|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_compp_Grp|thm"><span class="entity_def" id="Multiset.Multiset.multiset.rel_compp|thm"><span class="entity_def" id="Multiset.Multiset.multiset.pred_set|thm"><span class="entity_def" id="Multiset.Multiset.multiset.pred_True|thm"><span class="entity_def" id="Multiset.Multiset.multiset.pred_transfer|thm"><span class="entity_def" id="Multiset.Multiset.multiset.pred_rel|thm"><span class="entity_def" id="Multiset.Multiset.multiset.pred_map|thm"><span class="entity_def" id="Multiset.Multiset.multiset.pred_cong_simp|thm"><span class="entity_def" id="Multiset.Multiset.multiset.pred_cong|thm"><span class="entity_def" id="Multiset.Multiset.multiset.pred_mono_strong|thm"><span class="entity_def" id="Multiset.Multiset.multiset.pred_mono|thm"><span class="entity_def" id="Multiset.Multiset.multiset.map_ident_strong|thm"><span class="entity_def" id="Multiset.Multiset.multiset.map_ident|thm"><span class="entity_def" id="Multiset.Multiset.multiset.map_transfer|thm"><span class="entity_def" id="Multiset.Multiset.multiset.map_id0|thm"><span class="entity_def" id="Multiset.Multiset.multiset.map_id|thm"><span class="entity_def" id="Multiset.Multiset.multiset.map_cong_pred|thm"><span class="entity_def" id="Multiset.Multiset.multiset.map_cong_simp|thm"><span class="entity_def" id="Multiset.Multiset.multiset.map_cong|thm"><span class="entity_def" id="Multiset.Multiset.multiset.map_cong0|thm"><span class="entity_def" id="Multiset.Multiset.multiset.map_comp|thm"><span class="entity_def" id="Multiset.Multiset.multiset.inj_map_strong|thm"><span class="entity_def" id="Multiset.Multiset.multiset.inj_map|thm"><span class="entity_def" id="Multiset.Multiset.multiset.in_rel|thm"><span>bnf</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span>
  map</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a></span><span>
  sets</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a></span><span>
  bd</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Order_Relation.html#BNF_Cardinal_Order_Relation.natLeq|const"><span>natLeq</span></a></span><span>
  wits</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  rel</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a></span><span>
  pred</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pred_mset|const"><span>pred_mset</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset.id|fact"><span>image_mset.id</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="skolem"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="skolem"><span>f</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>g</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><span>comp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp_def|fact"><span>comp_def</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset.compositionality|fact"><span>image_mset.compositionality</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>z</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="bound"><span>z</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="skolem"><span>X</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="skolem"><span>g</span></span><span> </span><span class="skolem"><span>X</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>X</span></span></span><span class="main"><span>)</span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>(`)</span></a></span><span> </span><span class="skolem"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>f</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Order_Relation.html#BNF_Cardinal_Order_Relation.card_order|const"><span>card_order</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Order_Relation.html#BNF_Cardinal_Order_Relation.natLeq|const"><span>natLeq</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Arithmetic.html#BNF_Cardinal_Arithmetic.natLeq_card_order|fact"><span>natLeq_card_order</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Arithmetic.html#BNF_Cardinal_Arithmetic.cinfinite|const"><span>BNF_Cardinal_Arithmetic.cinfinite</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Order_Relation.html#BNF_Cardinal_Order_Relation.natLeq|const"><span>natLeq</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Arithmetic.html#BNF_Cardinal_Arithmetic.natLeq_cinfinite|fact"><span>natLeq_cinfinite</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Order_Relation.html#BNF_Cardinal_Order_Relation.regularCard|const"><span>regularCard</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Order_Relation.html#BNF_Cardinal_Order_Relation.natLeq|const"><span>natLeq</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Order_Relation.html#BNF_Cardinal_Order_Relation.regularCard_natLeq|fact"><span>regularCard_natLeq</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/BNF_Wellorder_Constructions.html#BNF_Wellorder_Constructions.ordLess2|const"><span>ordLess2</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Order_Relation.html#BNF_Cardinal_Order_Relation.card_of|const"><span>card_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>X</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Order_Relation.html#BNF_Cardinal_Order_Relation.natLeq|const"><span>natLeq</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>X</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Transfer/transfer.ML.html#Transfer.transfer|method"><span class="operator"><span>transfer</span></span></a><span>
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Cardinal_Order_Relation.html#BNF_Cardinal_Order_Relation.finite_iff_ordLess_natLeq|fact"><span>finite_iff_ordLess_natLeq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.relcompp|const"><span>OO</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="skolem"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>R</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.relcompp|const"><span>OO</span></a></span><span> </span><span class="skolem"><span>S</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="skolem"><span>S</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset_def|fact"><span>rel_mset_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>abs_def</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transfer.html#Transfer.OO_def|fact"><span>OO_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.clarify|method"><span class="operator"><span>clarify</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> X Z Y xs ys' ys zs</span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>drule</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.list_all2_reorder_left_invariance|fact"><span>list_all2_reorder_left_invariance</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><span class="operator"><span>where</span></span></span></span><span> xs </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>ys'</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> ys </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>zs</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> xs' </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>ys</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list_all2_trans|fact"><span>list_all2_trans</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>z</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="skolem"><span>R</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>R</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset_def|fact"><span>rel_mset_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>abs_def</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span>
     </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span> x </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip|const"><span>zip</span></a><span> </span><span class="improper"><span>xs</span></span><span> </span><span class="improper"><span>ys</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span>
       </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.in_set_zip|fact"><span>in_set_zip</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list_all2_iff|fact"><span>list_all2_iff</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_map|fact"><span>mset_map</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rename_tac</span></span><span> XY</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>cut_tac</span></span><span> X </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="improper"><span>XY</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.ex_mset|fact"><span>ex_mset</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exE|fact"><span>exE</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rename_tac</span></span><span> xys</span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span> x </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="improper"><span>xys</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_map|fact"><span>mset_map</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span> x </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.map|const"><span>map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="improper"><span>xys</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.mset_map|fact"><span>mset_map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list_all2I|fact"><span>list_all2I</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|fact"><span>subset_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.zip_map_fst_snd|fact"><span>zip_map_fst_snd</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>z</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>z</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pred_mset|const"><span>pred_mset</span></a><span> </span><span class="skolem"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Ball|const"><span>Ball</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>P</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>P</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.pred_mset_iff|fact"><span>pred_mset_iff</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Multiset.rel_mset&apos;.inducts|fact"><span class="entity_def" id="Multiset.rel_mset&apos;.simps|fact"><span class="entity_def" id="Multiset.rel_mset&apos;.induct|fact"><span class="entity_def" id="Multiset.rel_mset&apos;.cases|fact"><span class="entity_def" id="Multiset.rel_mset&apos;.intros|fact"><span class="entity_def" id="Multiset.rel_mset&apos;.inducts|thm"><span class="entity_def" id="Multiset.rel_mset&apos;.simps|thm"><span class="entity_def" id="Multiset.rel_mset&apos;.induct|thm"><span class="entity_def" id="Multiset.rel_mset&apos;.cases|thm"><span class="entity_def" id="Multiset.rel_mset&apos;.intros(2)|thm"><span class="entity_def" id="Multiset.rel_mset&apos;.intros(1)|thm"><span class="entity_def" id="Multiset.rel_mset&apos;_def|axiom"><span>inductive</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Multiset.rel_mset&apos;|const"><span>rel_mset'</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>›</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
  </span><span class="entity_def" id="Multiset.rel_mset&apos;.Zero|fact"><span class="entity_def" id="Multiset.rel_mset&apos;.Zero|thm"><span>Zero</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.intro|attribute"><span class="operator"><span>intro</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>rel_mset'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
</span><span class="main"><span>|</span></span><span> </span><span class="entity_def" id="Multiset.rel_mset&apos;.Plus|fact"><span class="entity_def" id="Multiset.rel_mset&apos;.Plus|thm"><span>Plus</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.intro|attribute"><span class="operator"><span>intro</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>rel_mset'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>rel_mset'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>M</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.rel_mset_Zero|fact"><span class="entity_def" id="Multiset.rel_mset_Zero|thm"><span>rel_mset_Zero</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset_def|fact"><span>rel_mset_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Def.html#BNF_Def.Grp_def|fact"><span>Grp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count|fact"><span>multiset.count</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.count_Abs_multiset|fact"><span>count_Abs_multiset</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset.count_inverse|fact"><span>multiset.count_inverse</span></a><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_132745..132750">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.rel_mset_Plus|fact"><span class="entity_def" id="Multiset.rel_mset_Plus|thm"><span>rel_mset_Plus</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>ab</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>MN</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_132878..132882">have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>ya</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="bound"><span>ya</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>y</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="bound"><span>ya</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span>
    </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="bound"><span>ya</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>if</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>y</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>y</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_132878..132882"><span>that</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="main"><span class="main"><span>_</span></span></span><span> </span><span class="quoted"><span class="quoted"><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a></a></a><span> </span><span class="main"><span class="main"><span class="main"><span>(</span></span></span></span><span class="free"><span class="free"><span class="free"><span>a</span></span></span></span><span class="main"><span class="main"><span class="main"><span>,</span></span></span></span><span class="free"><span class="free"><span class="free"><span>b</span></span></span></span><span class="main"><span class="main"><span class="main"><span>)</span></span></span></span><span> </span><span class="skolem"><span class="skolem"><span class="skolem"><span>y</span></span></span></span><span>"</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_132745..132750"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Multiset.multiset.rel_compp_Grp|fact"><span>multiset.rel_compp_Grp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Def.html#BNF_Def.Grp_def|fact"><span>Grp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.rel_mset&apos;_imp_rel_mset|fact"><span class="entity_def" id="Multiset.rel_mset&apos;_imp_rel_mset|thm"><span>rel_mset'_imp_rel_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset&apos;|const"><span>rel_mset'</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset&apos;.induct|fact"><span>rel_mset'.induct</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset_Zero|fact"><span>rel_mset_Zero</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset_Plus|fact"><span>rel_mset_Plus</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.rel_mset_size|fact"><span class="entity_def" id="Multiset.rel_mset_size|thm"><span>rel_mset_size</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Multiset.multiset.rel_compp_Grp|fact"><span>multiset.rel_compp_Grp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Def.html#BNF_Def.Grp_def|fact"><span>Grp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.rel_mset_Zero_iff|fact"><span class="entity_def" id="Multiset.rel_mset_Zero_iff(2)|thm"><span class="entity_def" id="Multiset.rel_mset_Zero_iff(1)|thm"><span>rel_mset_Zero_iff</span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>rel</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>Y</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>rel</span></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset_Zero|fact"><span>rel_mset_Zero</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset_size|fact"><span>rel_mset_size</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_induct2|fact"><span class="entity_def" id="Multiset.multiset_induct2|thm"><span>multiset_induct2</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>case_names</span></span><span> empty addL addR</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_133711..133716">empty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_133738..133742">addL</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>N</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_133789..133793">addR</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_induct|fact"><span>multiset_induct</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_induct|fact"><span>multiset_induct</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_133711..133716"><span>empty</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_133738..133742"><span>addL</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset_induct|fact"><span>multiset_induct</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_133789..133793"><span>addR</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_133789..133793"><span>addR</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.multiset_induct2_size|fact"><span class="entity_def" id="Multiset.multiset_induct2_size|thm"><span>multiset_induct2_size</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>consumes</span></span><span> 1</span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>case_names</span></span><span> empty add</span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_134093..134094">c</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_134122..134127">empty</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_134149..134152">add</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>M</span></span><span> </span><span class="bound"><span>N</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134093..134094"><span>c</span></a><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.measure_induct_rule|fact"><span>measure_induct_rule</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_134309..134313">less</span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_134364..134368">True</span><span> </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134309..134313"><span>less.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134364..134368"><span>True</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134122..134127"><span>empty</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_134468..134473">False</span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_134497..134498">M</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multi_nonempty_split|fact"><span>multi_nonempty_split</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134468..134473"><span>False</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134309..134313"><span>less.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>N1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_134629..134630">N</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>N1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multi_nonempty_split|fact"><span>multi_nonempty_split</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="skolem"><span>M1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="skolem"><span>N1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134309..134313"><span>less.prems</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134497..134498"><span>M</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134629..134630"><span>N</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134497..134498"><span>M</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134629..134630"><span>N</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134309..134313"><span>less.hyps</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134149..134152"><span>add</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_134812..134817">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.msed_map_invL|fact"><span class="entity_def" id="Multiset.msed_map_invL|thm"><span>msed_map_invL</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>N1</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>N1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>N1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134812..134817"><span>assms</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Multiset.multiset.set_map|fact"><span>multiset.set_map</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>N1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_135047..135048">N</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>N1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multi_member_split|fact"><span>multi_member_split</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>N1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_134812..134817"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135047..135048"><span>N</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135047..135048"><span>N</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_135206..135211">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.msed_map_invR|fact"><span class="entity_def" id="Multiset.msed_map_invR|thm"><span>msed_map_invR</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M1</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>M1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>M1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span>a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_135377..135379">fa</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Multiset.multiset.set_map|fact"><span>multiset.set_map</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135206..135211"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_iff|fact"><span>image_iff</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_single_eq_member|fact"><span>union_single_eq_member</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_135513..135514">M</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multi_member_split|fact"><span>multi_member_split</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>M1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135206..135211"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135513..135514"><span>M</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135377..135379"><span>fa</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135513..135514"><span>M</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135377..135379"><span>fa</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_135685..135690">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.msed_rel_invL|fact"><span class="entity_def" id="Multiset.msed_rel_invL|thm"><span>msed_rel_invL</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>N1</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>b</span></span><span> </span><span class="bound"><span>N1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="bound"><span>N1</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_135832..135834">KM</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_135878..135880">KN</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_135909..135911">sK</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135685..135690"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Multiset.multiset.rel_compp_Grp|fact"><span>multiset.rel_compp_Grp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Def.html#BNF_Def.Grp_def|fact"><span>Grp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ab</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_136034..136035">K</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>ab</span></span><span> </span><span class="skolem"><span>K1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_136062..136063">a</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>ab</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_136086..136089">K1M</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>K1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.msed_map_invR|fact"><span>msed_map_invR</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135832..135834"><span>KM</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>N1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_136168..136169">N</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>ab</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>N1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_136202..136206">K1N1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>K1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>N1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.msed_map_invL|fact"><span>msed_map_invL</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135878..135880"><span>KN</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136034..136035"><span>K</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_136291..136294">Rab</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>ab</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135909..135911"><span>sK</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136062..136063"><span>a</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136034..136035"><span>K</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="skolem"><span>N1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_135909..135911"><span>sK</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136086..136089"><span>K1M</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136202..136206"><span>K1N1</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136034..136035"><span>K</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Multiset.multiset.rel_compp_Grp|fact"><span>multiset.rel_compp_Grp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Def.html#BNF_Def.Grp_def|fact"><span>Grp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136168..136169"><span>N</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136291..136294"><span>Rab</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_136480..136485">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.msed_rel_invR|fact"><span class="entity_def" id="Multiset.msed_rel_invR|thm"><span>msed_rel_invR</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>M1</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>M1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>M1</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_136627..136629">KN</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_136673..136675">KM</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_136704..136706">sK</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136480..136485"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Multiset.multiset.rel_compp_Grp|fact"><span>multiset.rel_compp_Grp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Def.html#BNF_Def.Grp_def|fact"><span>Grp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>K1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>ab</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_136829..136830">K</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>K</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>ab</span></span><span> </span><span class="skolem"><span>K1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_136857..136858">b</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>ab</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_136881..136884">K1N</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="skolem"><span>K1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.msed_map_invR|fact"><span>msed_map_invR</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136627..136629"><span>KN</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M1</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_136963..136964">M</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>ab</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>M1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_136997..137001">K1M1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>K1</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>M1</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.msed_map_invL|fact"><span>msed_map_invL</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136673..136675"><span>KM</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136829..136830"><span>K</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_137086..137089">Rab</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="skolem"><span>ab</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136704..136706"><span>sK</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136857..136858"><span>b</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136829..136830"><span>K</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>M1</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136704..136706"><span>sK</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136881..136884"><span>K1N</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136997..137001"><span>K1M1</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136829..136830"><span>K</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.Multiset.multiset.rel_compp_Grp|fact"><span>multiset.rel_compp_Grp</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/BNF_Def.html#BNF_Def.Grp_def|fact"><span>Grp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_136963..136964"><span>M</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137086..137089"><span>Rab</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_137275..137280">lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.rel_mset_imp_rel_mset&apos;|fact"><span class="entity_def" id="Multiset.rel_mset_imp_rel_mset&apos;|thm"><span>rel_mset_imp_rel_mset'</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset&apos;|const"><span>rel_mset'</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137275..137280"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="free"><span>M</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.measure_induct_rule|fact"><span>measure_induct_rule</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a></span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_137442..137446">less</span><span> </span><span class="skolem"><span>M</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_137457..137458">c</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="skolem"><span>N</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset_size|fact"><span>rel_mset_size</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137442..137446"><span>less.prems</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_137562..137566">True</span><span> </span><span class="keyword1"><span class="command"><span>hence</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137457..137458"><span>c</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137562..137566"><span>True</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset&apos;.Zero|fact"><span>rel_mset'.Zero</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>M1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>a</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_137695..137696">M</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>M1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multi_nonempty_split|fact"><span>multi_nonempty_split</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>N1</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>b</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="entity_def" id="offset_137772..137773">N</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.add_mset|const"><span>add_mset</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="skolem"><span>N1</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_137799..137800">R</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_137814..137816">ms</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>M1</span></span><span> </span><span class="skolem"><span>N1</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.msed_rel_invL|fact"><span>msed_rel_invL</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137442..137446"><span>less.prems</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137695..137696"><span>M</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset&apos;|const"><span>rel_mset'</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="skolem"><span>M1</span></span><span> </span><span class="skolem"><span>N1</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137442..137446"><span>less.hyps</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="skolem"><span>M1</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>N1</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137814..137816"><span>ms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137695..137696"><span>M</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset&apos;.Plus|fact"><span>rel_mset'.Plus</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>R</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>a</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>b</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137799..137800"><span>R</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137695..137696"><span>M</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#offset_137772..137773"><span>N</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.rel_mset_rel_mset&apos;|fact"><span class="entity_def" id="Multiset.rel_mset_rel_mset&apos;|thm"><span>rel_mset_rel_mset'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset&apos;|const"><span>rel_mset'</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset_imp_rel_mset&apos;|fact"><span>rel_mset_imp_rel_mset'</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset&apos;_imp_rel_mset|fact"><span>rel_mset'_imp_rel_mset</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>The main end product for </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span>›</span></span><span>: inductive characterization:</span><span>›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Multiset.rel_mset_induct|fact"><span class="entity_def" id="Multiset.rel_mset_induct|thm"><span>rel_mset_induct</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>case_names</span></span><span> empty add</span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|attribute"><span class="operator"><span>induct</span></span></a><span> </span><span class="quasi_keyword"><span>pred</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset|const"><span>rel_mset</span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset&apos;.induct|fact"><span>rel_mset'.induct</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.rel_mset_rel_mset&apos;|fact"><span>rel_mset_rel_mset'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Size setup</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_multiset_o_map|fact"><span class="entity_def" id="Multiset.size_multiset_o_map|thm"><span>size_multiset_o_map</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset|const"><span>size_multiset</span></a><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.image_mset|const"><span>image_mset</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset|const"><span>size_multiset</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>∘</span></a></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> x</span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.induct|method"><span class="operator"><span>induct</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>x</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>setup</span></span></span><span> </span><span class="quoted"><span>‹</span><span>
  </span><span class="entity"><span>BNF_LFP_Size.register_size_global</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">type_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>›</span></span><span> </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const_name</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset|const"><span>size_multiset</span></a><span>›</span></span><span>
    </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thm</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_overloaded_def|fact"><span>size_multiset_overloaded_def</span></a><span class="antiquote"><span>}</span></span></span></span><span>
    </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_empty|fact"><span>size_multiset_empty</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_single|fact"><span>size_multiset_single</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_union|fact"><span>size_multiset_union</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_empty|fact"><span>size_empty</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_single|fact"><span>size_single</span></a><span>
      </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_union|fact"><span>size_union</span></a><span class="antiquote"><span>}</span></span></span></span><span>
    </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_multiset_o_map|fact"><span>size_multiset_o_map</span></a><span class="antiquote"><span>}</span></span></span></span><span>
</span><span>›</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Lemmas about Size</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_mset_SucE|fact"><span class="entity_def" id="Multiset.size_mset_SucE|thm"><span>size_mset_SucE</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>B</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>a</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="bound"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ac_simps|fact"><span class="dynamic"><span class="dynamic"><span>ac_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_Suc_Diff1|fact"><span class="entity_def" id="Multiset.size_Suc_Diff1|thm"><span>size_Suc_Diff1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.arg_cong|fact"><span>arg_cong</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.insert_DiffM|fact"><span>insert_DiffM</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>of</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_Diff_singleton|fact"><span class="entity_def" id="Multiset.size_Diff_singleton|thm"><span>size_Diff_singleton</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_Suc_Diff1|fact"><span>size_Suc_Diff1</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_Diff_singleton_if|fact"><span class="entity_def" id="Multiset.size_Diff_singleton_if|thm"><span>size_Diff_singleton_if</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_single_trivial|fact"><span>diff_single_trivial</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_Diff_singleton|fact"><span>size_Diff_singleton</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_Un_Int|fact"><span class="entity_def" id="Multiset.size_Un_Int|thm"><span>size_Un_Int</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_subset_eq_union|fact"><span>inter_subset_eq_union</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_union|fact"><span>size_union</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.diff_add|fact"><span>subset_mset.diff_add</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_diff_inter_eq_sup|fact"><span>union_diff_inter_eq_sup</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_Un_disjoint|fact"><span class="entity_def" id="Multiset.size_Un_disjoint|thm"><span>size_Un_disjoint</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.union_mset|const"><span>∪#</span></a></span><span> </span><span class="free"><span>B</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_Un_Int|fact"><span>size_Un_Int</span></a><span class="main"><span>[</span></span><span class="operator"><span>of</span></span><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span> </span><span class="quoted"><span class="free"><span>B</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_Diff_subset_Int|fact"><span class="entity_def" id="Multiset.size_Diff_subset_Int|thm"><span>size_Diff_subset_Int</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.inter_mset|const"><span>∩#</span></a></span><span> </span><span class="free"><span>M'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_intersect_left_idem|fact"><span>diff_intersect_left_idem</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_Diff_submset|fact"><span>size_Diff_submset</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset.inf_le1|fact"><span>subset_mset.inf_le1</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.diff_size_le_size_Diff|fact"><span class="entity_def" id="Multiset.diff_size_le_size_Diff|thm"><span>diff_size_le_size_Diff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>_</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>M'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.diff_le_mono2|fact"><span>diff_le_mono2</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_Diff_subset_Int|fact"><span>size_Diff_subset_Int</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_mset_mono|fact"><span>size_mset_mono</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_Diff1_less|fact"><span class="entity_def" id="Multiset.size_Diff1_less|thm"><span>size_Diff1_less</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc_less_SucD|fact"><span>Suc_less_SucD</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_Suc_Diff1|fact"><span>size_Suc_Diff1</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_Diff2_less|fact"><span class="entity_def" id="Multiset.size_Diff2_less|thm"><span>size_Diff2_less</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>y</span></span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>y</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_imp_diff_less|fact"><span>less_imp_diff_less</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_Diff1_less|fact"><span>size_Diff1_less</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_Diff_subset_Int|fact"><span>size_Diff_subset_Int</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_Diff1_le|fact"><span class="entity_def" id="Multiset.size_Diff1_le|thm"><span>size_Diff1_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>x</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.size_Diff1_less|fact"><span>size_Diff1_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_imp_le|fact"><span>less_imp_le</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.diff_single_trivial|fact"><span>diff_single_trivial</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Multiset.size_psubset|fact"><span class="entity_def" id="Multiset.size_psubset|thm"><span>size_psubset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subseteq_mset|const"><span>⊆#</span></a></span><span> </span><span class="free"><span>M'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.size_class.size|const"><span>size</span></a><span> </span><span class="free"><span>M'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset|const"><span>⊂#</span></a></span><span> </span><span class="free"><span>M'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_irrefl|fact"><span>less_irrefl</span></a><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.subset_mset_def|fact"><span>subset_mset_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>hide_const</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>open</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="HOL-Library.Multiset.html#Multiset.wcount|const"><span>wcount</span></a><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>