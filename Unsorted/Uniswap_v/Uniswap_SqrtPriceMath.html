<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Uniswap_SqrtPriceMath</title>
</head>


<body>
<div class="head">
<h1>Theory Uniswap_SqrtPriceMath</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="Uniswap_SqrtPriceMath.html"><span>Uniswap_SqrtPriceMath</span></a><span>
  </span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><a href="Uniswap_Common.html"><span>Uniswap_Common</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta&apos;_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta&apos;_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta&apos;_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta&apos;_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta&apos;_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta&apos;|const"><span>getAmount0Delta'</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="comment1"><span>― ‹</span><span>In this version we don't consider precision at all, so there is no rounding.
</span><span>      Though it doesn't mean φ-system currently has no ability to do precision analysis,
</span><span>      I am thinking of a general framework in φ-system boosting precision analysis,
</span><span>      maybe based on relative error.</span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>rB</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>rB</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>liq</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>¦</span></a></span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>rB</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> 
    </span><span class="main"><span>$</span></span><span>rA </span><span class="main"><span>$</span></span><span>rB </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>var</span></span></span><span> </span><span class="skolem"><span>rA</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>rB</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>rA </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>$</span></span><span>rB</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="main"><span>$</span></span><span>rB </span><span class="main"><span>$</span></span><span>rA </span><span class="main"><span>→</span></span><span> rA</span><span class="main"><span>,</span></span><span> rB</span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span> 

    </span><span class="main"><span>$</span></span><span>liq </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>numerator1</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>rB </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>$</span></span><span>rA</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>numerator2</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>

    </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span> </span><span class="main"><span>$</span></span><span>rA </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>

    </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>$</span></span><span>numerator2 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>rA </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>rB</span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/nu-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.\&lt;phi&gt;|fact"><span class="dynamic"><span class="dynamic"><span>φ</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.division_ring_class.diff_divide_distrib|fact"><span>diff_divide_distrib</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.field_class.diff_frac_eq|fact"><span>diff_frac_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.divide_strict_left_mono|fact"><span>divide_strict_left_mono</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_semiring_strict_class.mult_pos_pos|fact"><span>mult_pos_pos</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ring_class.right_diff_distrib|fact"><span>right_diff_distrib</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.field_class.diff_frac_eq|fact"><span>diff_frac_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.divide_nonneg_nonneg|fact"><span>divide_nonneg_nonneg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.comm_semiring_1_cancel_class.right_diff_distrib&apos;|fact"><span>right_diff_distrib'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_ring_class.split_mult_pos_le|fact"><span>split_mult_pos_le</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta|const"><span>getAmount0Delta</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>rB</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>rB</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>rB</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>liq </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_Common_Int.html#PhiSem_Common_Int.neg_\&lt;phi&gt;app|fact"><span class="dynamic"><span class="dynamic"><span>neg</span></span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getAmount0Delta&apos;_\&lt;phi&gt;app|fact"><span>getAmount0Delta'</span></a><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>rA</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>rB</span><span class="main"><span>,</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="main"><span>$</span></span><span>liq</span><span>›</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getAmount0Delta&apos;_\&lt;phi&gt;app|fact"><span>getAmount0Delta'</span></a><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>rA</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>rB</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>liq</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/nu-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.\&lt;phi&gt;|fact"><span class="dynamic"><span class="dynamic"><span>φ</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>z3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.frac_le|fact"><span>frac_le</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.division_ring_class.minus_divide_left|fact"><span>minus_divide_left</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.frac_le|fact"><span>frac_le</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount1Delta&apos;_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount1Delta&apos;_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount1Delta&apos;_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount1Delta&apos;_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount1Delta&apos;_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount1Delta&apos;|const"><span>getAmount1Delta'</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="comment1"><span>― ‹</span><span>In this version we don't consider precision at all, so there is no rounding.
</span><span>      Though it doesn't mean φ-system currently has no ability to do precision analysis,
</span><span>      I am thinking of a general framework in φ-system boosting precision analysis,
</span><span>      maybe based on relative error.</span><span>›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>rB</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>rB</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>liq</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>¦</span></a></span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>rB</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>rA</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> 
    </span><span class="main"><span>$</span></span><span>rA </span><span class="main"><span>$</span></span><span>rB </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>var</span></span></span><span> </span><span class="skolem"><span>rA</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>rB</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>rA </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>$</span></span><span>rB</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="main"><span>$</span></span><span>rB </span><span class="main"><span>$</span></span><span>rA </span><span class="main"><span>→</span></span><span> rA</span><span class="main"><span>,</span></span><span> rB</span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span> 

    </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>liq </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>rB </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>$</span></span><span>rA</span><span class="main"><span>)</span></span><span>›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/nu-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.\&lt;phi&gt;|fact"><span class="dynamic"><span class="dynamic"><span>φ</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.idom_abs_sgn_class.abs_mult|fact"><span>abs_mult</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount1Delta_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount1Delta_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount1Delta_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount1Delta_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount1Delta_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount1Delta|const"><span>getAmount1Delta</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>rB</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>rB</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>rB</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>rA</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>liq </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_Common_Int.html#PhiSem_Common_Int.neg_\&lt;phi&gt;app|fact"><span class="dynamic"><span class="dynamic"><span>neg</span></span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getAmount1Delta&apos;_\&lt;phi&gt;app|fact"><span>getAmount1Delta'</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>rA</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>rB</span><span class="main"><span>,</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="main"><span>$</span></span><span>liq</span><span>›</span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getAmount1Delta&apos;_\&lt;phi&gt;app|fact"><span>getAmount1Delta'</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>rA</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>rB</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>liq</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/nu-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.\&lt;phi&gt;|fact"><span class="dynamic"><span class="dynamic"><span>φ</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_ring_strict_class.zero_less_mult_iff|fact"><span>zero_less_mult_iff</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>



</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta&apos;_rounded_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta&apos;_rounded_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta&apos;_rounded_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta&apos;_rounded_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta&apos;_rounded_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta&apos;_rounded|const"><span>getAmount0Delta'_rounded</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>rB</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Int_ArbiPrec.html#PhiSem_Int_ArbiPrec.\&lt;phi&gt;ANat|const"><span>ℕ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>roundUp</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Generic_Boolean.html#PhiSem_Generic_Boolean.\&lt;phi&gt;Bool|const"><span>𝔹</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>rB</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>roundUp</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Int.html#Int.nat|const"><span>nat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>⌈</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>¦</span></a></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>rB</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>⌉</span></a></span><span>
                      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Int.html#Int.nat|const"><span>nat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.floor_ceiling_class.floor|const"><span>⌊</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>¦</span></a></span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>rB</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.abs_class.abs|const"><span>¦</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.floor_ceiling_class.floor|const"><span>⌋</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Int_ArbiPrec.html#PhiSem_Int_ArbiPrec.\&lt;phi&gt;ANat|const"><span>ℕ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
    </span><span class="main"><span>$</span></span><span>rA </span><span class="main"><span>$</span></span><span>rB </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>var</span></span></span><span> </span><span class="skolem"><span>rA</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>rB</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>rA </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>$</span></span><span>rB</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="main"><span>$</span></span><span>rB </span><span class="main"><span>$</span></span><span>rA </span><span class="main"><span>→</span></span><span> rA</span><span class="main"><span>,</span></span><span> rB</span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span> 

    </span><span class="main"><span>$</span></span><span>liq </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst_Int.html#PhiSem_Real_Abst_Int.to_real_\&lt;phi&gt;app|fact"><span class="dynamic"><span class="dynamic"><span>to_real</span></span></span></a><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>numerator1</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>rB </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>$</span></span><span>rA</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>numerator2</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>

    </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span> </span><span class="main"><span>$</span></span><span>rA </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>

    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>roundUp</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>$</span></span><span>numerator2 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>rB </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>rA</span><span>›</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> is ‹real liq * ¦rB - rA¦ / rB / rA› </span><span>*</span><span>)</span></span><span>
               </span><span class="comment1"><span>(</span><span>*</span><span>The commented annotations are not required in the verification, but honestly
                 any programmer would like adding them during the development to make themselves
                 more clearly aware of the program. It is very natural for them who designed
                 the implementation to write down their original ideas.</span><span>*</span><span>)</span></span><span>
        </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_Common_Int.html#PhiSem_Common_Int.ceiling_\&lt;phi&gt;app|fact"><span class="dynamic"><span class="dynamic"><span>ceiling</span></span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>$</span></span><span>numerator2 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>rB </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>rA</span><span>›</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span> is ‹real liq * ¦rB - rA¦ / rB / rA› </span><span>*</span><span>)</span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_Common_Int.html#PhiSem_Common_Int.floor_\&lt;phi&gt;app|fact"><span class="dynamic"><span class="dynamic"><span>floor</span></span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/nu-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.\&lt;phi&gt;|fact"><span class="dynamic"><span class="dynamic"><span>φ</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> del_insts</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.divide_nonneg_pos|fact"><span>divide_nonneg_pos</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_0_class.mult_nonneg_nonneg|fact"><span>mult_nonneg_nonneg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_semiring_strict_class.mult_pos_pos|fact"><span>mult_pos_pos</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.linordered_nonzero_semiring_class.of_nat_0_le_iff|fact"><span>of_nat_0_le_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.field_class.diff_frac_eq|fact"><span>diff_frac_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.divide_nonneg_nonneg|fact"><span>divide_nonneg_nonneg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_0_class.mult_nonneg_nonneg|fact"><span>mult_nonneg_nonneg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.linordered_nonzero_semiring_class.of_nat_0_le_iff|fact"><span>of_nat_0_le_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ring_class.right_diff_distrib|fact"><span>right_diff_distrib</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.field_class.diff_frac_eq|fact"><span>diff_frac_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.divide_nonneg_pos|fact"><span>divide_nonneg_pos</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.linordered_nonzero_semiring_class.of_nat_0_le_iff|fact"><span>of_nat_0_le_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.comm_semiring_1_cancel_class.right_diff_distrib&apos;|fact"><span>right_diff_distrib'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_ring_strict_class.zero_less_mult_iff|fact"><span>zero_less_mult_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.divide_nonneg_nonneg|fact"><span>divide_nonneg_nonneg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_0_class.mult_nonneg_nonneg|fact"><span>mult_nonneg_nonneg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.linordered_nonzero_semiring_class.of_nat_0_le_iff|fact"><span>of_nat_0_le_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.field_class.diff_frac_eq|fact"><span>diff_frac_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.divide_nonneg_nonneg|fact"><span>divide_nonneg_nonneg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ordered_semiring_0_class.mult_nonneg_nonneg|fact"><span>mult_nonneg_nonneg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.linordered_nonzero_semiring_class.of_nat_0_le_iff|fact"><span>of_nat_0_le_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.comm_semiring_1_cancel_class.right_diff_distrib&apos;|fact"><span>right_diff_distrib'</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.field_class.diff_frac_eq|fact"><span>diff_frac_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.divide_nonneg_pos|fact"><span>divide_nonneg_pos</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ab_semigroup_mult_class.mult.commute|fact"><span>mult.commute</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.linordered_nonzero_semiring_class.of_nat_0_le_iff|fact"><span>of_nat_0_le_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.ring_class.right_diff_distrib|fact"><span>right_diff_distrib</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.linordered_ring_strict_class.zero_less_mult_iff|fact"><span>zero_less_mult_iff</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta_rounded_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta_rounded_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta_rounded_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta_rounded_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta_rounded_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getAmount0Delta_rounded|const"><span>getAmount0Delta_rounded</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>rB</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Int_ArbiPrec.html#PhiSem_Int_ArbiPrec.\&lt;phi&gt;AInt|const"><span>ℤ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>rB</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.floor_ceiling_class.floor|const"><span>⌊</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real_of_int|const"><span>real_of_int</span></a><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>rB</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real_of_int|const"><span>real_of_int</span></a><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.floor_ceiling_class.floor|const"><span>⌋</span></a></span><span>
                      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>⌈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real_of_int|const"><span>real_of_int</span></a><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>rA</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real_of_int|const"><span>real_of_int</span></a><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>rB</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Archimedean_Field.html#Archimedean_Field.ceiling|const"><span>⌉</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Int_ArbiPrec.html#PhiSem_Int_ArbiPrec.\&lt;phi&gt;AInt|const"><span>ℤ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>liq </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="main"><span>$</span></span><span>rA </span><span class="main"><span>$</span></span><span>rB </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="main"><span>$</span></span><span>liq</span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>›</span></span></span><span> </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getAmount0Delta&apos;_rounded_\&lt;phi&gt;app|fact"><span>getAmount0Delta'_rounded</span></a><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="main"><span>$</span></span><span>rA </span><span class="main"><span>$</span></span><span>rB </span><span class="main"><span>$</span></span><span>liq </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>›</span></span></span><span> </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getAmount0Delta&apos;_rounded_\&lt;phi&gt;app|fact"><span>getAmount0Delta'_rounded</span></a><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/nu-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.\&lt;phi&gt;|fact"><span class="dynamic"><span class="dynamic"><span>φ</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_SIG</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.division_ring_class.divide_minus_left|fact"><span>divide_minus_left</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.frac_less2|fact"><span>frac_less2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Int.html#Int.linordered_idom_class.of_int_less_0_iff|fact"><span>of_int_less_0_iff</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_abs_class.abs_of_nonneg|fact"><span>abs_of_nonneg</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.ordered_ab_group_add_class.diff_less_0_iff_less|fact"><span>diff_less_0_iff_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.semidom_divide_class.div_0|fact"><span>div_0</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.linordered_field_class.frac_less2|fact"><span>frac_less2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_not_less|fact"><span>linorder_not_less</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.not_less_iff_gr_or_eq|fact"><span>not_less_iff_gr_or_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Int.html#Int.ring_1_class.of_int_0|fact"><span>of_int_0</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Int.html#Int.linordered_idom_class.of_int_pos|fact"><span>of_int_pos</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>



</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0|const"><span>getNextSqrtPriceFromAmount0</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>amount</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>add</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Generic_Boolean.html#PhiSem_Generic_Boolean.\&lt;phi&gt;Bool|const"><span>𝔹</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>sp</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>add</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>amount</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>amount</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span> </span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5023..5024">❴</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_5023..5024"><span>return</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>sp</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>Note, we have ‹0 &lt; amount› in thm φ now</span><span>*</span><span>)</span></span><span>
    </span><span class="main"><span>$</span></span><span>liq </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>numerator1</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>add</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>product</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>product </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>$</span></span><span>product</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>denominator</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
        </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>denominator </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><span class="main"><span>$</span></span><span>numerator1</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
          </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_5023..5024"><span>return</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>denominator</span><span>›</span></span></span><span class="main"><span>)</span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>affirm</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/nu-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.\&lt;phi&gt;|fact"><span class="dynamic"><span class="dynamic"><span>φ</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.field_class.add_frac_num|fact"><span>add_frac_num</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>TODO: add simplification before ❵. so this ;; can be removed</span><span>*</span><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_5023..5024"><span>return</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>numerator1 </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_Common_Int.html#PhiSem_Common_Int.div_\&lt;phi&gt;app|fact"><span class="dynamic"><span class="dynamic"><span>div</span></span></span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp</span><span>›</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_Common_Int.html#PhiSem_Common_Int.add_\&lt;phi&gt;app|fact"><span class="dynamic"><span class="dynamic"><span>add</span></span></span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>amount</span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>product</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>product </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp</span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>$</span></span><span>product</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>denominator</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_5023..5024"><span>return</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>denominator</span><span>›</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>affirm</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/nu-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.\&lt;phi&gt;|fact"><span class="dynamic"><span class="dynamic"><span>φ</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.division_ring_class.add_divide_eq_if_simps|fact"><span>add_divide_eq_if_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1|const"><span>getNextSqrtPriceFromAmount1</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>amount</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>add</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Generic_Boolean.html#PhiSem_Generic_Boolean.\&lt;phi&gt;Bool|const"><span>𝔹</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>add</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>amount</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>sp</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>add</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>amount</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>amount</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>liq</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6114..6115">❴</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>add</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>liq</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>quotient</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_6114..6115"><span>return</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>$</span></span><span>quotient</span><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>liq</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>quotient</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>$</span></span><span>quotient</span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_6114..6115"><span>return</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>$</span></span><span>quotient</span><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromInput_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromInput_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromInput_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromInput_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromInput_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromInput|const"><span>getNextSqrtPriceFromInput</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>amountIn</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>zeroForOne</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Generic_Boolean.html#PhiSem_Generic_Boolean.\&lt;phi&gt;Bool|const"><span>𝔹</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>liq</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>zeroForOne</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>amountIn</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>amountIn</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>liq</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6588..6589">❴</span></span></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>liq </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>zeroForOne</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_\&lt;phi&gt;app|fact"><span>getNextSqrtPriceFromAmount0</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>sp</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>liq</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>amountIn</span><span class="main"><span>,</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_\&lt;phi&gt;app|fact"><span>getNextSqrtPriceFromAmount1</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>sp</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>liq</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>amountIn</span><span class="main"><span>,</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_6588..6589"><span>return</span></a><span> </span><span class="comment1"><span>(</span><span>*</span><span>it returns the result of the branch</span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromOutput_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromOutput_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromOutput_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromOutput_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromOutput_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromOutput|const"><span>getNextSqrtPriceFromOutput</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>amountOut</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>zeroForOne</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Generic_Boolean.html#PhiSem_Generic_Boolean.\&lt;phi&gt;Bool|const"><span>𝔹</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>liq</span></span><span>›</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>zeroForOne</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>amountOut</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>sp</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>zeroForOne</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>amountOut</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>amountOut</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7164..7165">❴</span></span></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>liq </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>zeroForOne</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_\&lt;phi&gt;app|fact"><span>getNextSqrtPriceFromAmount1</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>sp</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>liq</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>amountOut</span><span class="main"><span>,</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_\&lt;phi&gt;app|fact"><span>getNextSqrtPriceFromAmount0</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>sp</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>liq</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>amountOut</span><span class="main"><span>,</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_7164..7165"><span>return</span></a><span> </span><span class="comment1"><span>(</span><span>*</span><span>it returns the result of the branch</span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>




</span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹</span><span>Liquidity formalization using integers</span><span>›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_int_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_int_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_int_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_int_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_int_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_int|const"><span>getNextSqrtPriceFromAmount0_int</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Int_ArbiPrec.html#PhiSem_Int_ArbiPrec.\&lt;phi&gt;ANat|const"><span>ℕ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>amount</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Int_ArbiPrec.html#PhiSem_Int_ArbiPrec.\&lt;phi&gt;ANat|const"><span>ℕ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>add</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Generic_Boolean.html#PhiSem_Generic_Boolean.\&lt;phi&gt;Bool|const"><span>𝔹</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>sp</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>add</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>amount</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>amount</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span> </span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7744..7745">❴</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_7744..7745"><span>return</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>sp</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>Note, we have ‹0 &lt; amount› in thm φ now</span><span>*</span><span>)</span></span><span>
    </span><span class="main"><span>$</span></span><span>liq </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst_Int.html#PhiSem_Real_Abst_Int.to_real_\&lt;phi&gt;app|fact"><span class="dynamic"><span class="dynamic"><span>to_real</span></span></span></a><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>numerator1</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>add</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>product</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>product </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>$</span></span><span>product</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>denominator</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
        </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>denominator </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><span class="main"><span>$</span></span><span>numerator1</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
          </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_7744..7745"><span>return</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>denominator</span><span>›</span></span></span><span class="main"><span>)</span></span><span>
            </span><span class="keyword2"><span class="keyword"><span>affirm</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/nu-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.\&lt;phi&gt;|fact"><span class="dynamic"><span class="dynamic"><span>φ</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.field_class.add_frac_num|fact"><span>add_frac_num</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span> </span><span class="comment1"><span>(</span><span>*</span><span>TODO: add simplification before ❵. so this ;; can be removed</span><span>*</span><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_7744..7745"><span>return</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>numerator1 </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_Common_Int.html#PhiSem_Common_Int.div_\&lt;phi&gt;app|fact"><span class="dynamic"><span class="dynamic"><span>div</span></span></span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp</span><span>›</span></span></span><span> </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_Common_Int.html#PhiSem_Common_Int.add_\&lt;phi&gt;app|fact"><span class="dynamic"><span class="dynamic"><span>add</span></span></span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>amount </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst_Int.html#PhiSem_Real_Abst_Int.to_real_\&lt;phi&gt;app|fact"><span class="dynamic"><span class="dynamic"><span>to_real</span></span></span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>product</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>product </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp</span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>$</span></span><span>product</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>denominator</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_7744..7745"><span>return</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>numerator1 </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span> </span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>$</span></span><span>denominator</span><span>›</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>affirm</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Phi_System/USER_HOME/Current/nu-system/Phi_System/library/system/Phi_Envir.ML.html#IDE_CP_Core.\&lt;phi&gt;|fact"><span class="dynamic"><span class="dynamic"><span>φ</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.division_ring_class.add_divide_eq_if_simps|fact"><span>add_divide_eq_if_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_int_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_int_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_int_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_int_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_int_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_int|const"><span>getNextSqrtPriceFromAmount1_int</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Int_ArbiPrec.html#PhiSem_Int_ArbiPrec.\&lt;phi&gt;ANat|const"><span>ℕ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>amount</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Int_ArbiPrec.html#PhiSem_Int_ArbiPrec.\&lt;phi&gt;ANat|const"><span>ℕ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>add</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Generic_Boolean.html#PhiSem_Generic_Boolean.\&lt;phi&gt;Bool|const"><span>𝔹</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>add</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="free"><span>amount</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>sp</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>add</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>amount</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>amount</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>liq</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8885..8886">❴</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>add</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="main"><span>$</span></span><span>liq</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>quotient</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_8885..8886"><span>return</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>$</span></span><span>quotient</span><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="main"><span>$</span></span><span>amount </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="main"><span>$</span></span><span>liq</span><span>›</span></span></span><span> </span><span class="main"><span>→</span></span><span> </span><span class="keyword2"><span class="keyword"><span>val</span></span></span><span> </span><span class="skolem"><span>quotient</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><span>$</span></span><span>quotient</span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_8885..8886"><span>return</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>$</span></span><span>quotient</span><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromInput_int_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromInput_int_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromInput_int_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromInput_int_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromInput_int_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromInput_int|const"><span>getNextSqrtPriceFromInput_int</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Int_ArbiPrec.html#PhiSem_Int_ArbiPrec.\&lt;phi&gt;ANat|const"><span>ℕ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>amountIn</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Int_ArbiPrec.html#PhiSem_Int_ArbiPrec.\&lt;phi&gt;ANat|const"><span>ℕ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>zeroForOne</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Generic_Boolean.html#PhiSem_Generic_Boolean.\&lt;phi&gt;Bool|const"><span>𝔹</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>liq</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>zeroForOne</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="free"><span>amountIn</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>amountIn</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>liq</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9388..9389">❴</span></span></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>liq </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>zeroForOne</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_int_\&lt;phi&gt;app|fact"><span>getNextSqrtPriceFromAmount0_int</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>sp</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>liq</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>amountIn</span><span class="main"><span>,</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_int_\&lt;phi&gt;app|fact"><span>getNextSqrtPriceFromAmount1_int</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>sp</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>liq</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>amountIn</span><span class="main"><span>,</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_9388..9389"><span>return</span></a><span> </span><span class="comment1"><span>(</span><span>*</span><span>it returns the result of the branch</span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>proc</span></span></span><span> </span><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromOutput_int_\&lt;phi&gt;app|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromOutput_int_def|fact"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromOutput_int_\&lt;phi&gt;app|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromOutput_int_def|thm"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromOutput_int_def|axiom"><span class="entity_def" id="Uniswap_SqrtPriceMath.getNextSqrtPriceFromOutput_int|const"><span>getNextSqrtPriceFromOutput_int</span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>input</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Int_ArbiPrec.html#PhiSem_Int_ArbiPrec.\&lt;phi&gt;ANat|const"><span>ℕ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>amountOut</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Int_ArbiPrec.html#PhiSem_Int_ArbiPrec.\&lt;phi&gt;ANat|const"><span>ℕ</span></a></span><span class="main"><a class="entity_ref" href="../Phi_System/Spec_Framework.html#Spec_Framework.COMMA|const"><span>❟</span></a></span><span> </span><span class="free"><span>zeroForOne</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Generic_Boolean.html#PhiSem_Generic_Boolean.\&lt;phi&gt;Bool|const"><span>𝔹</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>premises</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>liq</span></span><span>›</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="free"><span>amountOut</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>sp</span></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>output</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>zeroForOne</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>amountOut</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>liq</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Fields.html#Fields.inverse_class.inverse_divide|const"><span>/</span></a></span><span> </span><span class="free"><span>sp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Real.html#Real.real|const"><span>real</span></a><span> </span><span class="free"><span>amountOut</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_System/Phi_BI.html#Phi_BI.\&lt;phi&gt;Type|const"><span>⦂</span></a></span><span> </span><span class="keyword1"><span>𝗏𝖺𝗅</span></span><span> </span><span class="main"><a class="entity_ref" href="../Phi_Semantics/PhiSem_Real_Abst.html#PhiSem_Real_Abst.\&lt;phi&gt;AReal|const"><span>ℝ</span></a></span><span>›</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Routine.html#PhiSem_CF_Routine.routine|attribute"><span class="operator"><span>routine</span></span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9978..9979">❴</span></span></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>sp </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Solidity.html#PhiSem_CF_Solidity.require_\&lt;phi&gt;app|fact"><span>require</span></a><span> </span><span class="main"><span>(</span></span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>liq </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>›</span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>;;</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Phi_Semantics/PhiSem_CF_Basic.html#PhiSem_CF_Basic.if_\&lt;phi&gt;app|fact"><span>if</span></a></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="main"><span>$</span></span><span>zeroForOne</span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount1_int_\&lt;phi&gt;app|fact"><span>getNextSqrtPriceFromAmount1_int</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>sp</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>liq</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>amountOut</span><span class="main"><span>,</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>❴</span></span></span><span>
      </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#Uniswap_SqrtPriceMath.getNextSqrtPriceFromAmount0_int_\&lt;phi&gt;app|fact"><span>getNextSqrtPriceFromAmount0_int</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>$</span></span><span>sp</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>liq</span><span class="main"><span>,</span></span><span> </span><span class="main"><span>$</span></span><span>amountOut</span><span class="main"><span>,</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>›</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><a class="entity_ref" href="Uniswap_SqrtPriceMath.html#offset_9978..9979"><span>return</span></a><span> </span><span class="comment1"><span>(</span><span>*</span><span>it returns the result of the branch</span><span>*</span><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>❵.</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span></pre>
</body>

</html>